ARM GAS  /tmp/ccAD3fMC.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"i2c_slave.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.HAL_I2C_ListenCpltCallback,"ax",%progbits
  16              		.align	1
  17              		.global	HAL_I2C_ListenCpltCallback
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	HAL_I2C_ListenCpltCallback:
  25              	.LVL0:
  26              	.LFB68:
  27              		.file 1 "Core/Src/i2c_slave.c"
   1:Core/Src/i2c_slave.c **** #include "main.h"
   2:Core/Src/i2c_slave.c **** #include "i2c_slave.h"
   3:Core/Src/i2c_slave.c **** #include "camera.h"
   4:Core/Src/i2c_slave.c **** 
   5:Core/Src/i2c_slave.c **** 
   6:Core/Src/i2c_slave.c **** #define CAM_BRIGHTNESS_LEVEL_CMD  0x30
   7:Core/Src/i2c_slave.c **** #define CAM_SHARPNESS_LEVEL_CMD   0x40
   8:Core/Src/i2c_slave.c **** #define CAM_CONTRAST_LEVEL_CMD    0x50
   9:Core/Src/i2c_slave.c **** #define CAM_EV_LEVEL_CMD          0x60
  10:Core/Src/i2c_slave.c **** #define CAM_STAURATION_LEVEL_CMD  0x70
  11:Core/Src/i2c_slave.c **** #define CAM_COLOR_FX_CMD          0x80
  12:Core/Src/i2c_slave.c **** 
  13:Core/Src/i2c_slave.c **** 
  14:Core/Src/i2c_slave.c **** 
  15:Core/Src/i2c_slave.c **** volatile CAM_BRIGHTNESS_LEVEL lvl = 0;
  16:Core/Src/i2c_slave.c **** volatile CAM_SHARPNESS_LEVEL shrp_lvl = 0;
  17:Core/Src/i2c_slave.c **** volatile CAM_CONTRAST_LEVEL contra_lvl = 0;
  18:Core/Src/i2c_slave.c **** volatile CAM_EV_LEVEL exposure_lvl = 0;
  19:Core/Src/i2c_slave.c **** volatile CAM_STAURATION_LEVEL saturation_lvl = 0;
  20:Core/Src/i2c_slave.c **** volatile CAM_COLOR_FX effect = 0;
  21:Core/Src/i2c_slave.c **** 
  22:Core/Src/i2c_slave.c **** volatile uint8_t capture_requested = 0;
  23:Core/Src/i2c_slave.c **** 
  24:Core/Src/i2c_slave.c **** volatile uint8_t send_all_packets = 0;
  25:Core/Src/i2c_slave.c **** volatile uint16_t current_packet_index = 0;
  26:Core/Src/i2c_slave.c **** 
  27:Core/Src/i2c_slave.c **** 
  28:Core/Src/i2c_slave.c **** extern uint32_t ssdv_start_addr;
  29:Core/Src/i2c_slave.c **** extern uint32_t ssdv_packets_in_image;
  30:Core/Src/i2c_slave.c **** 
  31:Core/Src/i2c_slave.c **** extern I2C_HandleTypeDef hi2c2;
ARM GAS  /tmp/ccAD3fMC.s 			page 2


  32:Core/Src/i2c_slave.c **** #define RxSize 2
  33:Core/Src/i2c_slave.c **** uint8_t RxData[RxSize];
  34:Core/Src/i2c_slave.c **** 
  35:Core/Src/i2c_slave.c **** int rxcount = 0 ;
  36:Core/Src/i2c_slave.c **** // extern ssdv_packets_in_image, ssdv_start_addr;
  37:Core/Src/i2c_slave.c **** 
  38:Core/Src/i2c_slave.c **** 
  39:Core/Src/i2c_slave.c **** void HAL_I2C_ListenCpltCallback(I2C_HandleTypeDef *hi2c)
  40:Core/Src/i2c_slave.c **** {
  28              		.loc 1 40 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 40 1 is_stmt 0 view .LVU1
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
  41:Core/Src/i2c_slave.c ****     HAL_I2C_EnableListen_IT(hi2c);
  38              		.loc 1 41 5 is_stmt 1 view .LVU2
  39 0002 FFF7FEFF 		bl	HAL_I2C_EnableListen_IT
  40              	.LVL1:
  42:Core/Src/i2c_slave.c **** }
  41              		.loc 1 42 1 is_stmt 0 view .LVU3
  42 0006 08BD     		pop	{r3, pc}
  43              		.cfi_endproc
  44              	.LFE68:
  46              		.section	.rodata.HAL_I2C_AddrCallback.str1.4,"aMS",%progbits,1
  47              		.align	2
  48              	.LC0:
  49 0000 53656E74 		.ascii	"Sent SSDV packet %d\012\000"
  49      20535344 
  49      56207061 
  49      636B6574 
  49      2025640A 
  50              		.section	.text.HAL_I2C_AddrCallback,"ax",%progbits
  51              		.align	1
  52              		.global	HAL_I2C_AddrCallback
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  56              		.fpu softvfp
  58              	HAL_I2C_AddrCallback:
  59              	.LVL2:
  60              	.LFB69:
  43:Core/Src/i2c_slave.c **** 
  44:Core/Src/i2c_slave.c **** 
  45:Core/Src/i2c_slave.c **** 
  46:Core/Src/i2c_slave.c **** void HAL_I2C_AddrCallback(I2C_HandleTypeDef *hi2c, uint8_t TransferDirection, uint16_t AddrMatchCod
  47:Core/Src/i2c_slave.c **** {
  61              		.loc 1 47 1 is_stmt 1 view -0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 224
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              		.loc 1 47 1 is_stmt 0 view .LVU5
  66 0000 30B5     		push	{r4, r5, lr}
ARM GAS  /tmp/ccAD3fMC.s 			page 3


  67              	.LCFI1:
  68              		.cfi_def_cfa_offset 12
  69              		.cfi_offset 4, -12
  70              		.cfi_offset 5, -8
  71              		.cfi_offset 14, -4
  72 0002 B9B0     		sub	sp, sp, #228
  73              	.LCFI2:
  74              		.cfi_def_cfa_offset 240
  75 0004 0446     		mov	r4, r0
  48:Core/Src/i2c_slave.c ****     if (TransferDirection == I2C_DIRECTION_TRANSMIT) {
  76              		.loc 1 48 5 is_stmt 1 view .LVU6
  77              		.loc 1 48 8 is_stmt 0 view .LVU7
  78 0006 0129     		cmp	r1, #1
  79 0008 18D0     		beq	.L8
  49:Core/Src/i2c_slave.c ****         HAL_I2C_Slave_Seq_Receive_IT(hi2c, RxData, RxSize, I2C_FIRST_AND_LAST_FRAME);
  50:Core/Src/i2c_slave.c ****     } 
  51:Core/Src/i2c_slave.c ****     else if (TransferDirection == I2C_DIRECTION_RECEIVE) {
  80              		.loc 1 51 10 is_stmt 1 view .LVU8
  81              		.loc 1 51 13 is_stmt 0 view .LVU9
  82 000a A9B9     		cbnz	r1, .L3
  52:Core/Src/i2c_slave.c ****         if (send_all_packets && current_packet_index < ssdv_packets_in_image) {
  83              		.loc 1 52 9 is_stmt 1 view .LVU10
  84              		.loc 1 52 13 is_stmt 0 view .LVU11
  85 000c 204B     		ldr	r3, .L10
  86 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  87              		.loc 1 52 12 view .LVU12
  88 0010 33B1     		cbz	r3, .L6
  89              		.loc 1 52 54 discriminator 1 view .LVU13
  90 0012 204B     		ldr	r3, .L10+4
  91 0014 1B88     		ldrh	r3, [r3]
  92 0016 9BB2     		uxth	r3, r3
  93 0018 1F4A     		ldr	r2, .L10+8
  94              	.LVL3:
  95              		.loc 1 52 54 discriminator 1 view .LVU14
  96 001a 1268     		ldr	r2, [r2]
  97              		.loc 1 52 30 discriminator 1 view .LVU15
  98 001c 9342     		cmp	r3, r2
  99 001e 13D3     		bcc	.L9
 100              	.L6:
 101              	.LBB2:
  53:Core/Src/i2c_slave.c ****             uint8_t ssdv_pkt[SSDV_PKT_SIZE] = {0};
  54:Core/Src/i2c_slave.c ****             flash_read_buffer(ssdv_pkt, ssdv_start_addr + current_packet_index * SSDV_PKT_SIZE, SSD
  55:Core/Src/i2c_slave.c **** 
  56:Core/Src/i2c_slave.c ****             HAL_I2C_Slave_Seq_Transmit_IT(hi2c, ssdv_pkt, SSDV_PKT_SIZE, I2C_FIRST_AND_LAST_FRAME);
  57:Core/Src/i2c_slave.c ****             printf("Sent SSDV packet %d\n", current_packet_index);
  58:Core/Src/i2c_slave.c ****             current_packet_index++;
  59:Core/Src/i2c_slave.c ****         } else {
  60:Core/Src/i2c_slave.c ****             // All packets sent or transfer not started
  61:Core/Src/i2c_slave.c ****             uint8_t dummy[1] = {0xFF};
 102              		.loc 1 61 13 is_stmt 1 view .LVU16
 103              		.loc 1 61 21 is_stmt 0 view .LVU17
 104 0020 FF23     		movs	r3, #255
 105 0022 8DF80030 		strb	r3, [sp]
  62:Core/Src/i2c_slave.c ****             HAL_I2C_Slave_Seq_Transmit_IT(hi2c, dummy, 1, I2C_FIRST_AND_LAST_FRAME);
 106              		.loc 1 62 13 is_stmt 1 view .LVU18
 107 0026 0823     		movs	r3, #8
 108 0028 0122     		movs	r2, #1
ARM GAS  /tmp/ccAD3fMC.s 			page 4


 109 002a 6946     		mov	r1, sp
 110              	.LVL4:
 111              		.loc 1 62 13 is_stmt 0 view .LVU19
 112 002c 2046     		mov	r0, r4
 113              	.LVL5:
 114              		.loc 1 62 13 view .LVU20
 115 002e FFF7FEFF 		bl	HAL_I2C_Slave_Seq_Transmit_IT
 116              	.LVL6:
  63:Core/Src/i2c_slave.c ****             send_all_packets = 0;  // Reset stream mode
 117              		.loc 1 63 13 is_stmt 1 view .LVU21
 118              		.loc 1 63 30 is_stmt 0 view .LVU22
 119 0032 174B     		ldr	r3, .L10
 120 0034 0022     		movs	r2, #0
 121 0036 1A70     		strb	r2, [r3]
 122              	.L3:
 123              		.loc 1 63 30 view .LVU23
 124              	.LBE2:
  64:Core/Src/i2c_slave.c ****         }
  65:Core/Src/i2c_slave.c ****     }
  66:Core/Src/i2c_slave.c **** }
 125              		.loc 1 66 1 view .LVU24
 126 0038 39B0     		add	sp, sp, #228
 127              	.LCFI3:
 128              		.cfi_remember_state
 129              		.cfi_def_cfa_offset 12
 130              		@ sp needed
 131 003a 30BD     		pop	{r4, r5, pc}
 132              	.LVL7:
 133              	.L8:
 134              	.LCFI4:
 135              		.cfi_restore_state
  49:Core/Src/i2c_slave.c ****     } 
 136              		.loc 1 49 9 is_stmt 1 view .LVU25
 137 003c 0823     		movs	r3, #8
 138 003e 0222     		movs	r2, #2
 139              	.LVL8:
  49:Core/Src/i2c_slave.c ****     } 
 140              		.loc 1 49 9 is_stmt 0 view .LVU26
 141 0040 1649     		ldr	r1, .L10+12
 142              	.LVL9:
  49:Core/Src/i2c_slave.c ****     } 
 143              		.loc 1 49 9 view .LVU27
 144 0042 FFF7FEFF 		bl	HAL_I2C_Slave_Seq_Receive_IT
 145              	.LVL10:
  49:Core/Src/i2c_slave.c ****     } 
 146              		.loc 1 49 9 view .LVU28
 147 0046 F7E7     		b	.L3
 148              	.LVL11:
 149              	.L9:
 150              	.LBB3:
  53:Core/Src/i2c_slave.c ****             flash_read_buffer(ssdv_pkt, ssdv_start_addr + current_packet_index * SSDV_PKT_SIZE, SSD
 151              		.loc 1 53 13 is_stmt 1 view .LVU29
  53:Core/Src/i2c_slave.c ****             flash_read_buffer(ssdv_pkt, ssdv_start_addr + current_packet_index * SSDV_PKT_SIZE, SSD
 152              		.loc 1 53 21 is_stmt 0 view .LVU30
 153 0048 0091     		str	r1, [sp]
 154 004a DC22     		movs	r2, #220
 155 004c 01A8     		add	r0, sp, #4
ARM GAS  /tmp/ccAD3fMC.s 			page 5


 156              	.LVL12:
  53:Core/Src/i2c_slave.c ****             flash_read_buffer(ssdv_pkt, ssdv_start_addr + current_packet_index * SSDV_PKT_SIZE, SSD
 157              		.loc 1 53 21 view .LVU31
 158 004e FFF7FEFF 		bl	memset
 159              	.LVL13:
  54:Core/Src/i2c_slave.c **** 
 160              		.loc 1 54 13 is_stmt 1 view .LVU32
  54:Core/Src/i2c_slave.c **** 
 161              		.loc 1 54 80 is_stmt 0 view .LVU33
 162 0052 104D     		ldr	r5, .L10+4
 163 0054 2988     		ldrh	r1, [r5]
 164 0056 89B2     		uxth	r1, r1
 165 0058 C1EBC101 		rsb	r1, r1, r1, lsl #3
  54:Core/Src/i2c_slave.c **** 
 166              		.loc 1 54 13 view .LVU34
 167 005c 104B     		ldr	r3, .L10+16
 168 005e 1B68     		ldr	r3, [r3]
 169 0060 E022     		movs	r2, #224
 170 0062 03EB4111 		add	r1, r3, r1, lsl #5
 171 0066 6846     		mov	r0, sp
 172 0068 FFF7FEFF 		bl	flash_read_buffer
 173              	.LVL14:
  56:Core/Src/i2c_slave.c ****             printf("Sent SSDV packet %d\n", current_packet_index);
 174              		.loc 1 56 13 is_stmt 1 view .LVU35
 175 006c 0823     		movs	r3, #8
 176 006e E022     		movs	r2, #224
 177 0070 6946     		mov	r1, sp
 178 0072 2046     		mov	r0, r4
 179 0074 FFF7FEFF 		bl	HAL_I2C_Slave_Seq_Transmit_IT
 180              	.LVL15:
  57:Core/Src/i2c_slave.c ****             current_packet_index++;
 181              		.loc 1 57 13 view .LVU36
 182 0078 2988     		ldrh	r1, [r5]
 183 007a 89B2     		uxth	r1, r1
 184 007c 0948     		ldr	r0, .L10+20
 185 007e FFF7FEFF 		bl	printf
 186              	.LVL16:
  58:Core/Src/i2c_slave.c ****         } else {
 187              		.loc 1 58 13 view .LVU37
  58:Core/Src/i2c_slave.c ****         } else {
 188              		.loc 1 58 33 is_stmt 0 view .LVU38
 189 0082 2B88     		ldrh	r3, [r5]
 190 0084 9BB2     		uxth	r3, r3
 191 0086 0133     		adds	r3, r3, #1
 192 0088 9BB2     		uxth	r3, r3
 193 008a 2B80     		strh	r3, [r5]	@ movhi
 194              	.LBE3:
  52:Core/Src/i2c_slave.c ****             uint8_t ssdv_pkt[SSDV_PKT_SIZE] = {0};
 195              		.loc 1 52 79 view .LVU39
 196 008c D4E7     		b	.L3
 197              	.L11:
 198 008e 00BF     		.align	2
 199              	.L10:
 200 0090 00000000 		.word	.LANCHOR1
 201 0094 00000000 		.word	.LANCHOR2
 202 0098 00000000 		.word	ssdv_packets_in_image
 203 009c 00000000 		.word	.LANCHOR0
ARM GAS  /tmp/ccAD3fMC.s 			page 6


 204 00a0 00000000 		.word	ssdv_start_addr
 205 00a4 00000000 		.word	.LC0
 206              		.cfi_endproc
 207              	.LFE69:
 209              		.section	.rodata.HAL_I2C_SlaveRxCpltCallback.str1.4,"aMS",%progbits,1
 210              		.align	2
 211              	.LC1:
 212 0000 43617074 		.ascii	"Capture command received\015\000"
 212      75726520 
 212      636F6D6D 
 212      616E6420 
 212      72656365 
 213 001a 0000     		.align	2
 214              	.LC2:
 215 001c 53534456 		.ascii	"SSDV stream requested\015\000"
 215      20737472 
 215      65616D20 
 215      72657175 
 215      65737465 
 216 0033 00       		.align	2
 217              	.LC3:
 218 0034 62726967 		.ascii	"brightness level: %i \012\000"
 218      68746E65 
 218      7373206C 
 218      6576656C 
 218      3A202569 
 219 004b 00       		.align	2
 220              	.LC4:
 221 004c 73686172 		.ascii	"sharpness level: %i \012\000"
 221      706E6573 
 221      73206C65 
 221      76656C3A 
 221      20256920 
 222 0062 0000     		.align	2
 223              	.LC5:
 224 0064 636F6E74 		.ascii	"contrast level: %i \012\000"
 224      72617374 
 224      206C6576 
 224      656C3A20 
 224      2569200A 
 225 0079 000000   		.align	2
 226              	.LC6:
 227 007c 6578706F 		.ascii	"exposure level: %i \012\000"
 227      73757265 
 227      206C6576 
 227      656C3A20 
 227      2569200A 
 228 0091 000000   		.align	2
 229              	.LC7:
 230 0094 73617475 		.ascii	"saturation level: %i \012\000"
 230      72617469 
 230      6F6E206C 
 230      6576656C 
 230      3A202569 
 231 00ab 00       		.align	2
 232              	.LC8:
 233 00ac 65666665 		.ascii	"effect : %i \012\000"
ARM GAS  /tmp/ccAD3fMC.s 			page 7


 233      6374203A 
 233      20256920 
 233      0A00
 234              		.section	.text.HAL_I2C_SlaveRxCpltCallback,"ax",%progbits
 235              		.align	1
 236              		.global	HAL_I2C_SlaveRxCpltCallback
 237              		.syntax unified
 238              		.thumb
 239              		.thumb_func
 240              		.fpu softvfp
 242              	HAL_I2C_SlaveRxCpltCallback:
 243              	.LVL17:
 244              	.LFB70:
  67:Core/Src/i2c_slave.c **** 
  68:Core/Src/i2c_slave.c **** 
  69:Core/Src/i2c_slave.c **** void HAL_I2C_SlaveRxCpltCallback(I2C_HandleTypeDef *hi2c)
  70:Core/Src/i2c_slave.c **** {
 245              		.loc 1 70 1 is_stmt 1 view -0
 246              		.cfi_startproc
 247              		@ args = 0, pretend = 0, frame = 0
 248              		@ frame_needed = 0, uses_anonymous_args = 0
 249              		.loc 1 70 1 is_stmt 0 view .LVU41
 250 0000 08B5     		push	{r3, lr}
 251              	.LCFI5:
 252              		.cfi_def_cfa_offset 8
 253              		.cfi_offset 3, -8
 254              		.cfi_offset 14, -4
  71:Core/Src/i2c_slave.c ****     rxcount++;
 255              		.loc 1 71 5 is_stmt 1 view .LVU42
 256              		.loc 1 71 12 is_stmt 0 view .LVU43
 257 0002 314A     		ldr	r2, .L29
 258 0004 1368     		ldr	r3, [r2]
 259 0006 0133     		adds	r3, r3, #1
 260 0008 1360     		str	r3, [r2]
  72:Core/Src/i2c_slave.c ****     uint8_t cmd = RxData[0];
 261              		.loc 1 72 5 is_stmt 1 view .LVU44
 262              		.loc 1 72 13 is_stmt 0 view .LVU45
 263 000a 304B     		ldr	r3, .L29+4
 264 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 265              	.LVL18:
  73:Core/Src/i2c_slave.c **** 
  74:Core/Src/i2c_slave.c ****     if (cmd == 0x10) 
 266              		.loc 1 74 5 is_stmt 1 view .LVU46
 267              		.loc 1 74 8 is_stmt 0 view .LVU47
 268 000e 102B     		cmp	r3, #16
 269 0010 17D0     		beq	.L22
  75:Core/Src/i2c_slave.c ****     {
  76:Core/Src/i2c_slave.c ****         printf("Capture command received\r\n");
  77:Core/Src/i2c_slave.c ****         capture_requested = 1;
  78:Core/Src/i2c_slave.c ****     }
  79:Core/Src/i2c_slave.c ****     else if (cmd == 0x20) 
 270              		.loc 1 79 10 is_stmt 1 view .LVU48
 271              		.loc 1 79 13 is_stmt 0 view .LVU49
 272 0012 202B     		cmp	r3, #32
 273 0014 1CD0     		beq	.L23
  80:Core/Src/i2c_slave.c ****     {
  81:Core/Src/i2c_slave.c ****         printf("SSDV stream requested\r\n");
ARM GAS  /tmp/ccAD3fMC.s 			page 8


  82:Core/Src/i2c_slave.c ****         send_all_packets = 1;
  83:Core/Src/i2c_slave.c ****         current_packet_index = 0;
  84:Core/Src/i2c_slave.c ****     }
  85:Core/Src/i2c_slave.c ****     else if(cmd == CAM_BRIGHTNESS_LEVEL_CMD )
 274              		.loc 1 85 10 is_stmt 1 view .LVU50
 275              		.loc 1 85 12 is_stmt 0 view .LVU51
 276 0016 302B     		cmp	r3, #48
 277 0018 24D0     		beq	.L24
  86:Core/Src/i2c_slave.c ****     {
  87:Core/Src/i2c_slave.c ****         lvl = RxData[1];
  88:Core/Src/i2c_slave.c ****         printf("brightness level: %i \n",lvl);
  89:Core/Src/i2c_slave.c **** 
  90:Core/Src/i2c_slave.c ****     }
  91:Core/Src/i2c_slave.c ****     else if(cmd == CAM_SHARPNESS_LEVEL_CMD )
 278              		.loc 1 91 10 is_stmt 1 view .LVU52
 279              		.loc 1 91 12 is_stmt 0 view .LVU53
 280 001a 402B     		cmp	r3, #64
 281 001c 2BD0     		beq	.L25
  92:Core/Src/i2c_slave.c ****     {
  93:Core/Src/i2c_slave.c ****         shrp_lvl = RxData[1];
  94:Core/Src/i2c_slave.c ****         printf("sharpness level: %i \n",lvl);
  95:Core/Src/i2c_slave.c **** 
  96:Core/Src/i2c_slave.c ****     }
  97:Core/Src/i2c_slave.c ****     else if(cmd == CAM_CONTRAST_LEVEL_CMD )
 282              		.loc 1 97 10 is_stmt 1 view .LVU54
 283              		.loc 1 97 12 is_stmt 0 view .LVU55
 284 001e 502B     		cmp	r3, #80
 285 0020 33D0     		beq	.L26
  98:Core/Src/i2c_slave.c ****     {
  99:Core/Src/i2c_slave.c ****         contra_lvl = RxData[1];
 100:Core/Src/i2c_slave.c ****         printf("contrast level: %i \n",lvl);
 101:Core/Src/i2c_slave.c **** 
 102:Core/Src/i2c_slave.c ****     }
 103:Core/Src/i2c_slave.c ****     else if(cmd == CAM_EV_LEVEL_CMD )
 286              		.loc 1 103 10 is_stmt 1 view .LVU56
 287              		.loc 1 103 12 is_stmt 0 view .LVU57
 288 0022 602B     		cmp	r3, #96
 289 0024 3BD0     		beq	.L27
 104:Core/Src/i2c_slave.c ****     {
 105:Core/Src/i2c_slave.c ****         exposure_lvl = RxData[1];
 106:Core/Src/i2c_slave.c ****         printf("exposure level: %i \n",lvl);
 107:Core/Src/i2c_slave.c **** 
 108:Core/Src/i2c_slave.c ****     }
 109:Core/Src/i2c_slave.c ****     else if(cmd == CAM_STAURATION_LEVEL_CMD )
 290              		.loc 1 109 10 is_stmt 1 view .LVU58
 291              		.loc 1 109 12 is_stmt 0 view .LVU59
 292 0026 702B     		cmp	r3, #112
 293 0028 43D0     		beq	.L28
 110:Core/Src/i2c_slave.c ****     {
 111:Core/Src/i2c_slave.c ****         saturation_lvl = RxData[1];
 112:Core/Src/i2c_slave.c ****         printf("saturation level: %i \n",lvl);
 113:Core/Src/i2c_slave.c **** 
 114:Core/Src/i2c_slave.c ****     }
 115:Core/Src/i2c_slave.c ****      else if(cmd == CAM_COLOR_FX_CMD )
 294              		.loc 1 115 11 is_stmt 1 view .LVU60
 295              		.loc 1 115 13 is_stmt 0 view .LVU61
 296 002a 802B     		cmp	r3, #128
ARM GAS  /tmp/ccAD3fMC.s 			page 9


 297 002c 0FD1     		bne	.L12
 116:Core/Src/i2c_slave.c ****     {
 117:Core/Src/i2c_slave.c ****         effect = RxData[1];
 298              		.loc 1 117 9 is_stmt 1 view .LVU62
 299              		.loc 1 117 24 is_stmt 0 view .LVU63
 300 002e 274B     		ldr	r3, .L29+4
 301              	.LVL19:
 302              		.loc 1 117 24 view .LVU64
 303 0030 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 304              		.loc 1 117 16 view .LVU65
 305 0032 274B     		ldr	r3, .L29+8
 306 0034 1A70     		strb	r2, [r3]
 118:Core/Src/i2c_slave.c ****         printf("effect : %i \n",lvl);
 307              		.loc 1 118 9 is_stmt 1 view .LVU66
 308 0036 274B     		ldr	r3, .L29+12
 309 0038 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 310 003a 2748     		ldr	r0, .L29+16
 311              	.LVL20:
 312              		.loc 1 118 9 is_stmt 0 view .LVU67
 313 003c FFF7FEFF 		bl	printf
 314              	.LVL21:
 119:Core/Src/i2c_slave.c **** 
 120:Core/Src/i2c_slave.c ****     }
 121:Core/Src/i2c_slave.c ****     
 122:Core/Src/i2c_slave.c **** }
 315              		.loc 1 122 1 view .LVU68
 316 0040 05E0     		b	.L12
 317              	.LVL22:
 318              	.L22:
  76:Core/Src/i2c_slave.c ****         capture_requested = 1;
 319              		.loc 1 76 9 is_stmt 1 view .LVU69
 320 0042 2648     		ldr	r0, .L29+20
 321              	.LVL23:
  76:Core/Src/i2c_slave.c ****         capture_requested = 1;
 322              		.loc 1 76 9 is_stmt 0 view .LVU70
 323 0044 FFF7FEFF 		bl	puts
 324              	.LVL24:
  77:Core/Src/i2c_slave.c ****     }
 325              		.loc 1 77 9 is_stmt 1 view .LVU71
  77:Core/Src/i2c_slave.c ****     }
 326              		.loc 1 77 27 is_stmt 0 view .LVU72
 327 0048 254B     		ldr	r3, .L29+24
 328 004a 0122     		movs	r2, #1
 329 004c 1A70     		strb	r2, [r3]
 330              	.L12:
 331              		.loc 1 122 1 view .LVU73
 332 004e 08BD     		pop	{r3, pc}
 333              	.LVL25:
 334              	.L23:
  81:Core/Src/i2c_slave.c ****         send_all_packets = 1;
 335              		.loc 1 81 9 is_stmt 1 view .LVU74
 336 0050 2448     		ldr	r0, .L29+28
 337              	.LVL26:
  81:Core/Src/i2c_slave.c ****         send_all_packets = 1;
 338              		.loc 1 81 9 is_stmt 0 view .LVU75
 339 0052 FFF7FEFF 		bl	puts
 340              	.LVL27:
ARM GAS  /tmp/ccAD3fMC.s 			page 10


  82:Core/Src/i2c_slave.c ****         current_packet_index = 0;
 341              		.loc 1 82 9 is_stmt 1 view .LVU76
  82:Core/Src/i2c_slave.c ****         current_packet_index = 0;
 342              		.loc 1 82 26 is_stmt 0 view .LVU77
 343 0056 244B     		ldr	r3, .L29+32
 344 0058 0122     		movs	r2, #1
 345 005a 1A70     		strb	r2, [r3]
  83:Core/Src/i2c_slave.c ****     }
 346              		.loc 1 83 9 is_stmt 1 view .LVU78
  83:Core/Src/i2c_slave.c ****     }
 347              		.loc 1 83 30 is_stmt 0 view .LVU79
 348 005c 234B     		ldr	r3, .L29+36
 349 005e 0022     		movs	r2, #0
 350 0060 1A80     		strh	r2, [r3]	@ movhi
 351 0062 F4E7     		b	.L12
 352              	.LVL28:
 353              	.L24:
  87:Core/Src/i2c_slave.c ****         printf("brightness level: %i \n",lvl);
 354              		.loc 1 87 9 is_stmt 1 view .LVU80
  87:Core/Src/i2c_slave.c ****         printf("brightness level: %i \n",lvl);
 355              		.loc 1 87 21 is_stmt 0 view .LVU81
 356 0064 194B     		ldr	r3, .L29+4
 357              	.LVL29:
  87:Core/Src/i2c_slave.c ****         printf("brightness level: %i \n",lvl);
 358              		.loc 1 87 21 view .LVU82
 359 0066 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
  87:Core/Src/i2c_slave.c ****         printf("brightness level: %i \n",lvl);
 360              		.loc 1 87 13 view .LVU83
 361 0068 1A4B     		ldr	r3, .L29+12
 362 006a 1A70     		strb	r2, [r3]
  88:Core/Src/i2c_slave.c **** 
 363              		.loc 1 88 9 is_stmt 1 view .LVU84
 364 006c 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 365 006e 2048     		ldr	r0, .L29+40
 366              	.LVL30:
  88:Core/Src/i2c_slave.c **** 
 367              		.loc 1 88 9 is_stmt 0 view .LVU85
 368 0070 FFF7FEFF 		bl	printf
 369              	.LVL31:
  88:Core/Src/i2c_slave.c **** 
 370              		.loc 1 88 9 view .LVU86
 371 0074 EBE7     		b	.L12
 372              	.LVL32:
 373              	.L25:
  93:Core/Src/i2c_slave.c ****         printf("sharpness level: %i \n",lvl);
 374              		.loc 1 93 9 is_stmt 1 view .LVU87
  93:Core/Src/i2c_slave.c ****         printf("sharpness level: %i \n",lvl);
 375              		.loc 1 93 26 is_stmt 0 view .LVU88
 376 0076 154B     		ldr	r3, .L29+4
 377              	.LVL33:
  93:Core/Src/i2c_slave.c ****         printf("sharpness level: %i \n",lvl);
 378              		.loc 1 93 26 view .LVU89
 379 0078 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
  93:Core/Src/i2c_slave.c ****         printf("sharpness level: %i \n",lvl);
 380              		.loc 1 93 18 view .LVU90
 381 007a 1E4B     		ldr	r3, .L29+44
 382 007c 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccAD3fMC.s 			page 11


  94:Core/Src/i2c_slave.c **** 
 383              		.loc 1 94 9 is_stmt 1 view .LVU91
 384 007e 154B     		ldr	r3, .L29+12
 385 0080 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 386 0082 1D48     		ldr	r0, .L29+48
 387              	.LVL34:
  94:Core/Src/i2c_slave.c **** 
 388              		.loc 1 94 9 is_stmt 0 view .LVU92
 389 0084 FFF7FEFF 		bl	printf
 390              	.LVL35:
  94:Core/Src/i2c_slave.c **** 
 391              		.loc 1 94 9 view .LVU93
 392 0088 E1E7     		b	.L12
 393              	.LVL36:
 394              	.L26:
  99:Core/Src/i2c_slave.c ****         printf("contrast level: %i \n",lvl);
 395              		.loc 1 99 9 is_stmt 1 view .LVU94
  99:Core/Src/i2c_slave.c ****         printf("contrast level: %i \n",lvl);
 396              		.loc 1 99 28 is_stmt 0 view .LVU95
 397 008a 104B     		ldr	r3, .L29+4
 398              	.LVL37:
  99:Core/Src/i2c_slave.c ****         printf("contrast level: %i \n",lvl);
 399              		.loc 1 99 28 view .LVU96
 400 008c 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
  99:Core/Src/i2c_slave.c ****         printf("contrast level: %i \n",lvl);
 401              		.loc 1 99 20 view .LVU97
 402 008e 1B4B     		ldr	r3, .L29+52
 403 0090 1A70     		strb	r2, [r3]
 100:Core/Src/i2c_slave.c **** 
 404              		.loc 1 100 9 is_stmt 1 view .LVU98
 405 0092 104B     		ldr	r3, .L29+12
 406 0094 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 407 0096 1A48     		ldr	r0, .L29+56
 408              	.LVL38:
 100:Core/Src/i2c_slave.c **** 
 409              		.loc 1 100 9 is_stmt 0 view .LVU99
 410 0098 FFF7FEFF 		bl	printf
 411              	.LVL39:
 100:Core/Src/i2c_slave.c **** 
 412              		.loc 1 100 9 view .LVU100
 413 009c D7E7     		b	.L12
 414              	.LVL40:
 415              	.L27:
 105:Core/Src/i2c_slave.c ****         printf("exposure level: %i \n",lvl);
 416              		.loc 1 105 9 is_stmt 1 view .LVU101
 105:Core/Src/i2c_slave.c ****         printf("exposure level: %i \n",lvl);
 417              		.loc 1 105 30 is_stmt 0 view .LVU102
 418 009e 0B4B     		ldr	r3, .L29+4
 419              	.LVL41:
 105:Core/Src/i2c_slave.c ****         printf("exposure level: %i \n",lvl);
 420              		.loc 1 105 30 view .LVU103
 421 00a0 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 105:Core/Src/i2c_slave.c ****         printf("exposure level: %i \n",lvl);
 422              		.loc 1 105 22 view .LVU104
 423 00a2 184B     		ldr	r3, .L29+60
 424 00a4 1A70     		strb	r2, [r3]
 106:Core/Src/i2c_slave.c **** 
ARM GAS  /tmp/ccAD3fMC.s 			page 12


 425              		.loc 1 106 9 is_stmt 1 view .LVU105
 426 00a6 0B4B     		ldr	r3, .L29+12
 427 00a8 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 428 00aa 1748     		ldr	r0, .L29+64
 429              	.LVL42:
 106:Core/Src/i2c_slave.c **** 
 430              		.loc 1 106 9 is_stmt 0 view .LVU106
 431 00ac FFF7FEFF 		bl	printf
 432              	.LVL43:
 106:Core/Src/i2c_slave.c **** 
 433              		.loc 1 106 9 view .LVU107
 434 00b0 CDE7     		b	.L12
 435              	.LVL44:
 436              	.L28:
 111:Core/Src/i2c_slave.c ****         printf("saturation level: %i \n",lvl);
 437              		.loc 1 111 9 is_stmt 1 view .LVU108
 111:Core/Src/i2c_slave.c ****         printf("saturation level: %i \n",lvl);
 438              		.loc 1 111 32 is_stmt 0 view .LVU109
 439 00b2 064B     		ldr	r3, .L29+4
 440              	.LVL45:
 111:Core/Src/i2c_slave.c ****         printf("saturation level: %i \n",lvl);
 441              		.loc 1 111 32 view .LVU110
 442 00b4 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 111:Core/Src/i2c_slave.c ****         printf("saturation level: %i \n",lvl);
 443              		.loc 1 111 24 view .LVU111
 444 00b6 154B     		ldr	r3, .L29+68
 445 00b8 1A70     		strb	r2, [r3]
 112:Core/Src/i2c_slave.c **** 
 446              		.loc 1 112 9 is_stmt 1 view .LVU112
 447 00ba 064B     		ldr	r3, .L29+12
 448 00bc 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 449 00be 1448     		ldr	r0, .L29+72
 450              	.LVL46:
 112:Core/Src/i2c_slave.c **** 
 451              		.loc 1 112 9 is_stmt 0 view .LVU113
 452 00c0 FFF7FEFF 		bl	printf
 453              	.LVL47:
 112:Core/Src/i2c_slave.c **** 
 454              		.loc 1 112 9 view .LVU114
 455 00c4 C3E7     		b	.L12
 456              	.L30:
 457 00c6 00BF     		.align	2
 458              	.L29:
 459 00c8 00000000 		.word	.LANCHOR3
 460 00cc 00000000 		.word	.LANCHOR0
 461 00d0 00000000 		.word	.LANCHOR10
 462 00d4 00000000 		.word	.LANCHOR5
 463 00d8 AC000000 		.word	.LC8
 464 00dc 00000000 		.word	.LC1
 465 00e0 00000000 		.word	.LANCHOR4
 466 00e4 1C000000 		.word	.LC2
 467 00e8 00000000 		.word	.LANCHOR1
 468 00ec 00000000 		.word	.LANCHOR2
 469 00f0 34000000 		.word	.LC3
 470 00f4 00000000 		.word	.LANCHOR6
 471 00f8 4C000000 		.word	.LC4
 472 00fc 00000000 		.word	.LANCHOR7
ARM GAS  /tmp/ccAD3fMC.s 			page 13


 473 0100 64000000 		.word	.LC5
 474 0104 00000000 		.word	.LANCHOR8
 475 0108 7C000000 		.word	.LC6
 476 010c 00000000 		.word	.LANCHOR9
 477 0110 94000000 		.word	.LC7
 478              		.cfi_endproc
 479              	.LFE70:
 481              		.section	.text.HAL_I2C_ErrorCallback,"ax",%progbits
 482              		.align	1
 483              		.global	HAL_I2C_ErrorCallback
 484              		.syntax unified
 485              		.thumb
 486              		.thumb_func
 487              		.fpu softvfp
 489              	HAL_I2C_ErrorCallback:
 490              	.LVL48:
 491              	.LFB71:
 123:Core/Src/i2c_slave.c **** 
 124:Core/Src/i2c_slave.c **** 
 125:Core/Src/i2c_slave.c **** 
 126:Core/Src/i2c_slave.c **** void HAL_I2C_ErrorCallback(I2C_HandleTypeDef *hi2c)
 127:Core/Src/i2c_slave.c **** {
 492              		.loc 1 127 1 is_stmt 1 view -0
 493              		.cfi_startproc
 494              		@ args = 0, pretend = 0, frame = 0
 495              		@ frame_needed = 0, uses_anonymous_args = 0
 496              		.loc 1 127 1 is_stmt 0 view .LVU116
 497 0000 08B5     		push	{r3, lr}
 498              	.LCFI6:
 499              		.cfi_def_cfa_offset 8
 500              		.cfi_offset 3, -8
 501              		.cfi_offset 14, -4
 128:Core/Src/i2c_slave.c ****     HAL_I2C_EnableListen_IT(hi2c);
 502              		.loc 1 128 5 is_stmt 1 view .LVU117
 503 0002 FFF7FEFF 		bl	HAL_I2C_EnableListen_IT
 504              	.LVL49:
 129:Core/Src/i2c_slave.c **** }
 505              		.loc 1 129 1 is_stmt 0 view .LVU118
 506 0006 08BD     		pop	{r3, pc}
 507              		.cfi_endproc
 508              	.LFE71:
 510              		.global	rxcount
 511              		.global	RxData
 512              		.global	current_packet_index
 513              		.global	send_all_packets
 514              		.global	capture_requested
 515              		.global	effect
 516              		.global	saturation_lvl
 517              		.global	exposure_lvl
 518              		.global	contra_lvl
 519              		.global	shrp_lvl
 520              		.global	lvl
 521              		.section	.bss.RxData,"aw",%nobits
 522              		.align	2
 523              		.set	.LANCHOR0,. + 0
 526              	RxData:
 527 0000 0000     		.space	2
ARM GAS  /tmp/ccAD3fMC.s 			page 14


 528              		.section	.bss.capture_requested,"aw",%nobits
 529              		.set	.LANCHOR4,. + 0
 532              	capture_requested:
 533 0000 00       		.space	1
 534              		.section	.bss.contra_lvl,"aw",%nobits
 535              		.set	.LANCHOR7,. + 0
 538              	contra_lvl:
 539 0000 00       		.space	1
 540              		.section	.bss.current_packet_index,"aw",%nobits
 541              		.align	1
 542              		.set	.LANCHOR2,. + 0
 545              	current_packet_index:
 546 0000 0000     		.space	2
 547              		.section	.bss.effect,"aw",%nobits
 548              		.set	.LANCHOR10,. + 0
 551              	effect:
 552 0000 00       		.space	1
 553              		.section	.bss.exposure_lvl,"aw",%nobits
 554              		.set	.LANCHOR8,. + 0
 557              	exposure_lvl:
 558 0000 00       		.space	1
 559              		.section	.bss.lvl,"aw",%nobits
 560              		.set	.LANCHOR5,. + 0
 563              	lvl:
 564 0000 00       		.space	1
 565              		.section	.bss.rxcount,"aw",%nobits
 566              		.align	2
 567              		.set	.LANCHOR3,. + 0
 570              	rxcount:
 571 0000 00000000 		.space	4
 572              		.section	.bss.saturation_lvl,"aw",%nobits
 573              		.set	.LANCHOR9,. + 0
 576              	saturation_lvl:
 577 0000 00       		.space	1
 578              		.section	.bss.send_all_packets,"aw",%nobits
 579              		.set	.LANCHOR1,. + 0
 582              	send_all_packets:
 583 0000 00       		.space	1
 584              		.section	.bss.shrp_lvl,"aw",%nobits
 585              		.set	.LANCHOR6,. + 0
 588              	shrp_lvl:
 589 0000 00       		.space	1
 590              		.text
 591              	.Letext0:
 592              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 593              		.file 3 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 594              		.file 4 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 595              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 596              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 597              		.file 7 "Core/Inc/camera.h"
 598              		.file 8 "Core/Inc/i2c_slave.h"
 599              		.file 9 "/usr/include/newlib/stdio.h"
 600              		.file 10 "<built-in>"
 601              		.file 11 "libs/flash/flash.h"
ARM GAS  /tmp/ccAD3fMC.s 			page 15


DEFINED SYMBOLS
                            *ABS*:0000000000000000 i2c_slave.c
     /tmp/ccAD3fMC.s:16     .text.HAL_I2C_ListenCpltCallback:0000000000000000 $t
     /tmp/ccAD3fMC.s:24     .text.HAL_I2C_ListenCpltCallback:0000000000000000 HAL_I2C_ListenCpltCallback
     /tmp/ccAD3fMC.s:47     .rodata.HAL_I2C_AddrCallback.str1.4:0000000000000000 $d
     /tmp/ccAD3fMC.s:51     .text.HAL_I2C_AddrCallback:0000000000000000 $t
     /tmp/ccAD3fMC.s:58     .text.HAL_I2C_AddrCallback:0000000000000000 HAL_I2C_AddrCallback
     /tmp/ccAD3fMC.s:200    .text.HAL_I2C_AddrCallback:0000000000000090 $d
     /tmp/ccAD3fMC.s:210    .rodata.HAL_I2C_SlaveRxCpltCallback.str1.4:0000000000000000 $d
     /tmp/ccAD3fMC.s:235    .text.HAL_I2C_SlaveRxCpltCallback:0000000000000000 $t
     /tmp/ccAD3fMC.s:242    .text.HAL_I2C_SlaveRxCpltCallback:0000000000000000 HAL_I2C_SlaveRxCpltCallback
     /tmp/ccAD3fMC.s:459    .text.HAL_I2C_SlaveRxCpltCallback:00000000000000c8 $d
     /tmp/ccAD3fMC.s:482    .text.HAL_I2C_ErrorCallback:0000000000000000 $t
     /tmp/ccAD3fMC.s:489    .text.HAL_I2C_ErrorCallback:0000000000000000 HAL_I2C_ErrorCallback
     /tmp/ccAD3fMC.s:570    .bss.rxcount:0000000000000000 rxcount
     /tmp/ccAD3fMC.s:526    .bss.RxData:0000000000000000 RxData
     /tmp/ccAD3fMC.s:545    .bss.current_packet_index:0000000000000000 current_packet_index
     /tmp/ccAD3fMC.s:582    .bss.send_all_packets:0000000000000000 send_all_packets
     /tmp/ccAD3fMC.s:532    .bss.capture_requested:0000000000000000 capture_requested
     /tmp/ccAD3fMC.s:551    .bss.effect:0000000000000000 effect
     /tmp/ccAD3fMC.s:576    .bss.saturation_lvl:0000000000000000 saturation_lvl
     /tmp/ccAD3fMC.s:557    .bss.exposure_lvl:0000000000000000 exposure_lvl
     /tmp/ccAD3fMC.s:538    .bss.contra_lvl:0000000000000000 contra_lvl
     /tmp/ccAD3fMC.s:588    .bss.shrp_lvl:0000000000000000 shrp_lvl
     /tmp/ccAD3fMC.s:563    .bss.lvl:0000000000000000 lvl
     /tmp/ccAD3fMC.s:522    .bss.RxData:0000000000000000 $d
     /tmp/ccAD3fMC.s:533    .bss.capture_requested:0000000000000000 $d
     /tmp/ccAD3fMC.s:539    .bss.contra_lvl:0000000000000000 $d
     /tmp/ccAD3fMC.s:541    .bss.current_packet_index:0000000000000000 $d
     /tmp/ccAD3fMC.s:552    .bss.effect:0000000000000000 $d
     /tmp/ccAD3fMC.s:558    .bss.exposure_lvl:0000000000000000 $d
     /tmp/ccAD3fMC.s:564    .bss.lvl:0000000000000000 $d
     /tmp/ccAD3fMC.s:566    .bss.rxcount:0000000000000000 $d
     /tmp/ccAD3fMC.s:577    .bss.saturation_lvl:0000000000000000 $d
     /tmp/ccAD3fMC.s:583    .bss.send_all_packets:0000000000000000 $d
     /tmp/ccAD3fMC.s:589    .bss.shrp_lvl:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_I2C_EnableListen_IT
HAL_I2C_Slave_Seq_Transmit_IT
HAL_I2C_Slave_Seq_Receive_IT
memset
flash_read_buffer
printf
ssdv_packets_in_image
ssdv_start_addr
puts
