ARM GAS  /tmp/ccDAW1IQ.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"camera.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.arducam_write_register,"ax",%progbits
  16              		.align	1
  17              		.global	arducam_write_register
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	arducam_write_register:
  25              	.LVL0:
  26              	.LFB68:
  27              		.file 1 "libs/camera/camera.c"
   1:libs/camera/camera.c **** #include "camera.h"
   2:libs/camera/camera.c **** #include "i2c_slave.h"
   3:libs/camera/camera.c **** 
   4:libs/camera/camera.c **** 
   5:libs/camera/camera.c **** uint8_t image_buffer[MAX_IMAGE_SIZE]={0};
   6:libs/camera/camera.c **** 
   7:libs/camera/camera.c **** #define JPEG_SOI 0xFFD8  // Start Of Image
   8:libs/camera/camera.c **** #define JPEG_EOI 0xFFD9  // End Of Image
   9:libs/camera/camera.c **** uint32_t jpeg_size = 0;
  10:libs/camera/camera.c **** 
  11:libs/camera/camera.c **** 
  12:libs/camera/camera.c **** uint32_t ssdv_packets_in_image = 0;
  13:libs/camera/camera.c **** uint32_t ssdv_start_addr = 0; 
  14:libs/camera/camera.c **** 
  15:libs/camera/camera.c **** /* USER CODE BEGIN PD */
  16:libs/camera/camera.c **** extern SPI_HandleTypeDef hspi1;
  17:libs/camera/camera.c **** char ssdv_type = SSDV_TYPE_NORMAL;
  18:libs/camera/camera.c **** char ssdv_call_sign[7] = "CALSIGN";
  19:libs/camera/camera.c **** uint8_t ssdv_image_id = 0;
  20:libs/camera/camera.c **** int8_t ssdv_quality = 4;
  21:libs/camera/camera.c **** 
  22:libs/camera/camera.c **** 
  23:libs/camera/camera.c **** void arducam_write_register(uint8_t reg, uint8_t value) {
  28              		.loc 1 23 57 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 23 57 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccDAW1IQ.s 			page 2


  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 82B0     		sub	sp, sp, #8
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  24:libs/camera/camera.c ****     uint8_t tx_buf[2] = {reg | 0x80, value};
  41              		.loc 1 24 5 is_stmt 1 view .LVU2
  42              		.loc 1 24 13 is_stmt 0 view .LVU3
  43 0004 60F07F00 		orn	r0, r0, #127
  44              	.LVL1:
  45              		.loc 1 24 13 view .LVU4
  46 0008 8DF80400 		strb	r0, [sp, #4]
  47 000c 8DF80510 		strb	r1, [sp, #5]
  25:libs/camera/camera.c ****     CS_LOW(); // Assert CS
  48              		.loc 1 25 5 is_stmt 1 view .LVU5
  49 0010 094C     		ldr	r4, .L3
  50 0012 0022     		movs	r2, #0
  51 0014 1021     		movs	r1, #16
  52              	.LVL2:
  53              		.loc 1 25 5 is_stmt 0 view .LVU6
  54 0016 2046     		mov	r0, r4
  55 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL3:
  26:libs/camera/camera.c ****     HAL_SPI_Transmit(&hspi1, tx_buf, 2, HAL_MAX_DELAY);
  57              		.loc 1 26 5 is_stmt 1 view .LVU7
  58 001c 4FF0FF33 		mov	r3, #-1
  59 0020 0222     		movs	r2, #2
  60 0022 01A9     		add	r1, sp, #4
  61 0024 0548     		ldr	r0, .L3+4
  62 0026 FFF7FEFF 		bl	HAL_SPI_Transmit
  63              	.LVL4:
  27:libs/camera/camera.c ****     CS_HIGH();
  64              		.loc 1 27 5 view .LVU8
  65 002a 0122     		movs	r2, #1
  66 002c 1021     		movs	r1, #16
  67 002e 2046     		mov	r0, r4
  68 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
  69              	.LVL5:
  28:libs/camera/camera.c **** }
  70              		.loc 1 28 1 is_stmt 0 view .LVU9
  71 0034 02B0     		add	sp, sp, #8
  72              	.LCFI2:
  73              		.cfi_def_cfa_offset 8
  74              		@ sp needed
  75 0036 10BD     		pop	{r4, pc}
  76              	.L4:
  77              		.align	2
  78              	.L3:
  79 0038 00080140 		.word	1073809408
  80 003c 00000000 		.word	hspi1
  81              		.cfi_endproc
  82              	.LFE68:
  84              		.section	.text.arducam_read_register,"ax",%progbits
  85              		.align	1
  86              		.global	arducam_read_register
  87              		.syntax unified
  88              		.thumb
ARM GAS  /tmp/ccDAW1IQ.s 			page 3


  89              		.thumb_func
  90              		.fpu softvfp
  92              	arducam_read_register:
  93              	.LVL6:
  94              	.LFB69:
  29:libs/camera/camera.c **** 
  30:libs/camera/camera.c **** uint8_t arducam_read_register(uint8_t reg) {
  95              		.loc 1 30 44 is_stmt 1 view -0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 8
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  99              		.loc 1 30 44 is_stmt 0 view .LVU11
 100 0000 10B5     		push	{r4, lr}
 101              	.LCFI3:
 102              		.cfi_def_cfa_offset 8
 103              		.cfi_offset 4, -8
 104              		.cfi_offset 14, -4
 105 0002 84B0     		sub	sp, sp, #16
 106              	.LCFI4:
 107              		.cfi_def_cfa_offset 24
  31:libs/camera/camera.c ****     uint8_t tx_buf[2] = {reg & 0x7F, 0x00}; // Second byte is dummy
 108              		.loc 1 31 5 is_stmt 1 view .LVU12
 109              		.loc 1 31 30 is_stmt 0 view .LVU13
 110 0004 00F07F00 		and	r0, r0, #127
 111              	.LVL7:
 112              		.loc 1 31 13 view .LVU14
 113 0008 8DF80C00 		strb	r0, [sp, #12]
 114 000c 0022     		movs	r2, #0
 115 000e 8DF80D20 		strb	r2, [sp, #13]
  32:libs/camera/camera.c ****     uint8_t rx_buf[2];
 116              		.loc 1 32 5 is_stmt 1 view .LVU15
  33:libs/camera/camera.c ****     CS_LOW(); // Assert CS
 117              		.loc 1 33 5 view .LVU16
 118 0012 0B4C     		ldr	r4, .L7
 119 0014 1021     		movs	r1, #16
 120 0016 2046     		mov	r0, r4
 121 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 122              	.LVL8:
  34:libs/camera/camera.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_buf, rx_buf, 2, HAL_MAX_DELAY);
 123              		.loc 1 34 5 view .LVU17
 124 001c 4FF0FF33 		mov	r3, #-1
 125 0020 0093     		str	r3, [sp]
 126 0022 0223     		movs	r3, #2
 127 0024 02AA     		add	r2, sp, #8
 128 0026 03A9     		add	r1, sp, #12
 129 0028 0648     		ldr	r0, .L7+4
 130 002a FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 131              	.LVL9:
  35:libs/camera/camera.c ****     CS_HIGH(); // Assert CS
 132              		.loc 1 35 5 view .LVU18
 133 002e 0122     		movs	r2, #1
 134 0030 1021     		movs	r1, #16
 135 0032 2046     		mov	r0, r4
 136 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 137              	.LVL10:
  36:libs/camera/camera.c **** 
  37:libs/camera/camera.c ****     return rx_buf[1]; // Received data
ARM GAS  /tmp/ccDAW1IQ.s 			page 4


 138              		.loc 1 37 5 view .LVU19
  38:libs/camera/camera.c **** }
 139              		.loc 1 38 1 is_stmt 0 view .LVU20
 140 0038 9DF80900 		ldrb	r0, [sp, #9]	@ zero_extendqisi2
 141 003c 04B0     		add	sp, sp, #16
 142              	.LCFI5:
 143              		.cfi_def_cfa_offset 8
 144              		@ sp needed
 145 003e 10BD     		pop	{r4, pc}
 146              	.L8:
 147              		.align	2
 148              	.L7:
 149 0040 00080140 		.word	1073809408
 150 0044 00000000 		.word	hspi1
 151              		.cfi_endproc
 152              	.LFE69:
 154              		.section	.text.arducam_burst_read,"ax",%progbits
 155              		.align	1
 156              		.global	arducam_burst_read
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu softvfp
 162              	arducam_burst_read:
 163              	.LVL11:
 164              	.LFB70:
  39:libs/camera/camera.c **** 
  40:libs/camera/camera.c **** 
  41:libs/camera/camera.c **** 
  42:libs/camera/camera.c **** // // Burst read from FIFO
  43:libs/camera/camera.c **** // uint32_t arducam_burst_read(uint8_t *buf, uint32_t max_len) {
  44:libs/camera/camera.c **** //     uint8_t burst_cmd = 0x3C; // Burst read register
  45:libs/camera/camera.c **** //     CS_LOW();
  46:libs/camera/camera.c **** //     HAL_SPI_Transmit(&hspi1, &burst_cmd, 1, HAL_MAX_DELAY);
  47:libs/camera/camera.c **** //     uint8_t dummy = 0x00;
  48:libs/camera/camera.c **** //     HAL_SPI_Transmit(&hspi1, &dummy, 1, HAL_MAX_DELAY); // First dummy byte
  49:libs/camera/camera.c **** 
  50:libs/camera/camera.c **** //     HAL_SPI_Receive(&hspi1, buf, max_len, HAL_MAX_DELAY);
  51:libs/camera/camera.c **** //     CS_HIGH();
  52:libs/camera/camera.c **** //     return max_len;
  53:libs/camera/camera.c **** // }
  54:libs/camera/camera.c **** 
  55:libs/camera/camera.c **** 
  56:libs/camera/camera.c **** // Safer burst read from FIFO
  57:libs/camera/camera.c **** uint32_t arducam_burst_read(uint8_t *buf, uint32_t max_len) {
 165              		.loc 1 57 61 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 8
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		.loc 1 57 61 is_stmt 0 view .LVU22
 170 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 171              	.LCFI6:
 172              		.cfi_def_cfa_offset 20
 173              		.cfi_offset 4, -20
 174              		.cfi_offset 5, -16
 175              		.cfi_offset 6, -12
 176              		.cfi_offset 7, -8
ARM GAS  /tmp/ccDAW1IQ.s 			page 5


 177              		.cfi_offset 14, -4
 178 0002 85B0     		sub	sp, sp, #20
 179              	.LCFI7:
 180              		.cfi_def_cfa_offset 40
 181 0004 0646     		mov	r6, r0
 182 0006 0D46     		mov	r5, r1
  58:libs/camera/camera.c ****     uint8_t burst_cmd = 0x3C;
 183              		.loc 1 58 5 is_stmt 1 view .LVU23
 184              		.loc 1 58 13 is_stmt 0 view .LVU24
 185 0008 3C23     		movs	r3, #60
 186 000a 8DF80F30 		strb	r3, [sp, #15]
  59:libs/camera/camera.c ****     CS_LOW();
 187              		.loc 1 59 5 is_stmt 1 view .LVU25
 188 000e 0022     		movs	r2, #0
 189 0010 1021     		movs	r1, #16
 190              	.LVL12:
 191              		.loc 1 59 5 is_stmt 0 view .LVU26
 192 0012 1F48     		ldr	r0, .L16
 193              	.LVL13:
 194              		.loc 1 59 5 view .LVU27
 195 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 196              	.LVL14:
  60:libs/camera/camera.c ****     HAL_SPI_Transmit(&hspi1, &burst_cmd, 1, HAL_MAX_DELAY);
 197              		.loc 1 60 5 is_stmt 1 view .LVU28
 198 0018 1E4F     		ldr	r7, .L16+4
 199 001a 4FF0FF33 		mov	r3, #-1
 200 001e 0122     		movs	r2, #1
 201 0020 0DF10F01 		add	r1, sp, #15
 202 0024 3846     		mov	r0, r7
 203 0026 FFF7FEFF 		bl	HAL_SPI_Transmit
 204              	.LVL15:
  61:libs/camera/camera.c **** 
  62:libs/camera/camera.c ****     uint8_t dummy = 0x00;
 205              		.loc 1 62 5 view .LVU29
 206              		.loc 1 62 13 is_stmt 0 view .LVU30
 207 002a 0024     		movs	r4, #0
 208 002c 8DF80E40 		strb	r4, [sp, #14]
  63:libs/camera/camera.c ****     HAL_SPI_Transmit(&hspi1, &dummy, 1, HAL_MAX_DELAY);
 209              		.loc 1 63 5 is_stmt 1 view .LVU31
 210 0030 4FF0FF33 		mov	r3, #-1
 211 0034 0122     		movs	r2, #1
 212 0036 0DF10E01 		add	r1, sp, #14
 213 003a 3846     		mov	r0, r7
 214 003c FFF7FEFF 		bl	HAL_SPI_Transmit
 215              	.LVL16:
  64:libs/camera/camera.c **** 
  65:libs/camera/camera.c ****     for (uint32_t i = 0; i < max_len; i++) {
 216              		.loc 1 65 5 view .LVU32
 217              	.LBB2:
 218              		.loc 1 65 10 view .LVU33
 219              		.loc 1 65 5 is_stmt 0 view .LVU34
 220 0040 03E0     		b	.L10
 221              	.LVL17:
 222              	.L11:
 223              	.LBB3:
  66:libs/camera/camera.c ****         uint8_t tx = 0x00;
  67:libs/camera/camera.c ****         uint8_t rx = 0x00;
ARM GAS  /tmp/ccDAW1IQ.s 			page 6


  68:libs/camera/camera.c ****         if (HAL_SPI_TransmitReceive(&hspi1, &tx, &rx, 1, HAL_MAX_DELAY) != HAL_OK) {
  69:libs/camera/camera.c ****             CS_HIGH();
  70:libs/camera/camera.c ****             return i;
  71:libs/camera/camera.c ****         }
  72:libs/camera/camera.c ****         buf[i] = rx;
 224              		.loc 1 72 9 is_stmt 1 view .LVU35
 225              		.loc 1 72 16 is_stmt 0 view .LVU36
 226 0042 9DF80D30 		ldrb	r3, [sp, #13]	@ zero_extendqisi2
 227 0046 3355     		strb	r3, [r6, r4]
 228              	.LBE3:
  65:libs/camera/camera.c ****         uint8_t tx = 0x00;
 229              		.loc 1 65 39 is_stmt 1 view .LVU37
  65:libs/camera/camera.c ****         uint8_t tx = 0x00;
 230              		.loc 1 65 40 is_stmt 0 view .LVU38
 231 0048 0134     		adds	r4, r4, #1
 232              	.LVL18:
 233              	.L10:
  65:libs/camera/camera.c ****         uint8_t tx = 0x00;
 234              		.loc 1 65 26 is_stmt 1 discriminator 1 view .LVU39
  65:libs/camera/camera.c ****         uint8_t tx = 0x00;
 235              		.loc 1 65 5 is_stmt 0 discriminator 1 view .LVU40
 236 004a AC42     		cmp	r4, r5
 237 004c 16D2     		bcs	.L15
 238              	.LBB4:
  66:libs/camera/camera.c ****         uint8_t tx = 0x00;
 239              		.loc 1 66 9 is_stmt 1 view .LVU41
  66:libs/camera/camera.c ****         uint8_t tx = 0x00;
 240              		.loc 1 66 17 is_stmt 0 view .LVU42
 241 004e 0023     		movs	r3, #0
 242 0050 8DF80C30 		strb	r3, [sp, #12]
  67:libs/camera/camera.c ****         if (HAL_SPI_TransmitReceive(&hspi1, &tx, &rx, 1, HAL_MAX_DELAY) != HAL_OK) {
 243              		.loc 1 67 9 is_stmt 1 view .LVU43
  67:libs/camera/camera.c ****         if (HAL_SPI_TransmitReceive(&hspi1, &tx, &rx, 1, HAL_MAX_DELAY) != HAL_OK) {
 244              		.loc 1 67 17 is_stmt 0 view .LVU44
 245 0054 8DF80D30 		strb	r3, [sp, #13]
  68:libs/camera/camera.c ****             CS_HIGH();
 246              		.loc 1 68 9 is_stmt 1 view .LVU45
  68:libs/camera/camera.c ****             CS_HIGH();
 247              		.loc 1 68 13 is_stmt 0 view .LVU46
 248 0058 4FF0FF33 		mov	r3, #-1
 249 005c 0093     		str	r3, [sp]
 250 005e 0123     		movs	r3, #1
 251 0060 0DF10D02 		add	r2, sp, #13
 252 0064 03A9     		add	r1, sp, #12
 253 0066 0B48     		ldr	r0, .L16+4
 254 0068 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 255              	.LVL19:
  68:libs/camera/camera.c ****             CS_HIGH();
 256              		.loc 1 68 12 view .LVU47
 257 006c 0028     		cmp	r0, #0
 258 006e E8D0     		beq	.L11
  69:libs/camera/camera.c ****             return i;
 259              		.loc 1 69 13 is_stmt 1 view .LVU48
 260 0070 0122     		movs	r2, #1
 261 0072 1021     		movs	r1, #16
 262 0074 0648     		ldr	r0, .L16
 263 0076 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  /tmp/ccDAW1IQ.s 			page 7


 264              	.LVL20:
  70:libs/camera/camera.c ****         }
 265              		.loc 1 70 13 view .LVU49
 266 007a 05E0     		b	.L9
 267              	.L15:
 268              	.LBE4:
 269              	.LBE2:
  73:libs/camera/camera.c ****     }
  74:libs/camera/camera.c ****     CS_HIGH();
 270              		.loc 1 74 5 view .LVU50
 271 007c 0122     		movs	r2, #1
 272 007e 1021     		movs	r1, #16
 273 0080 0348     		ldr	r0, .L16
 274 0082 FFF7FEFF 		bl	HAL_GPIO_WritePin
 275              	.LVL21:
  75:libs/camera/camera.c ****     return max_len;
 276              		.loc 1 75 5 view .LVU51
 277              		.loc 1 75 12 is_stmt 0 view .LVU52
 278 0086 2C46     		mov	r4, r5
 279              	.LVL22:
 280              	.L9:
  76:libs/camera/camera.c **** }
 281              		.loc 1 76 1 view .LVU53
 282 0088 2046     		mov	r0, r4
 283 008a 05B0     		add	sp, sp, #20
 284              	.LCFI8:
 285              		.cfi_def_cfa_offset 20
 286              		@ sp needed
 287 008c F0BD     		pop	{r4, r5, r6, r7, pc}
 288              	.LVL23:
 289              	.L17:
 290              		.loc 1 76 1 view .LVU54
 291 008e 00BF     		.align	2
 292              	.L16:
 293 0090 00080140 		.word	1073809408
 294 0094 00000000 		.word	hspi1
 295              		.cfi_endproc
 296              	.LFE70:
 298              		.section	.text.camersSetBrightness,"ax",%progbits
 299              		.align	1
 300              		.global	camersSetBrightness
 301              		.syntax unified
 302              		.thumb
 303              		.thumb_func
 304              		.fpu softvfp
 306              	camersSetBrightness:
 307              	.LVL24:
 308              	.LFB71:
  77:libs/camera/camera.c **** 
  78:libs/camera/camera.c **** void camersSetBrightness(CAM_BRIGHTNESS_LEVEL level )
  79:libs/camera/camera.c **** {
 309              		.loc 1 79 1 is_stmt 1 view -0
 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 0
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 313              		.loc 1 79 1 is_stmt 0 view .LVU56
 314 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/ccDAW1IQ.s 			page 8


 315              	.LCFI9:
 316              		.cfi_def_cfa_offset 8
 317              		.cfi_offset 3, -8
 318              		.cfi_offset 14, -4
 319 0002 0146     		mov	r1, r0
  80:libs/camera/camera.c ****   arducam_write_register(0x22,level);
 320              		.loc 1 80 3 is_stmt 1 view .LVU57
 321 0004 2220     		movs	r0, #34
 322              	.LVL25:
 323              		.loc 1 80 3 is_stmt 0 view .LVU58
 324 0006 FFF7FEFF 		bl	arducam_write_register
 325              	.LVL26:
  81:libs/camera/camera.c **** }
 326              		.loc 1 81 1 view .LVU59
 327 000a 08BD     		pop	{r3, pc}
 328              		.cfi_endproc
 329              	.LFE71:
 331              		.section	.text.cameraSetSharpness,"ax",%progbits
 332              		.align	1
 333              		.global	cameraSetSharpness
 334              		.syntax unified
 335              		.thumb
 336              		.thumb_func
 337              		.fpu softvfp
 339              	cameraSetSharpness:
 340              	.LVL27:
 341              	.LFB72:
  82:libs/camera/camera.c **** 
  83:libs/camera/camera.c **** void cameraSetSharpness(CAM_SHARPNESS_LEVEL level)
  84:libs/camera/camera.c **** {
 342              		.loc 1 84 1 is_stmt 1 view -0
 343              		.cfi_startproc
 344              		@ args = 0, pretend = 0, frame = 0
 345              		@ frame_needed = 0, uses_anonymous_args = 0
 346              		.loc 1 84 1 is_stmt 0 view .LVU61
 347 0000 08B5     		push	{r3, lr}
 348              	.LCFI10:
 349              		.cfi_def_cfa_offset 8
 350              		.cfi_offset 3, -8
 351              		.cfi_offset 14, -4
 352 0002 0146     		mov	r1, r0
  85:libs/camera/camera.c ****   arducam_write_register(0x28,level);
 353              		.loc 1 85 3 is_stmt 1 view .LVU62
 354 0004 2820     		movs	r0, #40
 355              	.LVL28:
 356              		.loc 1 85 3 is_stmt 0 view .LVU63
 357 0006 FFF7FEFF 		bl	arducam_write_register
 358              	.LVL29:
  86:libs/camera/camera.c **** 
  87:libs/camera/camera.c **** }
 359              		.loc 1 87 1 view .LVU64
 360 000a 08BD     		pop	{r3, pc}
 361              		.cfi_endproc
 362              	.LFE72:
 364              		.section	.text.cameraSetContrast,"ax",%progbits
 365              		.align	1
 366              		.global	cameraSetContrast
ARM GAS  /tmp/ccDAW1IQ.s 			page 9


 367              		.syntax unified
 368              		.thumb
 369              		.thumb_func
 370              		.fpu softvfp
 372              	cameraSetContrast:
 373              	.LVL30:
 374              	.LFB73:
  88:libs/camera/camera.c **** 
  89:libs/camera/camera.c **** void cameraSetContrast (CAM_CONTRAST_LEVEL level)
  90:libs/camera/camera.c **** {
 375              		.loc 1 90 1 is_stmt 1 view -0
 376              		.cfi_startproc
 377              		@ args = 0, pretend = 0, frame = 0
 378              		@ frame_needed = 0, uses_anonymous_args = 0
 379              		.loc 1 90 1 is_stmt 0 view .LVU66
 380 0000 08B5     		push	{r3, lr}
 381              	.LCFI11:
 382              		.cfi_def_cfa_offset 8
 383              		.cfi_offset 3, -8
 384              		.cfi_offset 14, -4
 385 0002 0146     		mov	r1, r0
  91:libs/camera/camera.c ****   arducam_write_register(0x23,level);
 386              		.loc 1 91 3 is_stmt 1 view .LVU67
 387 0004 2320     		movs	r0, #35
 388              	.LVL31:
 389              		.loc 1 91 3 is_stmt 0 view .LVU68
 390 0006 FFF7FEFF 		bl	arducam_write_register
 391              	.LVL32:
  92:libs/camera/camera.c **** }
 392              		.loc 1 92 1 view .LVU69
 393 000a 08BD     		pop	{r3, pc}
 394              		.cfi_endproc
 395              	.LFE73:
 397              		.section	.text.cameraSetEV,"ax",%progbits
 398              		.align	1
 399              		.global	cameraSetEV
 400              		.syntax unified
 401              		.thumb
 402              		.thumb_func
 403              		.fpu softvfp
 405              	cameraSetEV:
 406              	.LVL33:
 407              	.LFB74:
  93:libs/camera/camera.c **** 
  94:libs/camera/camera.c **** void cameraSetEV (CAM_EV_LEVEL level)
  95:libs/camera/camera.c **** {
 408              		.loc 1 95 1 is_stmt 1 view -0
 409              		.cfi_startproc
 410              		@ args = 0, pretend = 0, frame = 0
 411              		@ frame_needed = 0, uses_anonymous_args = 0
 412              		.loc 1 95 1 is_stmt 0 view .LVU71
 413 0000 08B5     		push	{r3, lr}
 414              	.LCFI12:
 415              		.cfi_def_cfa_offset 8
 416              		.cfi_offset 3, -8
 417              		.cfi_offset 14, -4
 418 0002 0146     		mov	r1, r0
ARM GAS  /tmp/ccDAW1IQ.s 			page 10


  96:libs/camera/camera.c ****   arducam_write_register(0x25,level);
 419              		.loc 1 96 3 is_stmt 1 view .LVU72
 420 0004 2520     		movs	r0, #37
 421              	.LVL34:
 422              		.loc 1 96 3 is_stmt 0 view .LVU73
 423 0006 FFF7FEFF 		bl	arducam_write_register
 424              	.LVL35:
  97:libs/camera/camera.c **** 
  98:libs/camera/camera.c **** }
 425              		.loc 1 98 1 view .LVU74
 426 000a 08BD     		pop	{r3, pc}
 427              		.cfi_endproc
 428              	.LFE74:
 430              		.section	.text.cameraSetSaturation,"ax",%progbits
 431              		.align	1
 432              		.global	cameraSetSaturation
 433              		.syntax unified
 434              		.thumb
 435              		.thumb_func
 436              		.fpu softvfp
 438              	cameraSetSaturation:
 439              	.LVL36:
 440              	.LFB75:
  99:libs/camera/camera.c **** 
 100:libs/camera/camera.c **** void cameraSetSaturation (CAM_STAURATION_LEVEL level)
 101:libs/camera/camera.c **** {
 441              		.loc 1 101 1 is_stmt 1 view -0
 442              		.cfi_startproc
 443              		@ args = 0, pretend = 0, frame = 0
 444              		@ frame_needed = 0, uses_anonymous_args = 0
 445              		.loc 1 101 1 is_stmt 0 view .LVU76
 446 0000 08B5     		push	{r3, lr}
 447              	.LCFI13:
 448              		.cfi_def_cfa_offset 8
 449              		.cfi_offset 3, -8
 450              		.cfi_offset 14, -4
 451 0002 0146     		mov	r1, r0
 102:libs/camera/camera.c ****   arducam_write_register(0x24,level);
 452              		.loc 1 102 3 is_stmt 1 view .LVU77
 453 0004 2420     		movs	r0, #36
 454              	.LVL37:
 455              		.loc 1 102 3 is_stmt 0 view .LVU78
 456 0006 FFF7FEFF 		bl	arducam_write_register
 457              	.LVL38:
 103:libs/camera/camera.c **** 
 104:libs/camera/camera.c **** }
 458              		.loc 1 104 1 view .LVU79
 459 000a 08BD     		pop	{r3, pc}
 460              		.cfi_endproc
 461              	.LFE75:
 463              		.section	.text.cameraSetColorEffect,"ax",%progbits
 464              		.align	1
 465              		.global	cameraSetColorEffect
 466              		.syntax unified
 467              		.thumb
 468              		.thumb_func
 469              		.fpu softvfp
ARM GAS  /tmp/ccDAW1IQ.s 			page 11


 471              	cameraSetColorEffect:
 472              	.LVL39:
 473              	.LFB76:
 105:libs/camera/camera.c **** 
 106:libs/camera/camera.c **** void cameraSetColorEffect (CAM_COLOR_FX effect)
 107:libs/camera/camera.c **** {
 474              		.loc 1 107 1 is_stmt 1 view -0
 475              		.cfi_startproc
 476              		@ args = 0, pretend = 0, frame = 0
 477              		@ frame_needed = 0, uses_anonymous_args = 0
 478              		.loc 1 107 1 is_stmt 0 view .LVU81
 479 0000 08B5     		push	{r3, lr}
 480              	.LCFI14:
 481              		.cfi_def_cfa_offset 8
 482              		.cfi_offset 3, -8
 483              		.cfi_offset 14, -4
 484 0002 0146     		mov	r1, r0
 108:libs/camera/camera.c ****   arducam_write_register(0x27,effect);
 485              		.loc 1 108 3 is_stmt 1 view .LVU82
 486 0004 2720     		movs	r0, #39
 487              	.LVL40:
 488              		.loc 1 108 3 is_stmt 0 view .LVU83
 489 0006 FFF7FEFF 		bl	arducam_write_register
 490              	.LVL41:
 109:libs/camera/camera.c **** 
 110:libs/camera/camera.c **** }
 491              		.loc 1 110 1 view .LVU84
 492 000a 08BD     		pop	{r3, pc}
 493              		.cfi_endproc
 494              	.LFE76:
 496              		.section	.rodata.arducam_set_jpeg_mode.str1.4,"aMS",%progbits,1
 497              		.align	2
 498              	.LC0:
 499 0000 62726967 		.ascii	"brighness level:%i \012\000"
 499      686E6573 
 499      73206C65 
 499      76656C3A 
 499      2569200A 
 500 0015 000000   		.align	2
 501              	.LC1:
 502 0018 73617475 		.ascii	"saturation level:%i \012\000"
 502      72617469 
 502      6F6E206C 
 502      6576656C 
 502      3A256920 
 503 002e 0000     		.align	2
 504              	.LC2:
 505 0030 6578706F 		.ascii	"exposure level:%i \012\000"
 505      73757265 
 505      206C6576 
 505      656C3A25 
 505      69200A00 
 506              		.align	2
 507              	.LC3:
 508 0044 636F6E74 		.ascii	"contrast level:%i \012\000"
 508      72617374 
 508      206C6576 
ARM GAS  /tmp/ccDAW1IQ.s 			page 12


 508      656C3A25 
 508      69200A00 
 509              		.align	2
 510              	.LC4:
 511 0058 73686172 		.ascii	"sharpness level:%i \012\000"
 511      706E6573 
 511      73206C65 
 511      76656C3A 
 511      2569200A 
 512 006d 000000   		.align	2
 513              	.LC5:
 514 0070 65666665 		.ascii	"effect:%i \012\000"
 514      63743A25 
 514      69200A00 
 515              		.section	.text.arducam_set_jpeg_mode,"ax",%progbits
 516              		.align	1
 517              		.global	arducam_set_jpeg_mode
 518              		.syntax unified
 519              		.thumb
 520              		.thumb_func
 521              		.fpu softvfp
 523              	arducam_set_jpeg_mode:
 524              	.LFB77:
 111:libs/camera/camera.c **** 
 112:libs/camera/camera.c **** void arducam_set_jpeg_mode() {
 525              		.loc 1 112 30 is_stmt 1 view -0
 526              		.cfi_startproc
 527              		@ args = 0, pretend = 0, frame = 0
 528              		@ frame_needed = 0, uses_anonymous_args = 0
 529 0000 10B5     		push	{r4, lr}
 530              	.LCFI15:
 531              		.cfi_def_cfa_offset 8
 532              		.cfi_offset 4, -8
 533              		.cfi_offset 14, -4
 113:libs/camera/camera.c ****     // Write JPEG basic configuration to register 0x20
 114:libs/camera/camera.c ****     arducam_write_register(0x20, 0x01);  // JPEG mode
 534              		.loc 1 114 5 view .LVU86
 535 0002 0121     		movs	r1, #1
 536 0004 2020     		movs	r0, #32
 537 0006 FFF7FEFF 		bl	arducam_write_register
 538              	.LVL42:
 115:libs/camera/camera.c ****     HAL_Delay(10);  // Small delay for settings to apply
 539              		.loc 1 115 5 view .LVU87
 540 000a 0A20     		movs	r0, #10
 541 000c FFF7FEFF 		bl	HAL_Delay
 542              	.LVL43:
 116:libs/camera/camera.c **** 
 117:libs/camera/camera.c ****      // 2. Set resolution to 128x128
 118:libs/camera/camera.c ****     arducam_write_register(0x21, cam_size);  // Resolution = 128x128
 543              		.loc 1 118 5 view .LVU88
 544 0010 254B     		ldr	r3, .L32
 545 0012 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 546 0014 2120     		movs	r0, #33
 547 0016 FFF7FEFF 		bl	arducam_write_register
 548              	.LVL44:
 119:libs/camera/camera.c ****     HAL_Delay(10);
 549              		.loc 1 119 5 view .LVU89
ARM GAS  /tmp/ccDAW1IQ.s 			page 13


 550 001a 0A20     		movs	r0, #10
 551 001c FFF7FEFF 		bl	HAL_Delay
 552              	.LVL45:
 120:libs/camera/camera.c **** 
 121:libs/camera/camera.c ****     camersSetBrightness(lvl);
 553              		.loc 1 121 5 view .LVU90
 554 0020 224C     		ldr	r4, .L32+4
 555 0022 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 556 0024 FFF7FEFF 		bl	camersSetBrightness
 557              	.LVL46:
 122:libs/camera/camera.c ****     printf("brighness level:%i \n" ,lvl);
 558              		.loc 1 122 5 view .LVU91
 559 0028 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 560 002a 2148     		ldr	r0, .L32+8
 561 002c FFF7FEFF 		bl	printf
 562              	.LVL47:
 123:libs/camera/camera.c ****     HAL_Delay(10);
 563              		.loc 1 123 5 view .LVU92
 564 0030 0A20     		movs	r0, #10
 565 0032 FFF7FEFF 		bl	HAL_Delay
 566              	.LVL48:
 124:libs/camera/camera.c **** 
 125:libs/camera/camera.c ****     cameraSetSaturation(saturation_lvl);
 567              		.loc 1 125 5 view .LVU93
 568 0036 1F4C     		ldr	r4, .L32+12
 569 0038 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 570 003a FFF7FEFF 		bl	cameraSetSaturation
 571              	.LVL49:
 126:libs/camera/camera.c ****     printf("saturation level:%i \n" ,saturation_lvl);
 572              		.loc 1 126 5 view .LVU94
 573 003e 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 574 0040 1D48     		ldr	r0, .L32+16
 575 0042 FFF7FEFF 		bl	printf
 576              	.LVL50:
 127:libs/camera/camera.c **** 
 128:libs/camera/camera.c ****     HAL_Delay(10);
 577              		.loc 1 128 5 view .LVU95
 578 0046 0A20     		movs	r0, #10
 579 0048 FFF7FEFF 		bl	HAL_Delay
 580              	.LVL51:
 129:libs/camera/camera.c **** 
 130:libs/camera/camera.c ****     cameraSetEV(exposure_lvl);
 581              		.loc 1 130 5 view .LVU96
 582 004c 1B4C     		ldr	r4, .L32+20
 583 004e 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 584 0050 FFF7FEFF 		bl	cameraSetEV
 585              	.LVL52:
 131:libs/camera/camera.c ****     printf("exposure level:%i \n" ,exposure_lvl);
 586              		.loc 1 131 5 view .LVU97
 587 0054 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 588 0056 1A48     		ldr	r0, .L32+24
 589 0058 FFF7FEFF 		bl	printf
 590              	.LVL53:
 132:libs/camera/camera.c **** 
 133:libs/camera/camera.c ****     HAL_Delay(10);
 591              		.loc 1 133 5 view .LVU98
 592 005c 0A20     		movs	r0, #10
ARM GAS  /tmp/ccDAW1IQ.s 			page 14


 593 005e FFF7FEFF 		bl	HAL_Delay
 594              	.LVL54:
 134:libs/camera/camera.c **** 
 135:libs/camera/camera.c ****     cameraSetContrast(contra_lvl);
 595              		.loc 1 135 5 view .LVU99
 596 0062 184C     		ldr	r4, .L32+28
 597 0064 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 598 0066 FFF7FEFF 		bl	cameraSetContrast
 599              	.LVL55:
 136:libs/camera/camera.c ****     printf("contrast level:%i \n" ,contra_lvl);
 600              		.loc 1 136 5 view .LVU100
 601 006a 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 602 006c 1648     		ldr	r0, .L32+32
 603 006e FFF7FEFF 		bl	printf
 604              	.LVL56:
 137:libs/camera/camera.c **** 
 138:libs/camera/camera.c ****     HAL_Delay(10);
 605              		.loc 1 138 5 view .LVU101
 606 0072 0A20     		movs	r0, #10
 607 0074 FFF7FEFF 		bl	HAL_Delay
 608              	.LVL57:
 139:libs/camera/camera.c **** 
 140:libs/camera/camera.c ****     cameraSetSharpness(shrp_lvl);
 609              		.loc 1 140 5 view .LVU102
 610 0078 144C     		ldr	r4, .L32+36
 611 007a 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 612 007c FFF7FEFF 		bl	cameraSetSharpness
 613              	.LVL58:
 141:libs/camera/camera.c ****     printf("sharpness level:%i \n" ,shrp_lvl);
 614              		.loc 1 141 5 view .LVU103
 615 0080 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 616 0082 1348     		ldr	r0, .L32+40
 617 0084 FFF7FEFF 		bl	printf
 618              	.LVL59:
 142:libs/camera/camera.c **** 
 143:libs/camera/camera.c ****     HAL_Delay(10);
 619              		.loc 1 143 5 view .LVU104
 620 0088 0A20     		movs	r0, #10
 621 008a FFF7FEFF 		bl	HAL_Delay
 622              	.LVL60:
 144:libs/camera/camera.c **** 
 145:libs/camera/camera.c ****     cameraSetColorEffect(effect);
 623              		.loc 1 145 5 view .LVU105
 624 008e 114C     		ldr	r4, .L32+44
 625 0090 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 626 0092 FFF7FEFF 		bl	cameraSetColorEffect
 627              	.LVL61:
 146:libs/camera/camera.c ****     printf("effect:%i \n" ,effect);
 628              		.loc 1 146 5 view .LVU106
 629 0096 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 630 0098 0F48     		ldr	r0, .L32+48
 631 009a FFF7FEFF 		bl	printf
 632              	.LVL62:
 147:libs/camera/camera.c ****     HAL_Delay(10);
 633              		.loc 1 147 5 view .LVU107
 634 009e 0A20     		movs	r0, #10
 635 00a0 FFF7FEFF 		bl	HAL_Delay
ARM GAS  /tmp/ccDAW1IQ.s 			page 15


 636              	.LVL63:
 148:libs/camera/camera.c **** 
 149:libs/camera/camera.c **** }
 637              		.loc 1 149 1 is_stmt 0 view .LVU108
 638 00a4 10BD     		pop	{r4, pc}
 639              	.L33:
 640 00a6 00BF     		.align	2
 641              	.L32:
 642 00a8 00000000 		.word	cam_size
 643 00ac 00000000 		.word	lvl
 644 00b0 00000000 		.word	.LC0
 645 00b4 00000000 		.word	saturation_lvl
 646 00b8 18000000 		.word	.LC1
 647 00bc 00000000 		.word	exposure_lvl
 648 00c0 30000000 		.word	.LC2
 649 00c4 00000000 		.word	contra_lvl
 650 00c8 44000000 		.word	.LC3
 651 00cc 00000000 		.word	shrp_lvl
 652 00d0 58000000 		.word	.LC4
 653 00d4 00000000 		.word	effect
 654 00d8 70000000 		.word	.LC5
 655              		.cfi_endproc
 656              	.LFE77:
 658              		.section	.text.arducam_capture_image,"ax",%progbits
 659              		.align	1
 660              		.global	arducam_capture_image
 661              		.syntax unified
 662              		.thumb
 663              		.thumb_func
 664              		.fpu softvfp
 666              	arducam_capture_image:
 667              	.LFB78:
 150:libs/camera/camera.c **** 
 151:libs/camera/camera.c **** 
 152:libs/camera/camera.c **** // Capture image
 153:libs/camera/camera.c **** void arducam_capture_image() {
 668              		.loc 1 153 30 is_stmt 1 view -0
 669              		.cfi_startproc
 670              		@ args = 0, pretend = 0, frame = 0
 671              		@ frame_needed = 0, uses_anonymous_args = 0
 672 0000 08B5     		push	{r3, lr}
 673              	.LCFI16:
 674              		.cfi_def_cfa_offset 8
 675              		.cfi_offset 3, -8
 676              		.cfi_offset 14, -4
 154:libs/camera/camera.c ****     // 1. Clear FIFO write done flag
 155:libs/camera/camera.c ****     arducam_write_register(0x04, 0x01);
 677              		.loc 1 155 5 view .LVU110
 678 0002 0121     		movs	r1, #1
 679 0004 0420     		movs	r0, #4
 680 0006 FFF7FEFF 		bl	arducam_write_register
 681              	.LVL64:
 156:libs/camera/camera.c ****     HAL_Delay(10);
 682              		.loc 1 156 5 view .LVU111
 683 000a 0A20     		movs	r0, #10
 684 000c FFF7FEFF 		bl	HAL_Delay
 685              	.LVL65:
ARM GAS  /tmp/ccDAW1IQ.s 			page 16


 157:libs/camera/camera.c **** 
 158:libs/camera/camera.c ****     // 2. Start image capture
 159:libs/camera/camera.c ****     arducam_write_register(0x04, 0x02);
 686              		.loc 1 159 5 view .LVU112
 687 0010 0221     		movs	r1, #2
 688 0012 0420     		movs	r0, #4
 689 0014 FFF7FEFF 		bl	arducam_write_register
 690              	.LVL66:
 160:libs/camera/camera.c ****     HAL_Delay(200);  // Adjust delay as needed
 691              		.loc 1 160 5 view .LVU113
 692 0018 C820     		movs	r0, #200
 693 001a FFF7FEFF 		bl	HAL_Delay
 694              	.LVL67:
 161:libs/camera/camera.c **** 
 162:libs/camera/camera.c ****     // Optional: Wait until FIFO done (polling or timeout)
 163:libs/camera/camera.c ****     // If camera sets flag in 0x01 (frames written), you could poll here
 164:libs/camera/camera.c **** }
 695              		.loc 1 164 1 is_stmt 0 view .LVU114
 696 001e 08BD     		pop	{r3, pc}
 697              		.cfi_endproc
 698              	.LFE78:
 700              		.section	.rodata.find_jpeg.str1.4,"aMS",%progbits,1
 701              		.align	2
 702              	.LC6:
 703 0000 4A504547 		.ascii	"JPEG found: start=%d, end=%d\012\000"
 703      20666F75 
 703      6E643A20 
 703      73746172 
 703      743D2564 
 704              		.section	.text.find_jpeg,"ax",%progbits
 705              		.align	1
 706              		.global	find_jpeg
 707              		.syntax unified
 708              		.thumb
 709              		.thumb_func
 710              		.fpu softvfp
 712              	find_jpeg:
 713              	.LVL68:
 714              	.LFB79:
 165:libs/camera/camera.c **** 
 166:libs/camera/camera.c **** 
 167:libs/camera/camera.c **** uint32_t find_jpeg( uint32_t bytes_read,  uint8_t image_buffer[MAX_IMAGE_SIZE])    
 168:libs/camera/camera.c **** {
 715              		.loc 1 168 1 is_stmt 1 view -0
 716              		.cfi_startproc
 717              		@ args = 0, pretend = 0, frame = 0
 718              		@ frame_needed = 0, uses_anonymous_args = 0
 719              		.loc 1 168 1 is_stmt 0 view .LVU116
 720 0000 38B5     		push	{r3, r4, r5, lr}
 721              	.LCFI17:
 722              		.cfi_def_cfa_offset 16
 723              		.cfi_offset 3, -16
 724              		.cfi_offset 4, -12
 725              		.cfi_offset 5, -8
 726              		.cfi_offset 14, -4
 169:libs/camera/camera.c ****     // Find JPEG start (0xFFD8) and end (0xFFD9)
 170:libs/camera/camera.c ****     uint32_t jpeg_length=0;
ARM GAS  /tmp/ccDAW1IQ.s 			page 17


 727              		.loc 1 170 5 is_stmt 1 view .LVU117
 728              	.LVL69:
 171:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 729              		.loc 1 171 5 view .LVU118
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 730              		.loc 1 172 5 view .LVU119
 731              	.LBB5:
 732              		.loc 1 172 10 view .LVU120
 733              		.loc 1 172 19 is_stmt 0 view .LVU121
 734 0002 0023     		movs	r3, #0
 735              	.LBE5:
 171:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 736              		.loc 1 171 9 view .LVU122
 737 0004 4FF0FF35 		mov	r5, #-1
 738              	.LBB6:
 739              		.loc 1 172 5 view .LVU123
 740 0008 02E0     		b	.L37
 741              	.LVL70:
 742              	.L38:
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 174:libs/camera/camera.c ****             start_index = i;
 175:libs/camera/camera.c ****         }
 176:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD9) {
 743              		.loc 1 176 9 is_stmt 1 view .LVU124
 744              		.loc 1 176 12 is_stmt 0 view .LVU125
 745 000a FF2A     		cmp	r2, #255
 746 000c 0FD0     		beq	.L47
 747              	.L39:
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 748              		.loc 1 172 46 is_stmt 1 discriminator 2 view .LVU126
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 749              		.loc 1 172 47 is_stmt 0 discriminator 2 view .LVU127
 750 000e 0133     		adds	r3, r3, #1
 751              	.LVL71:
 752              	.L37:
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 753              		.loc 1 172 26 is_stmt 1 discriminator 1 view .LVU128
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 754              		.loc 1 172 41 is_stmt 0 discriminator 1 view .LVU129
 755 0010 421E     		subs	r2, r0, #1
 172:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 756              		.loc 1 172 5 discriminator 1 view .LVU130
 757 0012 9A42     		cmp	r2, r3
 758 0014 11D9     		bls	.L48
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 759              		.loc 1 173 9 is_stmt 1 view .LVU131
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 760              		.loc 1 173 25 is_stmt 0 view .LVU132
 761 0016 CA5C     		ldrb	r2, [r1, r3]	@ zero_extendqisi2
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 762              		.loc 1 173 12 view .LVU133
 763 0018 FF2A     		cmp	r2, #255
 764 001a F6D1     		bne	.L38
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 765              		.loc 1 173 52 discriminator 1 view .LVU134
 766 001c CC18     		adds	r4, r1, r3
 767 001e 6478     		ldrb	r4, [r4, #1]	@ zero_extendqisi2
ARM GAS  /tmp/ccDAW1IQ.s 			page 18


 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 768              		.loc 1 173 37 discriminator 1 view .LVU135
 769 0020 D82C     		cmp	r4, #216
 770 0022 F2D1     		bne	.L38
 173:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 771              		.loc 1 173 68 discriminator 2 view .LVU136
 772 0024 B5F1FF3F 		cmp	r5, #-1
 773 0028 EFD1     		bne	.L38
 174:libs/camera/camera.c ****         }
 774              		.loc 1 174 13 is_stmt 1 view .LVU137
 174:libs/camera/camera.c ****         }
 775              		.loc 1 174 25 is_stmt 0 view .LVU138
 776 002a 1D46     		mov	r5, r3
 777              	.LVL72:
 174:libs/camera/camera.c ****         }
 778              		.loc 1 174 25 view .LVU139
 779 002c EDE7     		b	.L38
 780              	.LVL73:
 781              	.L47:
 782              		.loc 1 176 52 discriminator 1 view .LVU140
 783 002e 5A1C     		adds	r2, r3, #1
 784 0030 8C5C     		ldrb	r4, [r1, r2]	@ zero_extendqisi2
 785              		.loc 1 176 37 discriminator 1 view .LVU141
 786 0032 D92C     		cmp	r4, #217
 787 0034 EBD1     		bne	.L39
 177:libs/camera/camera.c ****             end_index = i + 1;
 788              		.loc 1 177 13 is_stmt 1 view .LVU142
 789              		.loc 1 177 23 is_stmt 0 view .LVU143
 790 0036 1446     		mov	r4, r2
 791              	.LVL74:
 178:libs/camera/camera.c ****             break;
 792              		.loc 1 178 13 is_stmt 1 view .LVU144
 793 0038 01E0     		b	.L40
 794              	.LVL75:
 795              	.L48:
 796              		.loc 1 178 13 is_stmt 0 view .LVU145
 797              	.LBE6:
 171:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 798              		.loc 1 171 27 view .LVU146
 799 003a 4FF0FF34 		mov	r4, #-1
 800              	.LVL76:
 801              	.L40:
 179:libs/camera/camera.c ****         }
 180:libs/camera/camera.c ****     }
 181:libs/camera/camera.c **** 
 182:libs/camera/camera.c ****     if (start_index != -1 && end_index != -1 && end_index > start_index) 
 802              		.loc 1 182 5 is_stmt 1 view .LVU147
 803              		.loc 1 182 8 is_stmt 0 view .LVU148
 804 003e B5F1FF3F 		cmp	r5, #-1
 805 0042 0ED0     		beq	.L43
 806              		.loc 1 182 27 discriminator 1 view .LVU149
 807 0044 B4F1FF3F 		cmp	r4, #-1
 808 0048 0DD0     		beq	.L44
 809              		.loc 1 182 46 discriminator 2 view .LVU150
 810 004a A542     		cmp	r5, r4
 811 004c 01DB     		blt	.L49
 170:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
ARM GAS  /tmp/ccDAW1IQ.s 			page 19


 812              		.loc 1 170 14 view .LVU151
 813 004e 0020     		movs	r0, #0
 814              	.LVL77:
 183:libs/camera/camera.c ****     {
 184:libs/camera/camera.c ****         printf("JPEG found: start=%d, end=%d\n", start_index, end_index);
 185:libs/camera/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 186:libs/camera/camera.c ****         //     printf("%02X ", image_buffer[i]);
 187:libs/camera/camera.c ****         // }
 188:libs/camera/camera.c ****         // printf("\nJPEG extraction complete (%d bytes).\n", end_index - start_index + 1);
 189:libs/camera/camera.c ****         jpeg_length=end_index - start_index + 1;
 190:libs/camera/camera.c ****     } 
 191:libs/camera/camera.c ****     // uint32_t jpeg_length=end_index - start_index + 1;
 192:libs/camera/camera.c ****     return jpeg_length;
 815              		.loc 1 192 5 is_stmt 1 view .LVU152
 816              		.loc 1 192 12 is_stmt 0 view .LVU153
 817 0050 08E0     		b	.L36
 818              	.LVL78:
 819              	.L49:
 184:libs/camera/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 820              		.loc 1 184 9 is_stmt 1 view .LVU154
 821 0052 2246     		mov	r2, r4
 822 0054 2946     		mov	r1, r5
 823              	.LVL79:
 184:libs/camera/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 824              		.loc 1 184 9 is_stmt 0 view .LVU155
 825 0056 0548     		ldr	r0, .L50
 826              	.LVL80:
 184:libs/camera/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 827              		.loc 1 184 9 view .LVU156
 828 0058 FFF7FEFF 		bl	printf
 829              	.LVL81:
 189:libs/camera/camera.c ****     } 
 830              		.loc 1 189 9 is_stmt 1 view .LVU157
 189:libs/camera/camera.c ****     } 
 831              		.loc 1 189 31 is_stmt 0 view .LVU158
 832 005c 621B     		subs	r2, r4, r5
 189:libs/camera/camera.c ****     } 
 833              		.loc 1 189 45 view .LVU159
 834 005e 501C     		adds	r0, r2, #1
 835              	.LVL82:
 189:libs/camera/camera.c ****     } 
 836              		.loc 1 189 45 view .LVU160
 837 0060 00E0     		b	.L36
 838              	.LVL83:
 839              	.L43:
 170:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 840              		.loc 1 170 14 view .LVU161
 841 0062 0020     		movs	r0, #0
 842              	.LVL84:
 843              	.L36:
 193:libs/camera/camera.c **** 
 194:libs/camera/camera.c **** 
 195:libs/camera/camera.c ****     // else {
 196:libs/camera/camera.c ****         // printf("JPEG not found in the image buffer.\n");
 197:libs/camera/camera.c ****         // return false;
 198:libs/camera/camera.c **** 
 199:libs/camera/camera.c ****     // }
ARM GAS  /tmp/ccDAW1IQ.s 			page 20


 200:libs/camera/camera.c **** }
 844              		.loc 1 200 1 view .LVU162
 845 0064 38BD     		pop	{r3, r4, r5, pc}
 846              	.LVL85:
 847              	.L44:
 170:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 848              		.loc 1 170 14 view .LVU163
 849 0066 0020     		movs	r0, #0
 850              	.LVL86:
 170:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 851              		.loc 1 170 14 view .LVU164
 852 0068 FCE7     		b	.L36
 853              	.L51:
 854 006a 00BF     		.align	2
 855              	.L50:
 856 006c 00000000 		.word	.LC6
 857              		.cfi_endproc
 858              	.LFE79:
 860              		.section	.rodata.process_image_capture.str1.4,"aMS",%progbits,1
 861              		.align	2
 862              	.LC7:
 863 0000 53746172 		.ascii	"Starting image capture...\000"
 863      74696E67 
 863      20696D61 
 863      67652063 
 863      61707475 
 864 001a 0000     		.align	2
 865              	.LC8:
 866 001c 52656164 		.ascii	"Reading image from FIFO...\000"
 866      696E6720 
 866      696D6167 
 866      65206672 
 866      6F6D2046 
 867 0037 00       		.align	2
 868              	.LC9:
 869 0038 4A504547 		.ascii	"JPEG not found in buffer\000"
 869      206E6F74 
 869      20666F75 
 869      6E642069 
 869      6E206275 
 870 0051 000000   		.align	2
 871              	.LC10:
 872 0054 4A504547 		.ascii	"JPEG found: start=%d, end=%d, length=%lu\012\000"
 872      20666F75 
 872      6E643A20 
 872      73746172 
 872      743D2564 
 873 007e 0000     		.align	2
 874              	.LC11:
 875 0080 466C6173 		.ascii	"Flash not found or not matching (ID: 0x%lX)\015\012"
 875      68206E6F 
 875      7420666F 
 875      756E6420 
 875      6F72206E 
 876 00ad 00       		.ascii	"\000"
 877 00ae 0000     		.align	2
 878              	.LC12:
ARM GAS  /tmp/ccDAW1IQ.s 			page 21


 879 00b0 466C6173 		.ascii	"Flash found (ID: 0x%lX)\015\012\000"
 879      6820666F 
 879      756E6420 
 879      2849443A 
 879      20307825 
 880 00ca 0000     		.align	2
 881              	.LC13:
 882 00cc 454F4920 		.ascii	"EOI Packet.\000"
 882      5061636B 
 882      65742E00 
 883              		.align	2
 884              	.LC14:
 885 00d8 57726974 		.ascii	"Writing SSDV packet to flash...\000"
 885      696E6720 
 885      53534456 
 885      20706163 
 885      6B657420 
 886              		.align	2
 887              	.LC15:
 888 00f8 7C205353 		.ascii	"| SSDV packet %02lu stored at address 0x%06lX |\012"
 888      44562070 
 888      61636B65 
 888      74202530 
 888      326C7520 
 889 0128 00       		.ascii	"\000"
 890 0129 000000   		.align	2
 891              	.LC16:
 892 012c 5B535344 		.ascii	"[SSDV] Error or unexpected result.\000"
 892      565D2045 
 892      72726F72 
 892      206F7220 
 892      756E6578 
 893 014f 00       		.align	2
 894              	.LC17:
 895 0150 0A5B5245 		.ascii	"\012[READING BACK %lu SSDV PACKETS FROM FLASH]\012\000"
 895      4144494E 
 895      47204241 
 895      434B2025 
 895      6C752053 
 896 017d 000000   		.align	2
 897              	.LC18:
 898 0180 5061636B 		.ascii	"Packet %02lu: \000"
 898      65742025 
 898      30326C75 
 898      3A2000
 899 018f 00       		.align	2
 900              	.LC19:
 901 0190 30782530 		.ascii	"0x%02X, \000"
 901      32582C20 
 901      00
 902 0199 000000   		.align	2
 903              	.LC20:
 904 019c 0A2D2D2D 		.ascii	"\012-----------------------------\000"
 904      2D2D2D2D 
 904      2D2D2D2D 
 904      2D2D2D2D 
 904      2D2D2D2D 
ARM GAS  /tmp/ccDAW1IQ.s 			page 22


 905 01bb 00       		.align	2
 906              	.LC21:
 907 01bc 5B464C41 		.ascii	"[FLASH READ COMPLETE]\015\000"
 907      53482052 
 907      45414420 
 907      434F4D50 
 907      4C455445 
 908              		.section	.text.process_image_capture,"ax",%progbits
 909              		.align	1
 910              		.global	process_image_capture
 911              		.syntax unified
 912              		.thumb
 913              		.thumb_func
 914              		.fpu softvfp
 916              	process_image_capture:
 917              	.LFB80:
 201:libs/camera/camera.c **** 
 202:libs/camera/camera.c **** 
 203:libs/camera/camera.c **** // //5th iteration
 204:libs/camera/camera.c **** void process_image_capture()
 205:libs/camera/camera.c **** {
 918              		.loc 1 205 1 is_stmt 1 view -0
 919              		.cfi_startproc
 920              		@ args = 0, pretend = 0, frame = 1744
 921              		@ frame_needed = 0, uses_anonymous_args = 0
 922 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 923              	.LCFI18:
 924              		.cfi_def_cfa_offset 20
 925              		.cfi_offset 4, -20
 926              		.cfi_offset 5, -16
 927              		.cfi_offset 6, -12
 928              		.cfi_offset 7, -8
 929              		.cfi_offset 14, -4
 930 0002 ADF2DC6D 		subw	sp, sp, #1756
 931              	.LCFI19:
 932              		.cfi_def_cfa_offset 1776
 206:libs/camera/camera.c ****     current_packet_index = 0;
 933              		.loc 1 206 5 view .LVU166
 934              		.loc 1 206 26 is_stmt 0 view .LVU167
 935 0006 0024     		movs	r4, #0
 936 0008 764B     		ldr	r3, .L83
 937 000a 1C80     		strh	r4, [r3]	@ movhi
 207:libs/camera/camera.c **** 
 208:libs/camera/camera.c ****     // printf("setttinggggg.....camera\r\n");
 209:libs/camera/camera.c ****     arducam_set_jpeg_mode();
 938              		.loc 1 209 5 is_stmt 1 view .LVU168
 939 000c FFF7FEFF 		bl	arducam_set_jpeg_mode
 940              	.LVL87:
 210:libs/camera/camera.c ****     HAL_Delay(10);   
 941              		.loc 1 210 5 view .LVU169
 942 0010 0A20     		movs	r0, #10
 943 0012 FFF7FEFF 		bl	HAL_Delay
 944              	.LVL88:
 211:libs/camera/camera.c ****     printf("Starting image capture...\n");
 945              		.loc 1 211 5 view .LVU170
 946 0016 7448     		ldr	r0, .L83+4
 947 0018 FFF7FEFF 		bl	puts
ARM GAS  /tmp/ccDAW1IQ.s 			page 23


 948              	.LVL89:
 212:libs/camera/camera.c ****     arducam_capture_image();
 949              		.loc 1 212 5 view .LVU171
 950 001c FFF7FEFF 		bl	arducam_capture_image
 951              	.LVL90:
 213:libs/camera/camera.c **** 
 214:libs/camera/camera.c ****     printf("Reading image from FIFO...\n");
 952              		.loc 1 214 5 view .LVU172
 953 0020 7248     		ldr	r0, .L83+8
 954 0022 FFF7FEFF 		bl	puts
 955              	.LVL91:
 215:libs/camera/camera.c ****     uint32_t bytes_read = arducam_burst_read(image_buffer, MAX_IMAGE_SIZE);
 956              		.loc 1 215 5 view .LVU173
 957              		.loc 1 215 27 is_stmt 0 view .LVU174
 958 0026 43F69821 		movw	r1, #15000
 959 002a 7148     		ldr	r0, .L83+12
 960 002c FFF7FEFF 		bl	arducam_burst_read
 961              	.LVL92:
 216:libs/camera/camera.c ****     uint32_t jpeg_length = 0;
 962              		.loc 1 216 5 is_stmt 1 view .LVU175
 217:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 963              		.loc 1 217 5 view .LVU176
 218:libs/camera/camera.c **** 
 219:libs/camera/camera.c ****     // Find JPEG SOI and EOI markers
 220:libs/camera/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 964              		.loc 1 220 5 view .LVU177
 965              	.LBB7:
 966              		.loc 1 220 10 view .LVU178
 967              		.loc 1 220 19 is_stmt 0 view .LVU179
 968 0030 2346     		mov	r3, r4
 969              	.LBE7:
 217:libs/camera/camera.c ****     int start_index = -1, end_index = -1;
 970              		.loc 1 217 9 view .LVU180
 971 0032 4FF0FF34 		mov	r4, #-1
 972              	.LBB8:
 973              		.loc 1 220 5 view .LVU181
 974 0036 0AE0     		b	.L53
 975              	.LVL93:
 976              	.L79:
 221:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 977              		.loc 1 221 55 discriminator 1 view .LVU182
 978 0038 591C     		adds	r1, r3, #1
 979              		.loc 1 221 52 discriminator 1 view .LVU183
 980 003a 6D4D     		ldr	r5, .L83+12
 981 003c 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 982              		.loc 1 221 37 discriminator 1 view .LVU184
 983 003e D829     		cmp	r1, #216
 984 0040 0CD1     		bne	.L54
 985              		.loc 1 221 68 discriminator 2 view .LVU185
 986 0042 B4F1FF3F 		cmp	r4, #-1
 987 0046 09D1     		bne	.L54
 222:libs/camera/camera.c ****             start_index = i;
 988              		.loc 1 222 13 is_stmt 1 view .LVU186
 989              		.loc 1 222 25 is_stmt 0 view .LVU187
 990 0048 1C46     		mov	r4, r3
 991              	.LVL94:
 992              		.loc 1 222 25 view .LVU188
ARM GAS  /tmp/ccDAW1IQ.s 			page 24


 993 004a 07E0     		b	.L54
 994              	.LVL95:
 995              	.L55:
 220:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 996              		.loc 1 220 46 is_stmt 1 discriminator 2 view .LVU189
 220:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 997              		.loc 1 220 47 is_stmt 0 discriminator 2 view .LVU190
 998 004c 0133     		adds	r3, r3, #1
 999              	.LVL96:
 1000              	.L53:
 220:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1001              		.loc 1 220 26 is_stmt 1 discriminator 1 view .LVU191
 220:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1002              		.loc 1 220 41 is_stmt 0 discriminator 1 view .LVU192
 1003 004e 421E     		subs	r2, r0, #1
 220:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1004              		.loc 1 220 5 discriminator 1 view .LVU193
 1005 0050 9A42     		cmp	r2, r3
 1006 0052 0BD9     		bls	.L78
 221:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1007              		.loc 1 221 9 is_stmt 1 view .LVU194
 221:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1008              		.loc 1 221 25 is_stmt 0 view .LVU195
 1009 0054 664A     		ldr	r2, .L83+12
 1010 0056 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 221:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 1011              		.loc 1 221 12 view .LVU196
 1012 0058 FF2A     		cmp	r2, #255
 1013 005a EDD0     		beq	.L79
 1014              	.L54:
 223:libs/camera/camera.c ****         }
 224:libs/camera/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD9) {
 1015              		.loc 1 224 9 is_stmt 1 view .LVU197
 1016              		.loc 1 224 12 is_stmt 0 view .LVU198
 1017 005c FF2A     		cmp	r2, #255
 1018 005e F5D1     		bne	.L55
 1019              		.loc 1 224 55 discriminator 1 view .LVU199
 1020 0060 5A1C     		adds	r2, r3, #1
 1021              		.loc 1 224 52 discriminator 1 view .LVU200
 1022 0062 6349     		ldr	r1, .L83+12
 1023 0064 895C     		ldrb	r1, [r1, r2]	@ zero_extendqisi2
 1024              		.loc 1 224 37 discriminator 1 view .LVU201
 1025 0066 D929     		cmp	r1, #217
 1026 0068 F0D1     		bne	.L55
 1027 006a 01E0     		b	.L56
 1028              	.L78:
 1029              		.loc 1 224 37 discriminator 1 view .LVU202
 1030              	.LBE8:
 217:libs/camera/camera.c **** 
 1031              		.loc 1 217 27 view .LVU203
 1032 006c 4FF0FF32 		mov	r2, #-1
 1033              	.L56:
 1034              	.LVL97:
 225:libs/camera/camera.c ****             end_index = i + 1;
 226:libs/camera/camera.c ****             break;
 227:libs/camera/camera.c ****         }
 228:libs/camera/camera.c ****     }
ARM GAS  /tmp/ccDAW1IQ.s 			page 25


 229:libs/camera/camera.c **** 
 230:libs/camera/camera.c ****     if (start_index == -1 || end_index == -1 || end_index <= start_index) {
 1035              		.loc 1 230 5 is_stmt 1 view .LVU204
 1036              		.loc 1 230 8 is_stmt 0 view .LVU205
 1037 0070 B4F1FF3F 		cmp	r4, #-1
 1038 0074 04D0     		beq	.L58
 1039              		.loc 1 230 27 discriminator 1 view .LVU206
 1040 0076 B2F1FF3F 		cmp	r2, #-1
 1041 007a 01D0     		beq	.L58
 1042              		.loc 1 230 46 discriminator 2 view .LVU207
 1043 007c 9442     		cmp	r4, r2
 1044 007e 05DB     		blt	.L59
 1045              	.L58:
 231:libs/camera/camera.c ****         printf("JPEG not found in buffer\n");
 1046              		.loc 1 231 9 is_stmt 1 view .LVU208
 1047 0080 5C48     		ldr	r0, .L83+16
 1048              	.LVL98:
 1049              		.loc 1 231 9 is_stmt 0 view .LVU209
 1050 0082 FFF7FEFF 		bl	puts
 1051              	.LVL99:
 232:libs/camera/camera.c ****         return;
 1052              		.loc 1 232 9 is_stmt 1 view .LVU210
 1053              	.L52:
 233:libs/camera/camera.c ****     }
 234:libs/camera/camera.c **** 
 235:libs/camera/camera.c ****     jpeg_length = end_index - start_index + 1;
 236:libs/camera/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 237:libs/camera/camera.c **** 
 238:libs/camera/camera.c ****     /*------ SSDV ENCODING --------*/
 239:libs/camera/camera.c ****     ssdv_t ssdv;
 240:libs/camera/camera.c ****     uint8_t ssdv_pkt[SSDV_PKT_SIZE];
 241:libs/camera/camera.c **** 
 242:libs/camera/camera.c ****     ssdv_enc_init(&ssdv, ssdv_type, ssdv_call_sign, ssdv_image_id++, ssdv_quality);
 243:libs/camera/camera.c ****     ssdv_enc_set_buffer(&ssdv, ssdv_pkt);
 244:libs/camera/camera.c **** 
 245:libs/camera/camera.c ****     // size_t ssdv_packets_in_image = 0;
 246:libs/camera/camera.c **** 
 247:libs/camera/camera.c ****     // Flash initialization
 248:libs/camera/camera.c ****     flash_init();
 249:libs/camera/camera.c **** 
 250:libs/camera/camera.c ****     uint32_t flash_id = flash_read_id();
 251:libs/camera/camera.c ****     if (flash_id != FLASH_ID_512) {
 252:libs/camera/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 253:libs/camera/camera.c ****         while (1);
 254:libs/camera/camera.c ****     } else {
 255:libs/camera/camera.c ****         printf("Flash found (ID: 0x%lX)\r\n", flash_id);
 256:libs/camera/camera.c ****     }
 257:libs/camera/camera.c **** 
 258:libs/camera/camera.c ****     // Address for current image
 259:libs/camera/camera.c ****     uint32_t image_index = 0;  // Replace with a persistent value for multi-image storage
 260:libs/camera/camera.c ****     uint32_t ssdv_start_addr = image_index * (SSDV_PKT_SIZE * MAX_SSDV_PACKETS);
 261:libs/camera/camera.c **** 
 262:libs/camera/camera.c ****     // Erase necessary sectors
 263:libs/camera/camera.c ****     for (uint32_t addr = ssdv_start_addr; addr < (ssdv_start_addr + (SSDV_PKT_SIZE * MAX_SSDV_PACKE
 264:libs/camera/camera.c ****         flash_erase_sector(addr);
 265:libs/camera/camera.c ****     }
 266:libs/camera/camera.c **** 
ARM GAS  /tmp/ccDAW1IQ.s 			page 26


 267:libs/camera/camera.c ****     // SSDV encoding and flash writing
 268:libs/camera/camera.c ****     uint32_t bi = 0;
 269:libs/camera/camera.c ****     int c;
 270:libs/camera/camera.c ****     while (1) {
 271:libs/camera/camera.c ****         while ((c = ssdv_enc_get_packet(&ssdv)) == SSDV_FEED_ME) {
 272:libs/camera/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 273:libs/camera/camera.c ****             if (chunk_size == 0) break;
 274:libs/camera/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
 275:libs/camera/camera.c ****             bi += chunk_size;
 276:libs/camera/camera.c ****         }
 277:libs/camera/camera.c **** 
 278:libs/camera/camera.c ****         if (c == SSDV_EOI) {
 279:libs/camera/camera.c ****             printf("EOI Packet.\n");
 280:libs/camera/camera.c ****             break;
 281:libs/camera/camera.c ****         } else if (c == SSDV_OK) {
 282:libs/camera/camera.c ****             printf("Writing SSDV packet to flash...\n");
 283:libs/camera/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 284:libs/camera/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 285:libs/camera/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
 286:libs/camera/camera.c ****             ssdv_packets_in_image++;
 287:libs/camera/camera.c ****         } else {
 288:libs/camera/camera.c ****             printf("[SSDV] Error or unexpected result.\n");
 289:libs/camera/camera.c ****             break;
 290:libs/camera/camera.c ****         }
 291:libs/camera/camera.c ****     }
 292:libs/camera/camera.c **** 
 293:libs/camera/camera.c ****     /*------ READ BACK SSDV PACKETS --------*/
 294:libs/camera/camera.c ****     printf("\n[READING BACK %lu SSDV PACKETS FROM FLASH]\n", ssdv_packets_in_image);
 295:libs/camera/camera.c ****     for (uint32_t i = 0; i < ssdv_packets_in_image; i++) {
 296:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 297:libs/camera/camera.c ****         flash_read_buffer(buffer, ssdv_start_addr + i * SSDV_PKT_SIZE, SSDV_PKT_SIZE);
 298:libs/camera/camera.c ****         HAL_Delay(10);
 299:libs/camera/camera.c **** 
 300:libs/camera/camera.c ****         printf("Packet %02lu: ", i + 1);
 301:libs/camera/camera.c ****         for (uint16_t j = 0; j < SSDV_PKT_SIZE; j++) {
 302:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 303:libs/camera/camera.c ****             if ((j + 1) % 16 == 0) printf("\n");
 304:libs/camera/camera.c ****         }
 305:libs/camera/camera.c ****         printf("\n-----------------------------\n");
 306:libs/camera/camera.c ****     }
 307:libs/camera/camera.c **** 
 308:libs/camera/camera.c ****     printf("[FLASH READ COMPLETE]\r\n");
 309:libs/camera/camera.c **** 
 310:libs/camera/camera.c ****     current_packet_index = 0;
 311:libs/camera/camera.c ****     send_all_packets = 0;
 312:libs/camera/camera.c ****     prestore_image_requested = 0;
 313:libs/camera/camera.c ****     // previous_send_flash_packets= 0;
 314:libs/camera/camera.c **** }
 1054              		.loc 1 314 1 is_stmt 0 view .LVU211
 1055 0086 0DF2DC6D 		addw	sp, sp, #1756
 1056              	.LCFI20:
 1057              		.cfi_remember_state
 1058              		.cfi_def_cfa_offset 20
 1059              		@ sp needed
 1060 008a F0BD     		pop	{r4, r5, r6, r7, pc}
 1061              	.LVL100:
 1062              	.L59:
ARM GAS  /tmp/ccDAW1IQ.s 			page 27


 1063              	.LCFI21:
 1064              		.cfi_restore_state
 235:libs/camera/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 1065              		.loc 1 235 5 is_stmt 1 view .LVU212
 235:libs/camera/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 1066              		.loc 1 235 29 is_stmt 0 view .LVU213
 1067 008c 161B     		subs	r6, r2, r4
 235:libs/camera/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 1068              		.loc 1 235 43 view .LVU214
 1069 008e 0136     		adds	r6, r6, #1
 1070              	.LVL101:
 236:libs/camera/camera.c **** 
 1071              		.loc 1 236 5 is_stmt 1 view .LVU215
 1072 0090 3346     		mov	r3, r6
 1073              	.LVL102:
 236:libs/camera/camera.c **** 
 1074              		.loc 1 236 5 is_stmt 0 view .LVU216
 1075 0092 2146     		mov	r1, r4
 1076 0094 5848     		ldr	r0, .L83+20
 1077              	.LVL103:
 236:libs/camera/camera.c **** 
 1078              		.loc 1 236 5 view .LVU217
 1079 0096 FFF7FEFF 		bl	printf
 1080              	.LVL104:
 239:libs/camera/camera.c ****     uint8_t ssdv_pkt[SSDV_PKT_SIZE];
 1081              		.loc 1 239 5 is_stmt 1 view .LVU218
 240:libs/camera/camera.c **** 
 1082              		.loc 1 240 5 view .LVU219
 242:libs/camera/camera.c ****     ssdv_enc_set_buffer(&ssdv, ssdv_pkt);
 1083              		.loc 1 242 5 view .LVU220
 1084 009a 584A     		ldr	r2, .L83+24
 1085 009c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1086 009e 591C     		adds	r1, r3, #1
 1087 00a0 1170     		strb	r1, [r2]
 1088 00a2 574A     		ldr	r2, .L83+28
 1089 00a4 92F90020 		ldrsb	r2, [r2]
 1090 00a8 0092     		str	r2, [sp]
 1091 00aa 564A     		ldr	r2, .L83+32
 1092 00ac 5649     		ldr	r1, .L83+36
 1093 00ae 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 1094 00b0 72A8     		add	r0, sp, #456
 1095 00b2 FFF7FEFF 		bl	ssdv_enc_init
 1096              	.LVL105:
 243:libs/camera/camera.c **** 
 1097              		.loc 1 243 5 view .LVU221
 1098 00b6 3AA9     		add	r1, sp, #232
 1099 00b8 72A8     		add	r0, sp, #456
 1100 00ba FFF7FEFF 		bl	ssdv_enc_set_buffer
 1101              	.LVL106:
 248:libs/camera/camera.c **** 
 1102              		.loc 1 248 5 view .LVU222
 1103 00be FFF7FEFF 		bl	flash_init
 1104              	.LVL107:
 250:libs/camera/camera.c ****     if (flash_id != FLASH_ID_512) {
 1105              		.loc 1 250 5 view .LVU223
 250:libs/camera/camera.c ****     if (flash_id != FLASH_ID_512) {
 1106              		.loc 1 250 25 is_stmt 0 view .LVU224
ARM GAS  /tmp/ccDAW1IQ.s 			page 28


 1107 00c2 FFF7FEFF 		bl	flash_read_id
 1108              	.LVL108:
 1109 00c6 0146     		mov	r1, r0
 1110              	.LVL109:
 251:libs/camera/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 1111              		.loc 1 251 5 is_stmt 1 view .LVU225
 251:libs/camera/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 1112              		.loc 1 251 8 is_stmt 0 view .LVU226
 1113 00c8 504B     		ldr	r3, .L83+40
 1114 00ca 9842     		cmp	r0, r3
 1115 00cc 03D0     		beq	.L61
 252:libs/camera/camera.c ****         while (1);
 1116              		.loc 1 252 9 is_stmt 1 view .LVU227
 1117 00ce 5048     		ldr	r0, .L83+44
 1118              	.LVL110:
 252:libs/camera/camera.c ****         while (1);
 1119              		.loc 1 252 9 is_stmt 0 view .LVU228
 1120 00d0 FFF7FEFF 		bl	printf
 1121              	.LVL111:
 1122              	.L62:
 253:libs/camera/camera.c ****     } else {
 1123              		.loc 1 253 9 is_stmt 1 discriminator 1 view .LVU229
 253:libs/camera/camera.c ****     } else {
 1124              		.loc 1 253 18 discriminator 1 view .LVU230
 253:libs/camera/camera.c ****     } else {
 1125              		.loc 1 253 15 discriminator 1 view .LVU231
 1126 00d4 FEE7     		b	.L62
 1127              	.LVL112:
 1128              	.L61:
 255:libs/camera/camera.c ****     }
 1129              		.loc 1 255 9 view .LVU232
 1130 00d6 4F48     		ldr	r0, .L83+48
 1131              	.LVL113:
 255:libs/camera/camera.c ****     }
 1132              		.loc 1 255 9 is_stmt 0 view .LVU233
 1133 00d8 FFF7FEFF 		bl	printf
 1134              	.LVL114:
 259:libs/camera/camera.c ****     uint32_t ssdv_start_addr = image_index * (SSDV_PKT_SIZE * MAX_SSDV_PACKETS);
 1135              		.loc 1 259 5 is_stmt 1 view .LVU234
 260:libs/camera/camera.c **** 
 1136              		.loc 1 260 5 view .LVU235
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1137              		.loc 1 263 5 view .LVU236
 1138              	.LBB9:
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1139              		.loc 1 263 10 view .LVU237
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1140              		.loc 1 263 19 is_stmt 0 view .LVU238
 1141 00dc 0025     		movs	r5, #0
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1142              		.loc 1 263 5 view .LVU239
 1143 00de 04E0     		b	.L63
 1144              	.LVL115:
 1145              	.L64:
 264:libs/camera/camera.c ****     }
 1146              		.loc 1 264 9 is_stmt 1 discriminator 3 view .LVU240
 1147 00e0 2846     		mov	r0, r5
ARM GAS  /tmp/ccDAW1IQ.s 			page 29


 1148 00e2 FFF7FEFF 		bl	flash_erase_sector
 1149              	.LVL116:
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1150              		.loc 1 263 106 discriminator 3 view .LVU241
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1151              		.loc 1 263 111 is_stmt 0 discriminator 3 view .LVU242
 1152 00e6 05F58055 		add	r5, r5, #4096
 1153              	.LVL117:
 1154              	.L63:
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1155              		.loc 1 263 43 is_stmt 1 discriminator 1 view .LVU243
 263:libs/camera/camera.c ****         flash_erase_sector(addr);
 1156              		.loc 1 263 5 is_stmt 0 discriminator 1 view .LVU244
 1157 00ea 42F25F73 		movw	r3, #10079
 1158 00ee 9D42     		cmp	r5, r3
 1159 00f0 F6D9     		bls	.L64
 1160              	.LBE9:
 268:libs/camera/camera.c ****     int c;
 1161              		.loc 1 268 14 view .LVU245
 1162 00f2 0027     		movs	r7, #0
 1163 00f4 1AE0     		b	.L65
 1164              	.LVL118:
 1165              	.L66:
 278:libs/camera/camera.c ****             printf("EOI Packet.\n");
 1166              		.loc 1 278 9 is_stmt 1 view .LVU246
 278:libs/camera/camera.c ****             printf("EOI Packet.\n");
 1167              		.loc 1 278 12 is_stmt 0 view .LVU247
 1168 00f6 0428     		cmp	r0, #4
 1169 00f8 2CD0     		beq	.L80
 281:libs/camera/camera.c ****             printf("Writing SSDV packet to flash...\n");
 1170              		.loc 1 281 16 is_stmt 1 view .LVU248
 281:libs/camera/camera.c ****             printf("Writing SSDV packet to flash...\n");
 1171              		.loc 1 281 19 is_stmt 0 view .LVU249
 1172 00fa 0028     		cmp	r0, #0
 1173 00fc 34D1     		bne	.L70
 282:libs/camera/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 1174              		.loc 1 282 13 is_stmt 1 view .LVU250
 1175 00fe 4648     		ldr	r0, .L83+52
 1176              	.LVL119:
 282:libs/camera/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 1177              		.loc 1 282 13 is_stmt 0 view .LVU251
 1178 0100 FFF7FEFF 		bl	puts
 1179              	.LVL120:
 283:libs/camera/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1180              		.loc 1 283 13 is_stmt 1 view .LVU252
 283:libs/camera/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1181              		.loc 1 283 82 is_stmt 0 view .LVU253
 1182 0104 454D     		ldr	r5, .L83+56
 1183 0106 2968     		ldr	r1, [r5]
 1184 0108 C1EBC101 		rsb	r1, r1, r1, lsl #3
 283:libs/camera/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1185              		.loc 1 283 13 view .LVU254
 1186 010c E022     		movs	r2, #224
 1187 010e 4901     		lsls	r1, r1, #5
 1188 0110 3AA8     		add	r0, sp, #232
 1189 0112 FFF7FEFF 		bl	flash_write_buffer
 1190              	.LVL121:
ARM GAS  /tmp/ccDAW1IQ.s 			page 30


 284:libs/camera/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
 1191              		.loc 1 284 13 is_stmt 1 view .LVU255
 1192 0116 2968     		ldr	r1, [r5]
 285:libs/camera/camera.c ****             ssdv_packets_in_image++;
 1193              		.loc 1 285 76 is_stmt 0 view .LVU256
 1194 0118 C1EBC102 		rsb	r2, r1, r1, lsl #3
 284:libs/camera/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
 1195              		.loc 1 284 13 view .LVU257
 1196 011c 5201     		lsls	r2, r2, #5
 1197 011e 0131     		adds	r1, r1, #1
 1198 0120 3F48     		ldr	r0, .L83+60
 1199 0122 FFF7FEFF 		bl	printf
 1200              	.LVL122:
 286:libs/camera/camera.c ****         } else {
 1201              		.loc 1 286 13 is_stmt 1 view .LVU258
 286:libs/camera/camera.c ****         } else {
 1202              		.loc 1 286 34 is_stmt 0 view .LVU259
 1203 0126 2B68     		ldr	r3, [r5]
 1204 0128 0133     		adds	r3, r3, #1
 1205 012a 2B60     		str	r3, [r5]
 270:libs/camera/camera.c ****         while ((c = ssdv_enc_get_packet(&ssdv)) == SSDV_FEED_ME) {
 1206              		.loc 1 270 11 is_stmt 1 view .LVU260
 1207              	.LVL123:
 1208              	.L65:
 271:libs/camera/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1209              		.loc 1 271 15 view .LVU261
 271:libs/camera/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1210              		.loc 1 271 21 is_stmt 0 view .LVU262
 1211 012c 72A8     		add	r0, sp, #456
 1212 012e FFF7FEFF 		bl	ssdv_enc_get_packet
 1213              	.LVL124:
 271:libs/camera/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1214              		.loc 1 271 15 view .LVU263
 1215 0132 0128     		cmp	r0, #1
 1216 0134 DFD1     		bne	.L66
 1217              	.LBB10:
 272:libs/camera/camera.c ****             if (chunk_size == 0) break;
 1218              		.loc 1 272 13 is_stmt 1 view .LVU264
 272:libs/camera/camera.c ****             if (chunk_size == 0) break;
 1219              		.loc 1 272 49 is_stmt 0 view .LVU265
 1220 0136 F51B     		subs	r5, r6, r7
 272:libs/camera/camera.c ****             if (chunk_size == 0) break;
 1221              		.loc 1 272 22 view .LVU266
 1222 0138 802D     		cmp	r5, #128
 1223 013a 28BF     		it	cs
 1224 013c 8025     		movcs	r5, #128
 1225              	.LVL125:
 273:libs/camera/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
 1226              		.loc 1 273 13 is_stmt 1 view .LVU267
 273:libs/camera/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
 1227              		.loc 1 273 16 is_stmt 0 view .LVU268
 1228 013e B742     		cmp	r7, r6
 1229 0140 D9D0     		beq	.L66
 274:libs/camera/camera.c ****             bi += chunk_size;
 1230              		.loc 1 274 13 is_stmt 1 view .LVU269
 274:libs/camera/camera.c ****             bi += chunk_size;
 1231              		.loc 1 274 60 is_stmt 0 view .LVU270
ARM GAS  /tmp/ccDAW1IQ.s 			page 31


 1232 0142 E319     		adds	r3, r4, r7
 274:libs/camera/camera.c ****             bi += chunk_size;
 1233              		.loc 1 274 13 view .LVU271
 1234 0144 2A46     		mov	r2, r5
 1235 0146 2A49     		ldr	r1, .L83+12
 1236 0148 1944     		add	r1, r1, r3
 1237 014a 72A8     		add	r0, sp, #456
 1238              	.LVL126:
 274:libs/camera/camera.c ****             bi += chunk_size;
 1239              		.loc 1 274 13 view .LVU272
 1240 014c FFF7FEFF 		bl	ssdv_enc_feed
 1241              	.LVL127:
 275:libs/camera/camera.c ****         }
 1242              		.loc 1 275 13 is_stmt 1 view .LVU273
 275:libs/camera/camera.c ****         }
 1243              		.loc 1 275 16 is_stmt 0 view .LVU274
 1244 0150 2F44     		add	r7, r7, r5
 1245              	.LVL128:
 275:libs/camera/camera.c ****         }
 1246              		.loc 1 275 16 view .LVU275
 1247 0152 EBE7     		b	.L65
 1248              	.LVL129:
 1249              	.L80:
 275:libs/camera/camera.c ****         }
 1250              		.loc 1 275 16 view .LVU276
 1251              	.LBE10:
 279:libs/camera/camera.c ****             break;
 1252              		.loc 1 279 13 is_stmt 1 view .LVU277
 1253 0154 3348     		ldr	r0, .L83+64
 1254              	.LVL130:
 279:libs/camera/camera.c ****             break;
 1255              		.loc 1 279 13 is_stmt 0 view .LVU278
 1256 0156 FFF7FEFF 		bl	puts
 1257              	.LVL131:
 280:libs/camera/camera.c ****         } else if (c == SSDV_OK) {
 1258              		.loc 1 280 13 is_stmt 1 view .LVU279
 1259              	.L69:
 294:libs/camera/camera.c ****     for (uint32_t i = 0; i < ssdv_packets_in_image; i++) {
 1260              		.loc 1 294 5 view .LVU280
 1261 015a 304B     		ldr	r3, .L83+56
 1262 015c 1968     		ldr	r1, [r3]
 1263 015e 3248     		ldr	r0, .L83+68
 1264 0160 FFF7FEFF 		bl	printf
 1265              	.LVL132:
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1266              		.loc 1 295 5 view .LVU281
 1267              	.LBB11:
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1268              		.loc 1 295 10 view .LVU282
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1269              		.loc 1 295 19 is_stmt 0 view .LVU283
 1270 0164 0025     		movs	r5, #0
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1271              		.loc 1 295 5 view .LVU284
 1272 0166 17E0     		b	.L72
 1273              	.LVL133:
 1274              	.L70:
ARM GAS  /tmp/ccDAW1IQ.s 			page 32


 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1275              		.loc 1 295 5 view .LVU285
 1276              	.LBE11:
 288:libs/camera/camera.c ****             break;
 1277              		.loc 1 288 13 is_stmt 1 view .LVU286
 1278 0168 3048     		ldr	r0, .L83+72
 1279              	.LVL134:
 288:libs/camera/camera.c ****             break;
 1280              		.loc 1 288 13 is_stmt 0 view .LVU287
 1281 016a FFF7FEFF 		bl	puts
 1282              	.LVL135:
 289:libs/camera/camera.c ****         }
 1283              		.loc 1 289 13 is_stmt 1 view .LVU288
 1284 016e F4E7     		b	.L69
 1285              	.LVL136:
 1286              	.L74:
 1287              	.LBB16:
 1288              	.LBB12:
 1289              	.LBB13:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1290              		.loc 1 301 49 discriminator 2 view .LVU289
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1291              		.loc 1 301 50 is_stmt 0 discriminator 2 view .LVU290
 1292 0170 0134     		adds	r4, r4, #1
 1293              	.LVL137:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1294              		.loc 1 301 50 discriminator 2 view .LVU291
 1295 0172 A4B2     		uxth	r4, r4
 1296              	.LVL138:
 1297              	.L73:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1298              		.loc 1 301 30 is_stmt 1 discriminator 1 view .LVU292
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1299              		.loc 1 301 9 is_stmt 0 discriminator 1 view .LVU293
 1300 0174 DF2C     		cmp	r4, #223
 1301 0176 0CD8     		bhi	.L81
 302:libs/camera/camera.c ****             if ((j + 1) % 16 == 0) printf("\n");
 1302              		.loc 1 302 13 is_stmt 1 view .LVU294
 1303 0178 02AB     		add	r3, sp, #8
 1304 017a 195D     		ldrb	r1, [r3, r4]	@ zero_extendqisi2
 1305 017c 2C48     		ldr	r0, .L83+76
 1306 017e FFF7FEFF 		bl	printf
 1307              	.LVL139:
 303:libs/camera/camera.c ****         }
 1308              		.loc 1 303 13 view .LVU295
 303:libs/camera/camera.c ****         }
 1309              		.loc 1 303 20 is_stmt 0 view .LVU296
 1310 0182 631C     		adds	r3, r4, #1
 303:libs/camera/camera.c ****         }
 1311              		.loc 1 303 16 view .LVU297
 1312 0184 13F00F0F 		tst	r3, #15
 1313 0188 F2D1     		bne	.L74
 303:libs/camera/camera.c ****         }
 1314              		.loc 1 303 36 is_stmt 1 discriminator 1 view .LVU298
 1315 018a 0A20     		movs	r0, #10
 1316 018c FFF7FEFF 		bl	putchar
 1317              	.LVL140:
ARM GAS  /tmp/ccDAW1IQ.s 			page 33


 1318 0190 EEE7     		b	.L74
 1319              	.L81:
 1320              	.LBE13:
 305:libs/camera/camera.c ****     }
 1321              		.loc 1 305 9 discriminator 2 view .LVU299
 1322 0192 2848     		ldr	r0, .L83+80
 1323 0194 FFF7FEFF 		bl	puts
 1324              	.LVL141:
 1325              	.LBE12:
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1326              		.loc 1 295 53 discriminator 2 view .LVU300
 1327              	.L72:
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1328              		.loc 1 295 26 discriminator 1 view .LVU301
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1329              		.loc 1 295 28 is_stmt 0 discriminator 1 view .LVU302
 1330 0198 204B     		ldr	r3, .L83+56
 1331 019a 1B68     		ldr	r3, [r3]
 295:libs/camera/camera.c ****         uint8_t buffer[SSDV_PKT_SIZE] = {0};
 1332              		.loc 1 295 5 discriminator 1 view .LVU303
 1333 019c AB42     		cmp	r3, r5
 1334 019e 16D9     		bls	.L82
 1335              	.LBB15:
 296:libs/camera/camera.c ****         flash_read_buffer(buffer, ssdv_start_addr + i * SSDV_PKT_SIZE, SSDV_PKT_SIZE);
 1336              		.loc 1 296 9 is_stmt 1 view .LVU304
 296:libs/camera/camera.c ****         flash_read_buffer(buffer, ssdv_start_addr + i * SSDV_PKT_SIZE, SSDV_PKT_SIZE);
 1337              		.loc 1 296 17 is_stmt 0 view .LVU305
 1338 01a0 0024     		movs	r4, #0
 1339 01a2 0294     		str	r4, [sp, #8]
 1340 01a4 DC22     		movs	r2, #220
 1341 01a6 2146     		mov	r1, r4
 1342 01a8 03A8     		add	r0, sp, #12
 1343 01aa FFF7FEFF 		bl	memset
 1344              	.LVL142:
 297:libs/camera/camera.c ****         HAL_Delay(10);
 1345              		.loc 1 297 9 is_stmt 1 view .LVU306
 297:libs/camera/camera.c ****         HAL_Delay(10);
 1346              		.loc 1 297 55 is_stmt 0 view .LVU307
 1347 01ae C5EBC501 		rsb	r1, r5, r5, lsl #3
 297:libs/camera/camera.c ****         HAL_Delay(10);
 1348              		.loc 1 297 9 view .LVU308
 1349 01b2 E022     		movs	r2, #224
 1350 01b4 4901     		lsls	r1, r1, #5
 1351 01b6 02A8     		add	r0, sp, #8
 1352 01b8 FFF7FEFF 		bl	flash_read_buffer
 1353              	.LVL143:
 298:libs/camera/camera.c **** 
 1354              		.loc 1 298 9 is_stmt 1 view .LVU309
 1355 01bc 0A20     		movs	r0, #10
 1356 01be FFF7FEFF 		bl	HAL_Delay
 1357              	.LVL144:
 300:libs/camera/camera.c ****         for (uint16_t j = 0; j < SSDV_PKT_SIZE; j++) {
 1358              		.loc 1 300 9 view .LVU310
 1359 01c2 0135     		adds	r5, r5, #1
 1360              	.LVL145:
 300:libs/camera/camera.c ****         for (uint16_t j = 0; j < SSDV_PKT_SIZE; j++) {
 1361              		.loc 1 300 9 is_stmt 0 view .LVU311
ARM GAS  /tmp/ccDAW1IQ.s 			page 34


 1362 01c4 2946     		mov	r1, r5
 1363 01c6 1C48     		ldr	r0, .L83+84
 1364 01c8 FFF7FEFF 		bl	printf
 1365              	.LVL146:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1366              		.loc 1 301 9 is_stmt 1 view .LVU312
 1367              	.LBB14:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1368              		.loc 1 301 14 view .LVU313
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1369              		.loc 1 301 9 is_stmt 0 view .LVU314
 1370 01cc D2E7     		b	.L73
 1371              	.LVL147:
 1372              	.L82:
 301:libs/camera/camera.c ****             printf("0x%02X, ", buffer[j]);
 1373              		.loc 1 301 9 view .LVU315
 1374              	.LBE14:
 1375              	.LBE15:
 1376              	.LBE16:
 308:libs/camera/camera.c **** 
 1377              		.loc 1 308 5 is_stmt 1 view .LVU316
 1378 01ce 1B48     		ldr	r0, .L83+88
 1379 01d0 FFF7FEFF 		bl	puts
 1380              	.LVL148:
 310:libs/camera/camera.c ****     send_all_packets = 0;
 1381              		.loc 1 310 5 view .LVU317
 310:libs/camera/camera.c ****     send_all_packets = 0;
 1382              		.loc 1 310 26 is_stmt 0 view .LVU318
 1383 01d4 0023     		movs	r3, #0
 1384 01d6 034A     		ldr	r2, .L83
 1385 01d8 1380     		strh	r3, [r2]	@ movhi
 311:libs/camera/camera.c ****     prestore_image_requested = 0;
 1386              		.loc 1 311 5 is_stmt 1 view .LVU319
 311:libs/camera/camera.c ****     prestore_image_requested = 0;
 1387              		.loc 1 311 22 is_stmt 0 view .LVU320
 1388 01da 194A     		ldr	r2, .L83+92
 1389 01dc 1370     		strb	r3, [r2]
 312:libs/camera/camera.c ****     // previous_send_flash_packets= 0;
 1390              		.loc 1 312 5 is_stmt 1 view .LVU321
 312:libs/camera/camera.c ****     // previous_send_flash_packets= 0;
 1391              		.loc 1 312 30 is_stmt 0 view .LVU322
 1392 01de 194A     		ldr	r2, .L83+96
 1393 01e0 1370     		strb	r3, [r2]
 1394 01e2 50E7     		b	.L52
 1395              	.L84:
 1396              		.align	2
 1397              	.L83:
 1398 01e4 00000000 		.word	current_packet_index
 1399 01e8 00000000 		.word	.LC7
 1400 01ec 1C000000 		.word	.LC8
 1401 01f0 00000000 		.word	image_buffer
 1402 01f4 38000000 		.word	.LC9
 1403 01f8 54000000 		.word	.LC10
 1404 01fc 00000000 		.word	.LANCHOR1
 1405 0200 00000000 		.word	.LANCHOR3
 1406 0204 00000000 		.word	.LANCHOR2
 1407 0208 00000000 		.word	.LANCHOR0
ARM GAS  /tmp/ccDAW1IQ.s 			page 35


 1408 020c 2040EF00 		.word	15679520
 1409 0210 80000000 		.word	.LC11
 1410 0214 B0000000 		.word	.LC12
 1411 0218 D8000000 		.word	.LC14
 1412 021c 00000000 		.word	.LANCHOR4
 1413 0220 F8000000 		.word	.LC15
 1414 0224 CC000000 		.word	.LC13
 1415 0228 50010000 		.word	.LC17
 1416 022c 2C010000 		.word	.LC16
 1417 0230 90010000 		.word	.LC19
 1418 0234 9C010000 		.word	.LC20
 1419 0238 80010000 		.word	.LC18
 1420 023c BC010000 		.word	.LC21
 1421 0240 00000000 		.word	send_all_packets
 1422 0244 00000000 		.word	prestore_image_requested
 1423              		.cfi_endproc
 1424              	.LFE80:
 1426              		.global	ssdv_quality
 1427              		.global	ssdv_image_id
 1428              		.global	ssdv_call_sign
 1429              		.global	ssdv_type
 1430              		.global	ssdv_start_addr
 1431              		.global	ssdv_packets_in_image
 1432              		.global	jpeg_size
 1433              		.global	image_buffer
 1434              		.section	.bss.image_buffer,"aw",%nobits
 1435              		.align	2
 1438              	image_buffer:
 1439 0000 00000000 		.space	15000
 1439      00000000 
 1439      00000000 
 1439      00000000 
 1439      00000000 
 1440              		.section	.bss.jpeg_size,"aw",%nobits
 1441              		.align	2
 1444              	jpeg_size:
 1445 0000 00000000 		.space	4
 1446              		.section	.bss.ssdv_image_id,"aw",%nobits
 1447              		.set	.LANCHOR1,. + 0
 1450              	ssdv_image_id:
 1451 0000 00       		.space	1
 1452              		.section	.bss.ssdv_packets_in_image,"aw",%nobits
 1453              		.align	2
 1454              		.set	.LANCHOR4,. + 0
 1457              	ssdv_packets_in_image:
 1458 0000 00000000 		.space	4
 1459              		.section	.bss.ssdv_start_addr,"aw",%nobits
 1460              		.align	2
 1463              	ssdv_start_addr:
 1464 0000 00000000 		.space	4
 1465              		.section	.bss.ssdv_type,"aw",%nobits
 1466              		.set	.LANCHOR0,. + 0
 1469              	ssdv_type:
 1470 0000 00       		.space	1
 1471              		.section	.data.ssdv_call_sign,"aw"
 1472              		.align	2
 1473              		.set	.LANCHOR2,. + 0
ARM GAS  /tmp/ccDAW1IQ.s 			page 36


 1476              	ssdv_call_sign:
 1477 0000 43414C53 		.ascii	"CALSIGN"
 1477      49474E
 1478              		.section	.data.ssdv_quality,"aw"
 1479              		.set	.LANCHOR3,. + 0
 1482              	ssdv_quality:
 1483 0000 04       		.byte	4
 1484              		.text
 1485              	.Letext0:
 1486              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 1487              		.file 3 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1488              		.file 4 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 1489              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1490              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1491              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1492              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1493              		.file 9 "libs/ssdv/ssdv.h"
 1494              		.file 10 "libs/camera/camera.h"
 1495              		.file 11 "Core/Inc/i2c_slave.h"
 1496              		.file 12 "libs/flash/flash.h"
 1497              		.file 13 "/usr/include/newlib/stdio.h"
 1498              		.file 14 "<built-in>"
 1499              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  /tmp/ccDAW1IQ.s 			page 37


DEFINED SYMBOLS
                            *ABS*:0000000000000000 camera.c
     /tmp/ccDAW1IQ.s:16     .text.arducam_write_register:0000000000000000 $t
     /tmp/ccDAW1IQ.s:24     .text.arducam_write_register:0000000000000000 arducam_write_register
     /tmp/ccDAW1IQ.s:79     .text.arducam_write_register:0000000000000038 $d
     /tmp/ccDAW1IQ.s:85     .text.arducam_read_register:0000000000000000 $t
     /tmp/ccDAW1IQ.s:92     .text.arducam_read_register:0000000000000000 arducam_read_register
     /tmp/ccDAW1IQ.s:149    .text.arducam_read_register:0000000000000040 $d
     /tmp/ccDAW1IQ.s:155    .text.arducam_burst_read:0000000000000000 $t
     /tmp/ccDAW1IQ.s:162    .text.arducam_burst_read:0000000000000000 arducam_burst_read
     /tmp/ccDAW1IQ.s:293    .text.arducam_burst_read:0000000000000090 $d
     /tmp/ccDAW1IQ.s:299    .text.camersSetBrightness:0000000000000000 $t
     /tmp/ccDAW1IQ.s:306    .text.camersSetBrightness:0000000000000000 camersSetBrightness
     /tmp/ccDAW1IQ.s:332    .text.cameraSetSharpness:0000000000000000 $t
     /tmp/ccDAW1IQ.s:339    .text.cameraSetSharpness:0000000000000000 cameraSetSharpness
     /tmp/ccDAW1IQ.s:365    .text.cameraSetContrast:0000000000000000 $t
     /tmp/ccDAW1IQ.s:372    .text.cameraSetContrast:0000000000000000 cameraSetContrast
     /tmp/ccDAW1IQ.s:398    .text.cameraSetEV:0000000000000000 $t
     /tmp/ccDAW1IQ.s:405    .text.cameraSetEV:0000000000000000 cameraSetEV
     /tmp/ccDAW1IQ.s:431    .text.cameraSetSaturation:0000000000000000 $t
     /tmp/ccDAW1IQ.s:438    .text.cameraSetSaturation:0000000000000000 cameraSetSaturation
     /tmp/ccDAW1IQ.s:464    .text.cameraSetColorEffect:0000000000000000 $t
     /tmp/ccDAW1IQ.s:471    .text.cameraSetColorEffect:0000000000000000 cameraSetColorEffect
     /tmp/ccDAW1IQ.s:497    .rodata.arducam_set_jpeg_mode.str1.4:0000000000000000 $d
     /tmp/ccDAW1IQ.s:516    .text.arducam_set_jpeg_mode:0000000000000000 $t
     /tmp/ccDAW1IQ.s:523    .text.arducam_set_jpeg_mode:0000000000000000 arducam_set_jpeg_mode
     /tmp/ccDAW1IQ.s:642    .text.arducam_set_jpeg_mode:00000000000000a8 $d
     /tmp/ccDAW1IQ.s:659    .text.arducam_capture_image:0000000000000000 $t
     /tmp/ccDAW1IQ.s:666    .text.arducam_capture_image:0000000000000000 arducam_capture_image
     /tmp/ccDAW1IQ.s:701    .rodata.find_jpeg.str1.4:0000000000000000 $d
     /tmp/ccDAW1IQ.s:705    .text.find_jpeg:0000000000000000 $t
     /tmp/ccDAW1IQ.s:712    .text.find_jpeg:0000000000000000 find_jpeg
     /tmp/ccDAW1IQ.s:856    .text.find_jpeg:000000000000006c $d
     /tmp/ccDAW1IQ.s:861    .rodata.process_image_capture.str1.4:0000000000000000 $d
     /tmp/ccDAW1IQ.s:909    .text.process_image_capture:0000000000000000 $t
     /tmp/ccDAW1IQ.s:916    .text.process_image_capture:0000000000000000 process_image_capture
     /tmp/ccDAW1IQ.s:1398   .text.process_image_capture:00000000000001e4 $d
     /tmp/ccDAW1IQ.s:1438   .bss.image_buffer:0000000000000000 image_buffer
     /tmp/ccDAW1IQ.s:1482   .data.ssdv_quality:0000000000000000 ssdv_quality
     /tmp/ccDAW1IQ.s:1450   .bss.ssdv_image_id:0000000000000000 ssdv_image_id
     /tmp/ccDAW1IQ.s:1476   .data.ssdv_call_sign:0000000000000000 ssdv_call_sign
     /tmp/ccDAW1IQ.s:1469   .bss.ssdv_type:0000000000000000 ssdv_type
     /tmp/ccDAW1IQ.s:1463   .bss.ssdv_start_addr:0000000000000000 ssdv_start_addr
     /tmp/ccDAW1IQ.s:1457   .bss.ssdv_packets_in_image:0000000000000000 ssdv_packets_in_image
     /tmp/ccDAW1IQ.s:1444   .bss.jpeg_size:0000000000000000 jpeg_size
     /tmp/ccDAW1IQ.s:1435   .bss.image_buffer:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1441   .bss.jpeg_size:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1451   .bss.ssdv_image_id:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1453   .bss.ssdv_packets_in_image:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1460   .bss.ssdv_start_addr:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1470   .bss.ssdv_type:0000000000000000 $d
     /tmp/ccDAW1IQ.s:1472   .data.ssdv_call_sign:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi1
ARM GAS  /tmp/ccDAW1IQ.s 			page 38


HAL_SPI_TransmitReceive
HAL_Delay
printf
cam_size
lvl
saturation_lvl
exposure_lvl
contra_lvl
shrp_lvl
effect
puts
ssdv_enc_init
ssdv_enc_set_buffer
flash_init
flash_read_id
flash_erase_sector
flash_write_buffer
ssdv_enc_get_packet
ssdv_enc_feed
putchar
memset
flash_read_buffer
current_packet_index
send_all_packets
prestore_image_requested
