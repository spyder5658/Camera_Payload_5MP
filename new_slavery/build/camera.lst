ARM GAS  /tmp/ccUAQnId.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"camera.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.arducam_write_register,"ax",%progbits
  16              		.align	1
  17              		.global	arducam_write_register
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	arducam_write_register:
  25              	.LVL0:
  26              	.LFB68:
  27              		.file 1 "Core/Src/camera.c"
   1:Core/Src/camera.c **** #include "camera.h"
   2:Core/Src/camera.c **** #include "i2c_slave.h"
   3:Core/Src/camera.c **** 
   4:Core/Src/camera.c **** 
   5:Core/Src/camera.c **** uint8_t image_buffer[MAX_IMAGE_SIZE]={0};
   6:Core/Src/camera.c **** 
   7:Core/Src/camera.c **** #define JPEG_SOI 0xFFD8  // Start Of Image
   8:Core/Src/camera.c **** #define JPEG_EOI 0xFFD9  // End Of Image
   9:Core/Src/camera.c **** uint32_t jpeg_size = 0;
  10:Core/Src/camera.c **** 
  11:Core/Src/camera.c **** 
  12:Core/Src/camera.c **** uint32_t ssdv_packets_in_image = 0;
  13:Core/Src/camera.c **** uint32_t ssdv_start_addr = 0; 
  14:Core/Src/camera.c **** 
  15:Core/Src/camera.c **** /* USER CODE BEGIN PD */
  16:Core/Src/camera.c **** extern SPI_HandleTypeDef hspi1;
  17:Core/Src/camera.c **** char ssdv_type = SSDV_TYPE_NORMAL;
  18:Core/Src/camera.c **** char ssdv_call_sign[7] = "CALSIGN";
  19:Core/Src/camera.c **** uint8_t ssdv_image_id = 0;
  20:Core/Src/camera.c **** int8_t ssdv_quality = 4;
  21:Core/Src/camera.c **** 
  22:Core/Src/camera.c **** 
  23:Core/Src/camera.c **** void arducam_write_register(uint8_t reg, uint8_t value) {
  28              		.loc 1 23 57 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 8
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 23 57 is_stmt 0 view .LVU1
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccUAQnId.s 			page 2


  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 82B0     		sub	sp, sp, #8
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 16
  24:Core/Src/camera.c ****     uint8_t tx_buf[2] = {reg | 0x80, value};
  41              		.loc 1 24 5 is_stmt 1 view .LVU2
  42              		.loc 1 24 13 is_stmt 0 view .LVU3
  43 0004 60F07F00 		orn	r0, r0, #127
  44              	.LVL1:
  45              		.loc 1 24 13 view .LVU4
  46 0008 8DF80400 		strb	r0, [sp, #4]
  47 000c 8DF80510 		strb	r1, [sp, #5]
  25:Core/Src/camera.c ****     CS_LOW(); // Assert CS
  48              		.loc 1 25 5 is_stmt 1 view .LVU5
  49 0010 094C     		ldr	r4, .L3
  50 0012 0022     		movs	r2, #0
  51 0014 1021     		movs	r1, #16
  52              	.LVL2:
  53              		.loc 1 25 5 is_stmt 0 view .LVU6
  54 0016 2046     		mov	r0, r4
  55 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
  56              	.LVL3:
  26:Core/Src/camera.c ****     HAL_SPI_Transmit(&hspi1, tx_buf, 2, HAL_MAX_DELAY);
  57              		.loc 1 26 5 is_stmt 1 view .LVU7
  58 001c 4FF0FF33 		mov	r3, #-1
  59 0020 0222     		movs	r2, #2
  60 0022 01A9     		add	r1, sp, #4
  61 0024 0548     		ldr	r0, .L3+4
  62 0026 FFF7FEFF 		bl	HAL_SPI_Transmit
  63              	.LVL4:
  27:Core/Src/camera.c ****     CS_HIGH();
  64              		.loc 1 27 5 view .LVU8
  65 002a 0122     		movs	r2, #1
  66 002c 1021     		movs	r1, #16
  67 002e 2046     		mov	r0, r4
  68 0030 FFF7FEFF 		bl	HAL_GPIO_WritePin
  69              	.LVL5:
  28:Core/Src/camera.c **** }
  70              		.loc 1 28 1 is_stmt 0 view .LVU9
  71 0034 02B0     		add	sp, sp, #8
  72              	.LCFI2:
  73              		.cfi_def_cfa_offset 8
  74              		@ sp needed
  75 0036 10BD     		pop	{r4, pc}
  76              	.L4:
  77              		.align	2
  78              	.L3:
  79 0038 00080140 		.word	1073809408
  80 003c 00000000 		.word	hspi1
  81              		.cfi_endproc
  82              	.LFE68:
  84              		.section	.text.arducam_read_register,"ax",%progbits
  85              		.align	1
  86              		.global	arducam_read_register
  87              		.syntax unified
  88              		.thumb
ARM GAS  /tmp/ccUAQnId.s 			page 3


  89              		.thumb_func
  90              		.fpu softvfp
  92              	arducam_read_register:
  93              	.LVL6:
  94              	.LFB69:
  29:Core/Src/camera.c **** 
  30:Core/Src/camera.c **** uint8_t arducam_read_register(uint8_t reg) {
  95              		.loc 1 30 44 is_stmt 1 view -0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 8
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  99              		.loc 1 30 44 is_stmt 0 view .LVU11
 100 0000 10B5     		push	{r4, lr}
 101              	.LCFI3:
 102              		.cfi_def_cfa_offset 8
 103              		.cfi_offset 4, -8
 104              		.cfi_offset 14, -4
 105 0002 84B0     		sub	sp, sp, #16
 106              	.LCFI4:
 107              		.cfi_def_cfa_offset 24
  31:Core/Src/camera.c ****     uint8_t tx_buf[2] = {reg & 0x7F, 0x00}; // Second byte is dummy
 108              		.loc 1 31 5 is_stmt 1 view .LVU12
 109              		.loc 1 31 30 is_stmt 0 view .LVU13
 110 0004 00F07F00 		and	r0, r0, #127
 111              	.LVL7:
 112              		.loc 1 31 13 view .LVU14
 113 0008 8DF80C00 		strb	r0, [sp, #12]
 114 000c 0022     		movs	r2, #0
 115 000e 8DF80D20 		strb	r2, [sp, #13]
  32:Core/Src/camera.c ****     uint8_t rx_buf[2];
 116              		.loc 1 32 5 is_stmt 1 view .LVU15
  33:Core/Src/camera.c ****     CS_LOW(); // Assert CS
 117              		.loc 1 33 5 view .LVU16
 118 0012 0B4C     		ldr	r4, .L7
 119 0014 1021     		movs	r1, #16
 120 0016 2046     		mov	r0, r4
 121 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 122              	.LVL8:
  34:Core/Src/camera.c ****     HAL_SPI_TransmitReceive(&hspi1, tx_buf, rx_buf, 2, HAL_MAX_DELAY);
 123              		.loc 1 34 5 view .LVU17
 124 001c 4FF0FF33 		mov	r3, #-1
 125 0020 0093     		str	r3, [sp]
 126 0022 0223     		movs	r3, #2
 127 0024 02AA     		add	r2, sp, #8
 128 0026 03A9     		add	r1, sp, #12
 129 0028 0648     		ldr	r0, .L7+4
 130 002a FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 131              	.LVL9:
  35:Core/Src/camera.c ****     CS_HIGH(); // Assert CS
 132              		.loc 1 35 5 view .LVU18
 133 002e 0122     		movs	r2, #1
 134 0030 1021     		movs	r1, #16
 135 0032 2046     		mov	r0, r4
 136 0034 FFF7FEFF 		bl	HAL_GPIO_WritePin
 137              	.LVL10:
  36:Core/Src/camera.c **** 
  37:Core/Src/camera.c ****     return rx_buf[1]; // Received data
ARM GAS  /tmp/ccUAQnId.s 			page 4


 138              		.loc 1 37 5 view .LVU19
  38:Core/Src/camera.c **** }
 139              		.loc 1 38 1 is_stmt 0 view .LVU20
 140 0038 9DF80900 		ldrb	r0, [sp, #9]	@ zero_extendqisi2
 141 003c 04B0     		add	sp, sp, #16
 142              	.LCFI5:
 143              		.cfi_def_cfa_offset 8
 144              		@ sp needed
 145 003e 10BD     		pop	{r4, pc}
 146              	.L8:
 147              		.align	2
 148              	.L7:
 149 0040 00080140 		.word	1073809408
 150 0044 00000000 		.word	hspi1
 151              		.cfi_endproc
 152              	.LFE69:
 154              		.section	.text.arducam_burst_read,"ax",%progbits
 155              		.align	1
 156              		.global	arducam_burst_read
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu softvfp
 162              	arducam_burst_read:
 163              	.LVL11:
 164              	.LFB70:
  39:Core/Src/camera.c **** 
  40:Core/Src/camera.c **** 
  41:Core/Src/camera.c **** 
  42:Core/Src/camera.c **** // Burst read from FIFO
  43:Core/Src/camera.c **** uint32_t arducam_burst_read(uint8_t *buf, uint32_t max_len) {
 165              		.loc 1 43 61 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 8
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		.loc 1 43 61 is_stmt 0 view .LVU22
 170 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 171              	.LCFI6:
 172              		.cfi_def_cfa_offset 20
 173              		.cfi_offset 4, -20
 174              		.cfi_offset 5, -16
 175              		.cfi_offset 6, -12
 176              		.cfi_offset 7, -8
 177              		.cfi_offset 14, -4
 178 0002 83B0     		sub	sp, sp, #12
 179              	.LCFI7:
 180              		.cfi_def_cfa_offset 32
 181 0004 0646     		mov	r6, r0
 182 0006 0C46     		mov	r4, r1
  44:Core/Src/camera.c ****     uint8_t burst_cmd = 0x3C; // Burst read register
 183              		.loc 1 44 5 is_stmt 1 view .LVU23
 184              		.loc 1 44 13 is_stmt 0 view .LVU24
 185 0008 3C23     		movs	r3, #60
 186 000a 8DF80730 		strb	r3, [sp, #7]
  45:Core/Src/camera.c ****     CS_LOW();
 187              		.loc 1 45 5 is_stmt 1 view .LVU25
 188 000e 144F     		ldr	r7, .L11
ARM GAS  /tmp/ccUAQnId.s 			page 5


 189 0010 0022     		movs	r2, #0
 190 0012 1021     		movs	r1, #16
 191              	.LVL12:
 192              		.loc 1 45 5 is_stmt 0 view .LVU26
 193 0014 3846     		mov	r0, r7
 194              	.LVL13:
 195              		.loc 1 45 5 view .LVU27
 196 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 197              	.LVL14:
  46:Core/Src/camera.c ****     HAL_SPI_Transmit(&hspi1, &burst_cmd, 1, HAL_MAX_DELAY);
 198              		.loc 1 46 5 is_stmt 1 view .LVU28
 199 001a 124D     		ldr	r5, .L11+4
 200 001c 4FF0FF33 		mov	r3, #-1
 201 0020 0122     		movs	r2, #1
 202 0022 0DF10701 		add	r1, sp, #7
 203 0026 2846     		mov	r0, r5
 204 0028 FFF7FEFF 		bl	HAL_SPI_Transmit
 205              	.LVL15:
  47:Core/Src/camera.c ****     uint8_t dummy = 0x00;
 206              		.loc 1 47 5 view .LVU29
 207              		.loc 1 47 13 is_stmt 0 view .LVU30
 208 002c 0023     		movs	r3, #0
 209 002e 8DF80630 		strb	r3, [sp, #6]
  48:Core/Src/camera.c ****     HAL_SPI_Transmit(&hspi1, &dummy, 1, HAL_MAX_DELAY); // First dummy byte
 210              		.loc 1 48 5 is_stmt 1 view .LVU31
 211 0032 4FF0FF33 		mov	r3, #-1
 212 0036 0122     		movs	r2, #1
 213 0038 0DF10601 		add	r1, sp, #6
 214 003c 2846     		mov	r0, r5
 215 003e FFF7FEFF 		bl	HAL_SPI_Transmit
 216              	.LVL16:
  49:Core/Src/camera.c **** 
  50:Core/Src/camera.c ****     HAL_SPI_Receive(&hspi1, buf, max_len, HAL_MAX_DELAY);
 217              		.loc 1 50 5 view .LVU32
 218 0042 4FF0FF33 		mov	r3, #-1
 219 0046 A2B2     		uxth	r2, r4
 220 0048 3146     		mov	r1, r6
 221 004a 2846     		mov	r0, r5
 222 004c FFF7FEFF 		bl	HAL_SPI_Receive
 223              	.LVL17:
  51:Core/Src/camera.c ****     CS_HIGH();
 224              		.loc 1 51 5 view .LVU33
 225 0050 0122     		movs	r2, #1
 226 0052 1021     		movs	r1, #16
 227 0054 3846     		mov	r0, r7
 228 0056 FFF7FEFF 		bl	HAL_GPIO_WritePin
 229              	.LVL18:
  52:Core/Src/camera.c ****     return max_len;
 230              		.loc 1 52 5 view .LVU34
  53:Core/Src/camera.c **** }
 231              		.loc 1 53 1 is_stmt 0 view .LVU35
 232 005a 2046     		mov	r0, r4
 233 005c 03B0     		add	sp, sp, #12
 234              	.LCFI8:
 235              		.cfi_def_cfa_offset 20
 236              		@ sp needed
 237 005e F0BD     		pop	{r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccUAQnId.s 			page 6


 238              	.LVL19:
 239              	.L12:
 240              		.loc 1 53 1 view .LVU36
 241              		.align	2
 242              	.L11:
 243 0060 00080140 		.word	1073809408
 244 0064 00000000 		.word	hspi1
 245              		.cfi_endproc
 246              	.LFE70:
 248              		.section	.text.camersSetBrightness,"ax",%progbits
 249              		.align	1
 250              		.global	camersSetBrightness
 251              		.syntax unified
 252              		.thumb
 253              		.thumb_func
 254              		.fpu softvfp
 256              	camersSetBrightness:
 257              	.LVL20:
 258              	.LFB71:
  54:Core/Src/camera.c **** 
  55:Core/Src/camera.c **** 
  56:Core/Src/camera.c **** void camersSetBrightness(CAM_BRIGHTNESS_LEVEL level )
  57:Core/Src/camera.c **** {
 259              		.loc 1 57 1 is_stmt 1 view -0
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 0
 262              		@ frame_needed = 0, uses_anonymous_args = 0
 263              		.loc 1 57 1 is_stmt 0 view .LVU38
 264 0000 08B5     		push	{r3, lr}
 265              	.LCFI9:
 266              		.cfi_def_cfa_offset 8
 267              		.cfi_offset 3, -8
 268              		.cfi_offset 14, -4
 269 0002 0146     		mov	r1, r0
  58:Core/Src/camera.c ****   arducam_write_register(0x22,level);
 270              		.loc 1 58 3 is_stmt 1 view .LVU39
 271 0004 2220     		movs	r0, #34
 272              	.LVL21:
 273              		.loc 1 58 3 is_stmt 0 view .LVU40
 274 0006 FFF7FEFF 		bl	arducam_write_register
 275              	.LVL22:
  59:Core/Src/camera.c **** }
 276              		.loc 1 59 1 view .LVU41
 277 000a 08BD     		pop	{r3, pc}
 278              		.cfi_endproc
 279              	.LFE71:
 281              		.section	.text.cameraSetSharpness,"ax",%progbits
 282              		.align	1
 283              		.global	cameraSetSharpness
 284              		.syntax unified
 285              		.thumb
 286              		.thumb_func
 287              		.fpu softvfp
 289              	cameraSetSharpness:
 290              	.LVL23:
 291              	.LFB72:
  60:Core/Src/camera.c **** 
ARM GAS  /tmp/ccUAQnId.s 			page 7


  61:Core/Src/camera.c **** void cameraSetSharpness(CAM_SHARPNESS_LEVEL level)
  62:Core/Src/camera.c **** {
 292              		.loc 1 62 1 is_stmt 1 view -0
 293              		.cfi_startproc
 294              		@ args = 0, pretend = 0, frame = 0
 295              		@ frame_needed = 0, uses_anonymous_args = 0
 296              		.loc 1 62 1 is_stmt 0 view .LVU43
 297 0000 08B5     		push	{r3, lr}
 298              	.LCFI10:
 299              		.cfi_def_cfa_offset 8
 300              		.cfi_offset 3, -8
 301              		.cfi_offset 14, -4
 302 0002 0146     		mov	r1, r0
  63:Core/Src/camera.c ****   arducam_write_register(0x28,level);
 303              		.loc 1 63 3 is_stmt 1 view .LVU44
 304 0004 2820     		movs	r0, #40
 305              	.LVL24:
 306              		.loc 1 63 3 is_stmt 0 view .LVU45
 307 0006 FFF7FEFF 		bl	arducam_write_register
 308              	.LVL25:
  64:Core/Src/camera.c **** 
  65:Core/Src/camera.c **** }
 309              		.loc 1 65 1 view .LVU46
 310 000a 08BD     		pop	{r3, pc}
 311              		.cfi_endproc
 312              	.LFE72:
 314              		.section	.text.cameraSetContrast,"ax",%progbits
 315              		.align	1
 316              		.global	cameraSetContrast
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 320              		.fpu softvfp
 322              	cameraSetContrast:
 323              	.LVL26:
 324              	.LFB73:
  66:Core/Src/camera.c **** 
  67:Core/Src/camera.c **** void cameraSetContrast (CAM_CONTRAST_LEVEL level)
  68:Core/Src/camera.c **** {
 325              		.loc 1 68 1 is_stmt 1 view -0
 326              		.cfi_startproc
 327              		@ args = 0, pretend = 0, frame = 0
 328              		@ frame_needed = 0, uses_anonymous_args = 0
 329              		.loc 1 68 1 is_stmt 0 view .LVU48
 330 0000 08B5     		push	{r3, lr}
 331              	.LCFI11:
 332              		.cfi_def_cfa_offset 8
 333              		.cfi_offset 3, -8
 334              		.cfi_offset 14, -4
 335 0002 0146     		mov	r1, r0
  69:Core/Src/camera.c ****   arducam_write_register(0x23,level);
 336              		.loc 1 69 3 is_stmt 1 view .LVU49
 337 0004 2320     		movs	r0, #35
 338              	.LVL27:
 339              		.loc 1 69 3 is_stmt 0 view .LVU50
 340 0006 FFF7FEFF 		bl	arducam_write_register
 341              	.LVL28:
ARM GAS  /tmp/ccUAQnId.s 			page 8


  70:Core/Src/camera.c **** }
 342              		.loc 1 70 1 view .LVU51
 343 000a 08BD     		pop	{r3, pc}
 344              		.cfi_endproc
 345              	.LFE73:
 347              		.section	.text.cameraSetEV,"ax",%progbits
 348              		.align	1
 349              		.global	cameraSetEV
 350              		.syntax unified
 351              		.thumb
 352              		.thumb_func
 353              		.fpu softvfp
 355              	cameraSetEV:
 356              	.LVL29:
 357              	.LFB74:
  71:Core/Src/camera.c **** 
  72:Core/Src/camera.c **** void cameraSetEV (CAM_EV_LEVEL level)
  73:Core/Src/camera.c **** {
 358              		.loc 1 73 1 is_stmt 1 view -0
 359              		.cfi_startproc
 360              		@ args = 0, pretend = 0, frame = 0
 361              		@ frame_needed = 0, uses_anonymous_args = 0
 362              		.loc 1 73 1 is_stmt 0 view .LVU53
 363 0000 08B5     		push	{r3, lr}
 364              	.LCFI12:
 365              		.cfi_def_cfa_offset 8
 366              		.cfi_offset 3, -8
 367              		.cfi_offset 14, -4
 368 0002 0146     		mov	r1, r0
  74:Core/Src/camera.c ****   arducam_write_register(0x25,level);
 369              		.loc 1 74 3 is_stmt 1 view .LVU54
 370 0004 2520     		movs	r0, #37
 371              	.LVL30:
 372              		.loc 1 74 3 is_stmt 0 view .LVU55
 373 0006 FFF7FEFF 		bl	arducam_write_register
 374              	.LVL31:
  75:Core/Src/camera.c **** 
  76:Core/Src/camera.c **** }
 375              		.loc 1 76 1 view .LVU56
 376 000a 08BD     		pop	{r3, pc}
 377              		.cfi_endproc
 378              	.LFE74:
 380              		.section	.text.cameraSetSaturation,"ax",%progbits
 381              		.align	1
 382              		.global	cameraSetSaturation
 383              		.syntax unified
 384              		.thumb
 385              		.thumb_func
 386              		.fpu softvfp
 388              	cameraSetSaturation:
 389              	.LVL32:
 390              	.LFB75:
  77:Core/Src/camera.c **** 
  78:Core/Src/camera.c **** void cameraSetSaturation (CAM_STAURATION_LEVEL level)
  79:Core/Src/camera.c **** {
 391              		.loc 1 79 1 is_stmt 1 view -0
 392              		.cfi_startproc
ARM GAS  /tmp/ccUAQnId.s 			page 9


 393              		@ args = 0, pretend = 0, frame = 0
 394              		@ frame_needed = 0, uses_anonymous_args = 0
 395              		.loc 1 79 1 is_stmt 0 view .LVU58
 396 0000 08B5     		push	{r3, lr}
 397              	.LCFI13:
 398              		.cfi_def_cfa_offset 8
 399              		.cfi_offset 3, -8
 400              		.cfi_offset 14, -4
 401 0002 0146     		mov	r1, r0
  80:Core/Src/camera.c ****   arducam_write_register(0x24,level);
 402              		.loc 1 80 3 is_stmt 1 view .LVU59
 403 0004 2420     		movs	r0, #36
 404              	.LVL33:
 405              		.loc 1 80 3 is_stmt 0 view .LVU60
 406 0006 FFF7FEFF 		bl	arducam_write_register
 407              	.LVL34:
  81:Core/Src/camera.c **** 
  82:Core/Src/camera.c **** }
 408              		.loc 1 82 1 view .LVU61
 409 000a 08BD     		pop	{r3, pc}
 410              		.cfi_endproc
 411              	.LFE75:
 413              		.section	.text.cameraSetColorEffect,"ax",%progbits
 414              		.align	1
 415              		.global	cameraSetColorEffect
 416              		.syntax unified
 417              		.thumb
 418              		.thumb_func
 419              		.fpu softvfp
 421              	cameraSetColorEffect:
 422              	.LVL35:
 423              	.LFB76:
  83:Core/Src/camera.c **** 
  84:Core/Src/camera.c **** void cameraSetColorEffect (CAM_COLOR_FX effect)
  85:Core/Src/camera.c **** {
 424              		.loc 1 85 1 is_stmt 1 view -0
 425              		.cfi_startproc
 426              		@ args = 0, pretend = 0, frame = 0
 427              		@ frame_needed = 0, uses_anonymous_args = 0
 428              		.loc 1 85 1 is_stmt 0 view .LVU63
 429 0000 08B5     		push	{r3, lr}
 430              	.LCFI14:
 431              		.cfi_def_cfa_offset 8
 432              		.cfi_offset 3, -8
 433              		.cfi_offset 14, -4
 434 0002 0146     		mov	r1, r0
  86:Core/Src/camera.c ****   arducam_write_register(0x27,effect);
 435              		.loc 1 86 3 is_stmt 1 view .LVU64
 436 0004 2720     		movs	r0, #39
 437              	.LVL36:
 438              		.loc 1 86 3 is_stmt 0 view .LVU65
 439 0006 FFF7FEFF 		bl	arducam_write_register
 440              	.LVL37:
  87:Core/Src/camera.c **** 
  88:Core/Src/camera.c **** }
 441              		.loc 1 88 1 view .LVU66
 442 000a 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccUAQnId.s 			page 10


 443              		.cfi_endproc
 444              	.LFE76:
 446              		.section	.rodata.arducam_set_jpeg_mode.str1.4,"aMS",%progbits,1
 447              		.align	2
 448              	.LC0:
 449 0000 62726967 		.ascii	"brighness level:%i \012\000"
 449      686E6573 
 449      73206C65 
 449      76656C3A 
 449      2569200A 
 450 0015 000000   		.align	2
 451              	.LC1:
 452 0018 73617475 		.ascii	"saturation level:%i \012\000"
 452      72617469 
 452      6F6E206C 
 452      6576656C 
 452      3A256920 
 453 002e 0000     		.align	2
 454              	.LC2:
 455 0030 6578706F 		.ascii	"exposure level:%i \012\000"
 455      73757265 
 455      206C6576 
 455      656C3A25 
 455      69200A00 
 456              		.align	2
 457              	.LC3:
 458 0044 636F6E74 		.ascii	"contrast level:%i \012\000"
 458      72617374 
 458      206C6576 
 458      656C3A25 
 458      69200A00 
 459              		.align	2
 460              	.LC4:
 461 0058 73686172 		.ascii	"sharpness level:%i \012\000"
 461      706E6573 
 461      73206C65 
 461      76656C3A 
 461      2569200A 
 462 006d 000000   		.align	2
 463              	.LC5:
 464 0070 65666665 		.ascii	"effect:%i \012\000"
 464      63743A25 
 464      69200A00 
 465              		.section	.text.arducam_set_jpeg_mode,"ax",%progbits
 466              		.align	1
 467              		.global	arducam_set_jpeg_mode
 468              		.syntax unified
 469              		.thumb
 470              		.thumb_func
 471              		.fpu softvfp
 473              	arducam_set_jpeg_mode:
 474              	.LFB77:
  89:Core/Src/camera.c **** 
  90:Core/Src/camera.c **** void arducam_set_jpeg_mode() {
 475              		.loc 1 90 30 is_stmt 1 view -0
 476              		.cfi_startproc
 477              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccUAQnId.s 			page 11


 478              		@ frame_needed = 0, uses_anonymous_args = 0
 479 0000 10B5     		push	{r4, lr}
 480              	.LCFI15:
 481              		.cfi_def_cfa_offset 8
 482              		.cfi_offset 4, -8
 483              		.cfi_offset 14, -4
  91:Core/Src/camera.c ****     // Write JPEG basic configuration to register 0x20
  92:Core/Src/camera.c ****     arducam_write_register(0x20, 0x01);  // JPEG mode
 484              		.loc 1 92 5 view .LVU68
 485 0002 0121     		movs	r1, #1
 486 0004 2020     		movs	r0, #32
 487 0006 FFF7FEFF 		bl	arducam_write_register
 488              	.LVL38:
  93:Core/Src/camera.c ****     HAL_Delay(10);  // Small delay for settings to apply
 489              		.loc 1 93 5 view .LVU69
 490 000a 0A20     		movs	r0, #10
 491 000c FFF7FEFF 		bl	HAL_Delay
 492              	.LVL39:
  94:Core/Src/camera.c **** 
  95:Core/Src/camera.c ****      // 2. Set resolution to 320x240
  96:Core/Src/camera.c ****     arducam_write_register(0x21, 0x01);  // Resolution = 320x240
 493              		.loc 1 96 5 view .LVU70
 494 0010 0121     		movs	r1, #1
 495 0012 2120     		movs	r0, #33
 496 0014 FFF7FEFF 		bl	arducam_write_register
 497              	.LVL40:
  97:Core/Src/camera.c ****     HAL_Delay(10);
 498              		.loc 1 97 5 view .LVU71
 499 0018 0A20     		movs	r0, #10
 500 001a FFF7FEFF 		bl	HAL_Delay
 501              	.LVL41:
  98:Core/Src/camera.c **** 
  99:Core/Src/camera.c ****     camersSetBrightness(lvl);
 502              		.loc 1 99 5 view .LVU72
 503 001e 214C     		ldr	r4, .L27
 504 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 505 0022 FFF7FEFF 		bl	camersSetBrightness
 506              	.LVL42:
 100:Core/Src/camera.c ****     printf("brighness level:%i \n" ,lvl);
 507              		.loc 1 100 5 view .LVU73
 508 0026 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 509 0028 1F48     		ldr	r0, .L27+4
 510 002a FFF7FEFF 		bl	printf
 511              	.LVL43:
 101:Core/Src/camera.c ****     HAL_Delay(10);
 512              		.loc 1 101 5 view .LVU74
 513 002e 0A20     		movs	r0, #10
 514 0030 FFF7FEFF 		bl	HAL_Delay
 515              	.LVL44:
 102:Core/Src/camera.c **** 
 103:Core/Src/camera.c ****     cameraSetSaturation(saturation_lvl);
 516              		.loc 1 103 5 view .LVU75
 517 0034 1D4C     		ldr	r4, .L27+8
 518 0036 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 519 0038 FFF7FEFF 		bl	cameraSetSaturation
 520              	.LVL45:
 104:Core/Src/camera.c ****     printf("saturation level:%i \n" ,saturation_lvl);
ARM GAS  /tmp/ccUAQnId.s 			page 12


 521              		.loc 1 104 5 view .LVU76
 522 003c 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 523 003e 1C48     		ldr	r0, .L27+12
 524 0040 FFF7FEFF 		bl	printf
 525              	.LVL46:
 105:Core/Src/camera.c **** 
 106:Core/Src/camera.c ****     HAL_Delay(10);
 526              		.loc 1 106 5 view .LVU77
 527 0044 0A20     		movs	r0, #10
 528 0046 FFF7FEFF 		bl	HAL_Delay
 529              	.LVL47:
 107:Core/Src/camera.c **** 
 108:Core/Src/camera.c ****     cameraSetEV(exposure_lvl);
 530              		.loc 1 108 5 view .LVU78
 531 004a 1A4C     		ldr	r4, .L27+16
 532 004c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 533 004e FFF7FEFF 		bl	cameraSetEV
 534              	.LVL48:
 109:Core/Src/camera.c ****     printf("exposure level:%i \n" ,exposure_lvl);
 535              		.loc 1 109 5 view .LVU79
 536 0052 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 537 0054 1848     		ldr	r0, .L27+20
 538 0056 FFF7FEFF 		bl	printf
 539              	.LVL49:
 110:Core/Src/camera.c **** 
 111:Core/Src/camera.c ****     HAL_Delay(10);
 540              		.loc 1 111 5 view .LVU80
 541 005a 0A20     		movs	r0, #10
 542 005c FFF7FEFF 		bl	HAL_Delay
 543              	.LVL50:
 112:Core/Src/camera.c **** 
 113:Core/Src/camera.c ****     cameraSetContrast(contra_lvl);
 544              		.loc 1 113 5 view .LVU81
 545 0060 164C     		ldr	r4, .L27+24
 546 0062 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 547 0064 FFF7FEFF 		bl	cameraSetContrast
 548              	.LVL51:
 114:Core/Src/camera.c ****     printf("contrast level:%i \n" ,contra_lvl);
 549              		.loc 1 114 5 view .LVU82
 550 0068 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 551 006a 1548     		ldr	r0, .L27+28
 552 006c FFF7FEFF 		bl	printf
 553              	.LVL52:
 115:Core/Src/camera.c **** 
 116:Core/Src/camera.c ****     HAL_Delay(10);
 554              		.loc 1 116 5 view .LVU83
 555 0070 0A20     		movs	r0, #10
 556 0072 FFF7FEFF 		bl	HAL_Delay
 557              	.LVL53:
 117:Core/Src/camera.c **** 
 118:Core/Src/camera.c ****     cameraSetSharpness(shrp_lvl);
 558              		.loc 1 118 5 view .LVU84
 559 0076 134C     		ldr	r4, .L27+32
 560 0078 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 561 007a FFF7FEFF 		bl	cameraSetSharpness
 562              	.LVL54:
 119:Core/Src/camera.c ****     printf("sharpness level:%i \n" ,shrp_lvl);
ARM GAS  /tmp/ccUAQnId.s 			page 13


 563              		.loc 1 119 5 view .LVU85
 564 007e 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 565 0080 1148     		ldr	r0, .L27+36
 566 0082 FFF7FEFF 		bl	printf
 567              	.LVL55:
 120:Core/Src/camera.c **** 
 121:Core/Src/camera.c ****     HAL_Delay(10);
 568              		.loc 1 121 5 view .LVU86
 569 0086 0A20     		movs	r0, #10
 570 0088 FFF7FEFF 		bl	HAL_Delay
 571              	.LVL56:
 122:Core/Src/camera.c **** 
 123:Core/Src/camera.c ****     cameraSetColorEffect(effect);
 572              		.loc 1 123 5 view .LVU87
 573 008c 0F4C     		ldr	r4, .L27+40
 574 008e 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 575 0090 FFF7FEFF 		bl	cameraSetColorEffect
 576              	.LVL57:
 124:Core/Src/camera.c ****     printf("effect:%i \n" ,effect);
 577              		.loc 1 124 5 view .LVU88
 578 0094 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 579 0096 0E48     		ldr	r0, .L27+44
 580 0098 FFF7FEFF 		bl	printf
 581              	.LVL58:
 125:Core/Src/camera.c ****     HAL_Delay(10);
 582              		.loc 1 125 5 view .LVU89
 583 009c 0A20     		movs	r0, #10
 584 009e FFF7FEFF 		bl	HAL_Delay
 585              	.LVL59:
 126:Core/Src/camera.c **** 
 127:Core/Src/camera.c **** }
 586              		.loc 1 127 1 is_stmt 0 view .LVU90
 587 00a2 10BD     		pop	{r4, pc}
 588              	.L28:
 589              		.align	2
 590              	.L27:
 591 00a4 00000000 		.word	lvl
 592 00a8 00000000 		.word	.LC0
 593 00ac 00000000 		.word	saturation_lvl
 594 00b0 18000000 		.word	.LC1
 595 00b4 00000000 		.word	exposure_lvl
 596 00b8 30000000 		.word	.LC2
 597 00bc 00000000 		.word	contra_lvl
 598 00c0 44000000 		.word	.LC3
 599 00c4 00000000 		.word	shrp_lvl
 600 00c8 58000000 		.word	.LC4
 601 00cc 00000000 		.word	effect
 602 00d0 70000000 		.word	.LC5
 603              		.cfi_endproc
 604              	.LFE77:
 606              		.section	.text.arducam_capture_image,"ax",%progbits
 607              		.align	1
 608              		.global	arducam_capture_image
 609              		.syntax unified
 610              		.thumb
 611              		.thumb_func
 612              		.fpu softvfp
ARM GAS  /tmp/ccUAQnId.s 			page 14


 614              	arducam_capture_image:
 615              	.LFB78:
 128:Core/Src/camera.c **** 
 129:Core/Src/camera.c **** 
 130:Core/Src/camera.c **** // Capture image
 131:Core/Src/camera.c **** void arducam_capture_image() {
 616              		.loc 1 131 30 is_stmt 1 view -0
 617              		.cfi_startproc
 618              		@ args = 0, pretend = 0, frame = 0
 619              		@ frame_needed = 0, uses_anonymous_args = 0
 620 0000 08B5     		push	{r3, lr}
 621              	.LCFI16:
 622              		.cfi_def_cfa_offset 8
 623              		.cfi_offset 3, -8
 624              		.cfi_offset 14, -4
 132:Core/Src/camera.c ****     // 1. Clear FIFO write done flag
 133:Core/Src/camera.c ****     arducam_write_register(0x04, 0x01);
 625              		.loc 1 133 5 view .LVU92
 626 0002 0121     		movs	r1, #1
 627 0004 0420     		movs	r0, #4
 628 0006 FFF7FEFF 		bl	arducam_write_register
 629              	.LVL60:
 134:Core/Src/camera.c ****     HAL_Delay(10);
 630              		.loc 1 134 5 view .LVU93
 631 000a 0A20     		movs	r0, #10
 632 000c FFF7FEFF 		bl	HAL_Delay
 633              	.LVL61:
 135:Core/Src/camera.c **** 
 136:Core/Src/camera.c ****     // 2. Start image capture
 137:Core/Src/camera.c ****     arducam_write_register(0x04, 0x02);
 634              		.loc 1 137 5 view .LVU94
 635 0010 0221     		movs	r1, #2
 636 0012 0420     		movs	r0, #4
 637 0014 FFF7FEFF 		bl	arducam_write_register
 638              	.LVL62:
 138:Core/Src/camera.c ****     HAL_Delay(200);  // Adjust delay as needed
 639              		.loc 1 138 5 view .LVU95
 640 0018 C820     		movs	r0, #200
 641 001a FFF7FEFF 		bl	HAL_Delay
 642              	.LVL63:
 139:Core/Src/camera.c **** 
 140:Core/Src/camera.c ****     // Optional: Wait until FIFO done (polling or timeout)
 141:Core/Src/camera.c ****     // If camera sets flag in 0x01 (frames written), you could poll here
 142:Core/Src/camera.c **** }
 643              		.loc 1 142 1 is_stmt 0 view .LVU96
 644 001e 08BD     		pop	{r3, pc}
 645              		.cfi_endproc
 646              	.LFE78:
 648              		.section	.rodata.find_jpeg.str1.4,"aMS",%progbits,1
 649              		.align	2
 650              	.LC6:
 651 0000 4A504547 		.ascii	"JPEG found: start=%d, end=%d\012\000"
 651      20666F75 
 651      6E643A20 
 651      73746172 
 651      743D2564 
 652              		.section	.text.find_jpeg,"ax",%progbits
ARM GAS  /tmp/ccUAQnId.s 			page 15


 653              		.align	1
 654              		.global	find_jpeg
 655              		.syntax unified
 656              		.thumb
 657              		.thumb_func
 658              		.fpu softvfp
 660              	find_jpeg:
 661              	.LVL64:
 662              	.LFB79:
 143:Core/Src/camera.c **** 
 144:Core/Src/camera.c **** 
 145:Core/Src/camera.c **** uint32_t find_jpeg( uint32_t bytes_read,  uint8_t image_buffer[MAX_IMAGE_SIZE])    
 146:Core/Src/camera.c **** {
 663              		.loc 1 146 1 is_stmt 1 view -0
 664              		.cfi_startproc
 665              		@ args = 0, pretend = 0, frame = 0
 666              		@ frame_needed = 0, uses_anonymous_args = 0
 667              		.loc 1 146 1 is_stmt 0 view .LVU98
 668 0000 38B5     		push	{r3, r4, r5, lr}
 669              	.LCFI17:
 670              		.cfi_def_cfa_offset 16
 671              		.cfi_offset 3, -16
 672              		.cfi_offset 4, -12
 673              		.cfi_offset 5, -8
 674              		.cfi_offset 14, -4
 147:Core/Src/camera.c ****     // Find JPEG start (0xFFD8) and end (0xFFD9)
 148:Core/Src/camera.c ****     uint32_t jpeg_length=0;
 675              		.loc 1 148 5 is_stmt 1 view .LVU99
 676              	.LVL65:
 149:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 677              		.loc 1 149 5 view .LVU100
 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 678              		.loc 1 150 5 view .LVU101
 679              	.LBB2:
 680              		.loc 1 150 10 view .LVU102
 681              		.loc 1 150 19 is_stmt 0 view .LVU103
 682 0002 0023     		movs	r3, #0
 683              	.LBE2:
 149:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 684              		.loc 1 149 9 view .LVU104
 685 0004 4FF0FF35 		mov	r5, #-1
 686              	.LBB3:
 687              		.loc 1 150 5 view .LVU105
 688 0008 02E0     		b	.L32
 689              	.LVL66:
 690              	.L33:
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 152:Core/Src/camera.c ****             start_index = i;
 153:Core/Src/camera.c ****         }
 154:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD9) {
 691              		.loc 1 154 9 is_stmt 1 view .LVU106
 692              		.loc 1 154 12 is_stmt 0 view .LVU107
 693 000a FF2A     		cmp	r2, #255
 694 000c 0FD0     		beq	.L42
 695              	.L34:
 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 696              		.loc 1 150 46 is_stmt 1 discriminator 2 view .LVU108
ARM GAS  /tmp/ccUAQnId.s 			page 16


 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 697              		.loc 1 150 47 is_stmt 0 discriminator 2 view .LVU109
 698 000e 0133     		adds	r3, r3, #1
 699              	.LVL67:
 700              	.L32:
 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 701              		.loc 1 150 26 is_stmt 1 discriminator 1 view .LVU110
 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 702              		.loc 1 150 41 is_stmt 0 discriminator 1 view .LVU111
 703 0010 421E     		subs	r2, r0, #1
 150:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 704              		.loc 1 150 5 discriminator 1 view .LVU112
 705 0012 9A42     		cmp	r2, r3
 706 0014 11D9     		bls	.L43
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 707              		.loc 1 151 9 is_stmt 1 view .LVU113
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 708              		.loc 1 151 25 is_stmt 0 view .LVU114
 709 0016 CA5C     		ldrb	r2, [r1, r3]	@ zero_extendqisi2
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 710              		.loc 1 151 12 view .LVU115
 711 0018 FF2A     		cmp	r2, #255
 712 001a F6D1     		bne	.L33
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 713              		.loc 1 151 52 discriminator 1 view .LVU116
 714 001c CC18     		adds	r4, r1, r3
 715 001e 6478     		ldrb	r4, [r4, #1]	@ zero_extendqisi2
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 716              		.loc 1 151 37 discriminator 1 view .LVU117
 717 0020 D82C     		cmp	r4, #216
 718 0022 F2D1     		bne	.L33
 151:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 719              		.loc 1 151 68 discriminator 2 view .LVU118
 720 0024 B5F1FF3F 		cmp	r5, #-1
 721 0028 EFD1     		bne	.L33
 152:Core/Src/camera.c ****         }
 722              		.loc 1 152 13 is_stmt 1 view .LVU119
 152:Core/Src/camera.c ****         }
 723              		.loc 1 152 25 is_stmt 0 view .LVU120
 724 002a 1D46     		mov	r5, r3
 725              	.LVL68:
 152:Core/Src/camera.c ****         }
 726              		.loc 1 152 25 view .LVU121
 727 002c EDE7     		b	.L33
 728              	.LVL69:
 729              	.L42:
 730              		.loc 1 154 52 discriminator 1 view .LVU122
 731 002e 5A1C     		adds	r2, r3, #1
 732 0030 8C5C     		ldrb	r4, [r1, r2]	@ zero_extendqisi2
 733              		.loc 1 154 37 discriminator 1 view .LVU123
 734 0032 D92C     		cmp	r4, #217
 735 0034 EBD1     		bne	.L34
 155:Core/Src/camera.c ****             end_index = i + 1;
 736              		.loc 1 155 13 is_stmt 1 view .LVU124
 737              		.loc 1 155 23 is_stmt 0 view .LVU125
 738 0036 1446     		mov	r4, r2
 739              	.LVL70:
ARM GAS  /tmp/ccUAQnId.s 			page 17


 156:Core/Src/camera.c ****             break;
 740              		.loc 1 156 13 is_stmt 1 view .LVU126
 741 0038 01E0     		b	.L35
 742              	.LVL71:
 743              	.L43:
 744              		.loc 1 156 13 is_stmt 0 view .LVU127
 745              	.LBE3:
 149:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 746              		.loc 1 149 27 view .LVU128
 747 003a 4FF0FF34 		mov	r4, #-1
 748              	.LVL72:
 749              	.L35:
 157:Core/Src/camera.c ****         }
 158:Core/Src/camera.c ****     }
 159:Core/Src/camera.c **** 
 160:Core/Src/camera.c ****     if (start_index != -1 && end_index != -1 && end_index > start_index) 
 750              		.loc 1 160 5 is_stmt 1 view .LVU129
 751              		.loc 1 160 8 is_stmt 0 view .LVU130
 752 003e B5F1FF3F 		cmp	r5, #-1
 753 0042 0ED0     		beq	.L38
 754              		.loc 1 160 27 discriminator 1 view .LVU131
 755 0044 B4F1FF3F 		cmp	r4, #-1
 756 0048 0DD0     		beq	.L39
 757              		.loc 1 160 46 discriminator 2 view .LVU132
 758 004a A542     		cmp	r5, r4
 759 004c 01DB     		blt	.L44
 148:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 760              		.loc 1 148 14 view .LVU133
 761 004e 0020     		movs	r0, #0
 762              	.LVL73:
 161:Core/Src/camera.c ****     {
 162:Core/Src/camera.c ****         printf("JPEG found: start=%d, end=%d\n", start_index, end_index);
 163:Core/Src/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 164:Core/Src/camera.c ****         //     printf("%02X ", image_buffer[i]);
 165:Core/Src/camera.c ****         // }
 166:Core/Src/camera.c ****         // printf("\nJPEG extraction complete (%d bytes).\n", end_index - start_index + 1);
 167:Core/Src/camera.c ****         jpeg_length=end_index - start_index + 1;
 168:Core/Src/camera.c ****     } 
 169:Core/Src/camera.c ****     // uint32_t jpeg_length=end_index - start_index + 1;
 170:Core/Src/camera.c ****     return jpeg_length;
 763              		.loc 1 170 5 is_stmt 1 view .LVU134
 764              		.loc 1 170 12 is_stmt 0 view .LVU135
 765 0050 08E0     		b	.L31
 766              	.LVL74:
 767              	.L44:
 162:Core/Src/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 768              		.loc 1 162 9 is_stmt 1 view .LVU136
 769 0052 2246     		mov	r2, r4
 770 0054 2946     		mov	r1, r5
 771              	.LVL75:
 162:Core/Src/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 772              		.loc 1 162 9 is_stmt 0 view .LVU137
 773 0056 0548     		ldr	r0, .L45
 774              	.LVL76:
 162:Core/Src/camera.c ****         // for (int i = start_index; i <= end_index; i++) {
 775              		.loc 1 162 9 view .LVU138
 776 0058 FFF7FEFF 		bl	printf
ARM GAS  /tmp/ccUAQnId.s 			page 18


 777              	.LVL77:
 167:Core/Src/camera.c ****     } 
 778              		.loc 1 167 9 is_stmt 1 view .LVU139
 167:Core/Src/camera.c ****     } 
 779              		.loc 1 167 31 is_stmt 0 view .LVU140
 780 005c 621B     		subs	r2, r4, r5
 167:Core/Src/camera.c ****     } 
 781              		.loc 1 167 45 view .LVU141
 782 005e 501C     		adds	r0, r2, #1
 783              	.LVL78:
 167:Core/Src/camera.c ****     } 
 784              		.loc 1 167 45 view .LVU142
 785 0060 00E0     		b	.L31
 786              	.LVL79:
 787              	.L38:
 148:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 788              		.loc 1 148 14 view .LVU143
 789 0062 0020     		movs	r0, #0
 790              	.LVL80:
 791              	.L31:
 171:Core/Src/camera.c **** 
 172:Core/Src/camera.c **** 
 173:Core/Src/camera.c ****     // else {
 174:Core/Src/camera.c ****         // printf("JPEG not found in the image buffer.\n");
 175:Core/Src/camera.c ****         // return false;
 176:Core/Src/camera.c **** 
 177:Core/Src/camera.c ****     // }
 178:Core/Src/camera.c **** }
 792              		.loc 1 178 1 view .LVU144
 793 0064 38BD     		pop	{r3, r4, r5, pc}
 794              	.LVL81:
 795              	.L39:
 148:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 796              		.loc 1 148 14 view .LVU145
 797 0066 0020     		movs	r0, #0
 798              	.LVL82:
 148:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 799              		.loc 1 148 14 view .LVU146
 800 0068 FCE7     		b	.L31
 801              	.L46:
 802 006a 00BF     		.align	2
 803              	.L45:
 804 006c 00000000 		.word	.LC6
 805              		.cfi_endproc
 806              	.LFE79:
 808              		.section	.rodata.process_image_capture.str1.4,"aMS",%progbits,1
 809              		.align	2
 810              	.LC7:
 811 0000 53746172 		.ascii	"Starting image capture...\000"
 811      74696E67 
 811      20696D61 
 811      67652063 
 811      61707475 
 812 001a 0000     		.align	2
 813              	.LC8:
 814 001c 52656164 		.ascii	"Reading image from FIFO...\000"
 814      696E6720 
ARM GAS  /tmp/ccUAQnId.s 			page 19


 814      696D6167 
 814      65206672 
 814      6F6D2046 
 815 0037 00       		.align	2
 816              	.LC9:
 817 0038 4A504547 		.ascii	"JPEG not found in buffer\000"
 817      206E6F74 
 817      20666F75 
 817      6E642069 
 817      6E206275 
 818 0051 000000   		.align	2
 819              	.LC10:
 820 0054 4A504547 		.ascii	"JPEG found: start=%d, end=%d, length=%lu\012\000"
 820      20666F75 
 820      6E643A20 
 820      73746172 
 820      743D2564 
 821 007e 0000     		.align	2
 822              	.LC11:
 823 0080 466C6173 		.ascii	"Flash not found or not matching (ID: 0x%lX)\015\012"
 823      68206E6F 
 823      7420666F 
 823      756E6420 
 823      6F72206E 
 824 00ad 00       		.ascii	"\000"
 825 00ae 0000     		.align	2
 826              	.LC12:
 827 00b0 466C6173 		.ascii	"Flash found (ID: 0x%lX)\015\012\000"
 827      6820666F 
 827      756E6420 
 827      2849443A 
 827      20307825 
 828 00ca 0000     		.align	2
 829              	.LC13:
 830 00cc 454F4920 		.ascii	"EOI Packet.\000"
 830      5061636B 
 830      65742E00 
 831              		.align	2
 832              	.LC14:
 833 00d8 57726974 		.ascii	"Writing SSDV packet to flash...\000"
 833      696E6720 
 833      53534456 
 833      20706163 
 833      6B657420 
 834              		.align	2
 835              	.LC15:
 836 00f8 7C205353 		.ascii	"| SSDV packet %02lu stored at address 0x%06lX |\012"
 836      44562070 
 836      61636B65 
 836      74202530 
 836      326C7520 
 837 0128 00       		.ascii	"\000"
 838 0129 000000   		.align	2
 839              	.LC16:
 840 012c 5B535344 		.ascii	"[SSDV] Error or unexpected result.\000"
 840      565D2045 
 840      72726F72 
ARM GAS  /tmp/ccUAQnId.s 			page 20


 840      206F7220 
 840      756E6578 
 841 014f 00       		.align	2
 842              	.LC17:
 843 0150 5B464C41 		.ascii	"[FLASH READ COMPLETE]\015\000"
 843      53482052 
 843      45414420 
 843      434F4D50 
 843      4C455445 
 844              		.section	.text.process_image_capture,"ax",%progbits
 845              		.align	1
 846              		.global	process_image_capture
 847              		.syntax unified
 848              		.thumb
 849              		.thumb_func
 850              		.fpu softvfp
 852              	process_image_capture:
 853              	.LFB80:
 179:Core/Src/camera.c **** 
 180:Core/Src/camera.c **** 
 181:Core/Src/camera.c **** // //5th iteration
 182:Core/Src/camera.c **** void process_image_capture()
 183:Core/Src/camera.c **** {
 854              		.loc 1 183 1 is_stmt 1 view -0
 855              		.cfi_startproc
 856              		@ args = 0, pretend = 0, frame = 1520
 857              		@ frame_needed = 0, uses_anonymous_args = 0
 858 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 859              	.LCFI18:
 860              		.cfi_def_cfa_offset 20
 861              		.cfi_offset 4, -20
 862              		.cfi_offset 5, -16
 863              		.cfi_offset 6, -12
 864              		.cfi_offset 7, -8
 865              		.cfi_offset 14, -4
 866 0002 ADF2FC5D 		subw	sp, sp, #1532
 867              	.LCFI19:
 868              		.cfi_def_cfa_offset 1552
 184:Core/Src/camera.c **** 
 185:Core/Src/camera.c ****     // printf("setttinggggg.....camera\r\n");
 186:Core/Src/camera.c ****     arducam_set_jpeg_mode();
 869              		.loc 1 186 5 view .LVU148
 870 0006 FFF7FEFF 		bl	arducam_set_jpeg_mode
 871              	.LVL83:
 187:Core/Src/camera.c ****     // HAL_Delay(10);   
 188:Core/Src/camera.c ****     printf("Starting image capture...\n");
 872              		.loc 1 188 5 view .LVU149
 873 000a 5848     		ldr	r0, .L72
 874 000c FFF7FEFF 		bl	puts
 875              	.LVL84:
 189:Core/Src/camera.c ****     arducam_capture_image();
 876              		.loc 1 189 5 view .LVU150
 877 0010 FFF7FEFF 		bl	arducam_capture_image
 878              	.LVL85:
 190:Core/Src/camera.c **** 
 191:Core/Src/camera.c ****     printf("Reading image from FIFO...\n");
 879              		.loc 1 191 5 view .LVU151
ARM GAS  /tmp/ccUAQnId.s 			page 21


 880 0014 5648     		ldr	r0, .L72+4
 881 0016 FFF7FEFF 		bl	puts
 882              	.LVL86:
 192:Core/Src/camera.c ****     uint32_t bytes_read = arducam_burst_read(image_buffer, MAX_IMAGE_SIZE);
 883              		.loc 1 192 5 view .LVU152
 884              		.loc 1 192 27 is_stmt 0 view .LVU153
 885 001a 43F69821 		movw	r1, #15000
 886 001e 5548     		ldr	r0, .L72+8
 887 0020 FFF7FEFF 		bl	arducam_burst_read
 888              	.LVL87:
 193:Core/Src/camera.c ****     uint32_t jpeg_length = 0;
 889              		.loc 1 193 5 is_stmt 1 view .LVU154
 194:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 890              		.loc 1 194 5 view .LVU155
 195:Core/Src/camera.c **** 
 196:Core/Src/camera.c ****     // Find JPEG SOI and EOI markers
 197:Core/Src/camera.c ****     for (uint32_t i = 0; i < bytes_read - 1; i++) {
 891              		.loc 1 197 5 view .LVU156
 892              	.LBB4:
 893              		.loc 1 197 10 view .LVU157
 894              		.loc 1 197 19 is_stmt 0 view .LVU158
 895 0024 0023     		movs	r3, #0
 896              	.LBE4:
 194:Core/Src/camera.c ****     int start_index = -1, end_index = -1;
 897              		.loc 1 194 9 view .LVU159
 898 0026 4FF0FF34 		mov	r4, #-1
 899              	.LBB5:
 900              		.loc 1 197 5 view .LVU160
 901 002a 0AE0     		b	.L48
 902              	.LVL88:
 903              	.L69:
 198:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 904              		.loc 1 198 55 discriminator 1 view .LVU161
 905 002c 591C     		adds	r1, r3, #1
 906              		.loc 1 198 52 discriminator 1 view .LVU162
 907 002e 514D     		ldr	r5, .L72+8
 908 0030 695C     		ldrb	r1, [r5, r1]	@ zero_extendqisi2
 909              		.loc 1 198 37 discriminator 1 view .LVU163
 910 0032 D829     		cmp	r1, #216
 911 0034 0CD1     		bne	.L49
 912              		.loc 1 198 68 discriminator 2 view .LVU164
 913 0036 B4F1FF3F 		cmp	r4, #-1
 914 003a 09D1     		bne	.L49
 199:Core/Src/camera.c ****             start_index = i;
 915              		.loc 1 199 13 is_stmt 1 view .LVU165
 916              		.loc 1 199 25 is_stmt 0 view .LVU166
 917 003c 1C46     		mov	r4, r3
 918              	.LVL89:
 919              		.loc 1 199 25 view .LVU167
 920 003e 07E0     		b	.L49
 921              	.LVL90:
 922              	.L50:
 197:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 923              		.loc 1 197 46 is_stmt 1 discriminator 2 view .LVU168
 197:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 924              		.loc 1 197 47 is_stmt 0 discriminator 2 view .LVU169
 925 0040 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccUAQnId.s 			page 22


 926              	.LVL91:
 927              	.L48:
 197:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 928              		.loc 1 197 26 is_stmt 1 discriminator 1 view .LVU170
 197:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 929              		.loc 1 197 41 is_stmt 0 discriminator 1 view .LVU171
 930 0042 421E     		subs	r2, r0, #1
 197:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 931              		.loc 1 197 5 discriminator 1 view .LVU172
 932 0044 9A42     		cmp	r2, r3
 933 0046 0BD9     		bls	.L68
 198:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 934              		.loc 1 198 9 is_stmt 1 view .LVU173
 198:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 935              		.loc 1 198 25 is_stmt 0 view .LVU174
 936 0048 4A4A     		ldr	r2, .L72+8
 937 004a D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
 198:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD8 && start_index == -1) {
 938              		.loc 1 198 12 view .LVU175
 939 004c FF2A     		cmp	r2, #255
 940 004e EDD0     		beq	.L69
 941              	.L49:
 200:Core/Src/camera.c ****         }
 201:Core/Src/camera.c ****         if (image_buffer[i] == 0xFF && image_buffer[i + 1] == 0xD9) {
 942              		.loc 1 201 9 is_stmt 1 view .LVU176
 943              		.loc 1 201 12 is_stmt 0 view .LVU177
 944 0050 FF2A     		cmp	r2, #255
 945 0052 F5D1     		bne	.L50
 946              		.loc 1 201 55 discriminator 1 view .LVU178
 947 0054 5A1C     		adds	r2, r3, #1
 948              		.loc 1 201 52 discriminator 1 view .LVU179
 949 0056 4749     		ldr	r1, .L72+8
 950 0058 895C     		ldrb	r1, [r1, r2]	@ zero_extendqisi2
 951              		.loc 1 201 37 discriminator 1 view .LVU180
 952 005a D929     		cmp	r1, #217
 953 005c F0D1     		bne	.L50
 954 005e 01E0     		b	.L51
 955              	.L68:
 956              		.loc 1 201 37 discriminator 1 view .LVU181
 957              	.LBE5:
 194:Core/Src/camera.c **** 
 958              		.loc 1 194 27 view .LVU182
 959 0060 4FF0FF32 		mov	r2, #-1
 960              	.L51:
 961              	.LVL92:
 202:Core/Src/camera.c ****             end_index = i + 1;
 203:Core/Src/camera.c ****             break;
 204:Core/Src/camera.c ****         }
 205:Core/Src/camera.c ****     }
 206:Core/Src/camera.c **** 
 207:Core/Src/camera.c ****     if (start_index == -1 || end_index == -1 || end_index <= start_index) {
 962              		.loc 1 207 5 is_stmt 1 view .LVU183
 963              		.loc 1 207 8 is_stmt 0 view .LVU184
 964 0064 B4F1FF3F 		cmp	r4, #-1
 965 0068 04D0     		beq	.L53
 966              		.loc 1 207 27 discriminator 1 view .LVU185
 967 006a B2F1FF3F 		cmp	r2, #-1
ARM GAS  /tmp/ccUAQnId.s 			page 23


 968 006e 01D0     		beq	.L53
 969              		.loc 1 207 46 discriminator 2 view .LVU186
 970 0070 9442     		cmp	r4, r2
 971 0072 05DB     		blt	.L54
 972              	.L53:
 208:Core/Src/camera.c ****         printf("JPEG not found in buffer\n");
 973              		.loc 1 208 9 is_stmt 1 view .LVU187
 974 0074 4048     		ldr	r0, .L72+12
 975              	.LVL93:
 976              		.loc 1 208 9 is_stmt 0 view .LVU188
 977 0076 FFF7FEFF 		bl	puts
 978              	.LVL94:
 209:Core/Src/camera.c ****         return;
 979              		.loc 1 209 9 is_stmt 1 view .LVU189
 980              	.L47:
 210:Core/Src/camera.c ****     }
 211:Core/Src/camera.c **** 
 212:Core/Src/camera.c ****     jpeg_length = end_index - start_index + 1;
 213:Core/Src/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 214:Core/Src/camera.c **** 
 215:Core/Src/camera.c ****     /*------ SSDV ENCODING --------*/
 216:Core/Src/camera.c ****     ssdv_t ssdv;
 217:Core/Src/camera.c ****     uint8_t ssdv_pkt[SSDV_PKT_SIZE];
 218:Core/Src/camera.c **** 
 219:Core/Src/camera.c ****     ssdv_enc_init(&ssdv, ssdv_type, ssdv_call_sign, ssdv_image_id++, ssdv_quality);
 220:Core/Src/camera.c ****     ssdv_enc_set_buffer(&ssdv, ssdv_pkt);
 221:Core/Src/camera.c **** 
 222:Core/Src/camera.c ****     // size_t ssdv_packets_in_image = 0;
 223:Core/Src/camera.c **** 
 224:Core/Src/camera.c ****     // Flash initialization
 225:Core/Src/camera.c ****     flash_init();
 226:Core/Src/camera.c **** 
 227:Core/Src/camera.c ****     uint32_t flash_id = flash_read_id();
 228:Core/Src/camera.c ****     if (flash_id != FLASH_ID_512) {
 229:Core/Src/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 230:Core/Src/camera.c ****         while (1);
 231:Core/Src/camera.c ****     } else {
 232:Core/Src/camera.c ****         printf("Flash found (ID: 0x%lX)\r\n", flash_id);
 233:Core/Src/camera.c ****     }
 234:Core/Src/camera.c **** 
 235:Core/Src/camera.c ****     // Address for current image
 236:Core/Src/camera.c ****     uint32_t image_index = 0;  // Replace with a persistent value for multi-image storage
 237:Core/Src/camera.c ****     uint32_t ssdv_start_addr = image_index * (SSDV_PKT_SIZE * MAX_SSDV_PACKETS);
 238:Core/Src/camera.c **** 
 239:Core/Src/camera.c ****     // Erase necessary sectors
 240:Core/Src/camera.c ****     for (uint32_t addr = ssdv_start_addr; addr < (ssdv_start_addr + (SSDV_PKT_SIZE * MAX_SSDV_PACKE
 241:Core/Src/camera.c ****         flash_erase_sector(addr);
 242:Core/Src/camera.c ****     }
 243:Core/Src/camera.c **** 
 244:Core/Src/camera.c ****     // SSDV encoding and flash writing
 245:Core/Src/camera.c ****     uint32_t bi = 0;
 246:Core/Src/camera.c ****     int c;
 247:Core/Src/camera.c ****     while (1) {
 248:Core/Src/camera.c ****         while ((c = ssdv_enc_get_packet(&ssdv)) == SSDV_FEED_ME) {
 249:Core/Src/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 250:Core/Src/camera.c ****             if (chunk_size == 0) break;
 251:Core/Src/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
ARM GAS  /tmp/ccUAQnId.s 			page 24


 252:Core/Src/camera.c ****             bi += chunk_size;
 253:Core/Src/camera.c ****         }
 254:Core/Src/camera.c **** 
 255:Core/Src/camera.c ****         if (c == SSDV_EOI) {
 256:Core/Src/camera.c ****             printf("EOI Packet.\n");
 257:Core/Src/camera.c ****             break;
 258:Core/Src/camera.c ****         } else if (c == SSDV_OK) {
 259:Core/Src/camera.c ****             printf("Writing SSDV packet to flash...\n");
 260:Core/Src/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 261:Core/Src/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 262:Core/Src/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
 263:Core/Src/camera.c ****             ssdv_packets_in_image++;
 264:Core/Src/camera.c ****         } else {
 265:Core/Src/camera.c ****             printf("[SSDV] Error or unexpected result.\n");
 266:Core/Src/camera.c ****             break;
 267:Core/Src/camera.c ****         }
 268:Core/Src/camera.c ****     }
 269:Core/Src/camera.c **** 
 270:Core/Src/camera.c ****     /*------ READ BACK SSDV PACKETS --------*/
 271:Core/Src/camera.c ****     // printf("\n[READING BACK %lu SSDV PACKETS FROM FLASH]\n", ssdv_packets_in_image);
 272:Core/Src/camera.c ****     // for (uint32_t i = 0; i < ssdv_packets_in_image; i++) {
 273:Core/Src/camera.c ****     //     uint8_t buffer[SSDV_PKT_SIZE] = {0};
 274:Core/Src/camera.c ****     //     flash_read_buffer(buffer, ssdv_start_addr + i * SSDV_PKT_SIZE, SSDV_PKT_SIZE);
 275:Core/Src/camera.c ****     //     HAL_Delay(10);
 276:Core/Src/camera.c **** 
 277:Core/Src/camera.c ****     //     printf("Packet %02lu: ", i + 1);
 278:Core/Src/camera.c ****     //     for (uint16_t j = 0; j < SSDV_PKT_SIZE; j++) {
 279:Core/Src/camera.c ****     //         printf("0x%02X, ", buffer[j]);
 280:Core/Src/camera.c ****     //         if ((j + 1) % 16 == 0) printf("\n");
 281:Core/Src/camera.c ****     //     }
 282:Core/Src/camera.c ****     //     printf("\n-----------------------------\n");
 283:Core/Src/camera.c ****     // }
 284:Core/Src/camera.c **** 
 285:Core/Src/camera.c ****     printf("[FLASH READ COMPLETE]\r\n");
 286:Core/Src/camera.c **** 
 287:Core/Src/camera.c ****     current_packet_index = 0;
 288:Core/Src/camera.c ****     send_all_packets = 0;
 289:Core/Src/camera.c ****     prestore_image_requested = 0;
 290:Core/Src/camera.c **** }
 981              		.loc 1 290 1 is_stmt 0 view .LVU190
 982 007a 0DF2FC5D 		addw	sp, sp, #1532
 983              	.LCFI20:
 984              		.cfi_remember_state
 985              		.cfi_def_cfa_offset 20
 986              		@ sp needed
 987 007e F0BD     		pop	{r4, r5, r6, r7, pc}
 988              	.LVL95:
 989              	.L54:
 990              	.LCFI21:
 991              		.cfi_restore_state
 212:Core/Src/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 992              		.loc 1 212 5 is_stmt 1 view .LVU191
 212:Core/Src/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 993              		.loc 1 212 29 is_stmt 0 view .LVU192
 994 0080 161B     		subs	r6, r2, r4
 212:Core/Src/camera.c ****     printf("JPEG found: start=%d, end=%d, length=%lu\n", start_index, end_index, jpeg_length);
 995              		.loc 1 212 43 view .LVU193
ARM GAS  /tmp/ccUAQnId.s 			page 25


 996 0082 0136     		adds	r6, r6, #1
 997              	.LVL96:
 213:Core/Src/camera.c **** 
 998              		.loc 1 213 5 is_stmt 1 view .LVU194
 999 0084 3346     		mov	r3, r6
 1000              	.LVL97:
 213:Core/Src/camera.c **** 
 1001              		.loc 1 213 5 is_stmt 0 view .LVU195
 1002 0086 2146     		mov	r1, r4
 1003 0088 3C48     		ldr	r0, .L72+16
 1004              	.LVL98:
 213:Core/Src/camera.c **** 
 1005              		.loc 1 213 5 view .LVU196
 1006 008a FFF7FEFF 		bl	printf
 1007              	.LVL99:
 216:Core/Src/camera.c ****     uint8_t ssdv_pkt[SSDV_PKT_SIZE];
 1008              		.loc 1 216 5 is_stmt 1 view .LVU197
 217:Core/Src/camera.c **** 
 1009              		.loc 1 217 5 view .LVU198
 219:Core/Src/camera.c ****     ssdv_enc_set_buffer(&ssdv, ssdv_pkt);
 1010              		.loc 1 219 5 view .LVU199
 1011 008e 3C4A     		ldr	r2, .L72+20
 1012 0090 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1013 0092 591C     		adds	r1, r3, #1
 1014 0094 1170     		strb	r1, [r2]
 1015 0096 3B4A     		ldr	r2, .L72+24
 1016 0098 92F90020 		ldrsb	r2, [r2]
 1017 009c 0092     		str	r2, [sp]
 1018 009e 3A4A     		ldr	r2, .L72+28
 1019 00a0 3A49     		ldr	r1, .L72+32
 1020 00a2 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 1021 00a4 3AA8     		add	r0, sp, #232
 1022 00a6 FFF7FEFF 		bl	ssdv_enc_init
 1023              	.LVL100:
 220:Core/Src/camera.c **** 
 1024              		.loc 1 220 5 view .LVU200
 1025 00aa 02A9     		add	r1, sp, #8
 1026 00ac 3AA8     		add	r0, sp, #232
 1027 00ae FFF7FEFF 		bl	ssdv_enc_set_buffer
 1028              	.LVL101:
 225:Core/Src/camera.c **** 
 1029              		.loc 1 225 5 view .LVU201
 1030 00b2 FFF7FEFF 		bl	flash_init
 1031              	.LVL102:
 227:Core/Src/camera.c ****     if (flash_id != FLASH_ID_512) {
 1032              		.loc 1 227 5 view .LVU202
 227:Core/Src/camera.c ****     if (flash_id != FLASH_ID_512) {
 1033              		.loc 1 227 25 is_stmt 0 view .LVU203
 1034 00b6 FFF7FEFF 		bl	flash_read_id
 1035              	.LVL103:
 1036 00ba 0146     		mov	r1, r0
 1037              	.LVL104:
 228:Core/Src/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 1038              		.loc 1 228 5 is_stmt 1 view .LVU204
 228:Core/Src/camera.c ****         printf("Flash not found or not matching (ID: 0x%lX)\r\n", flash_id);
 1039              		.loc 1 228 8 is_stmt 0 view .LVU205
 1040 00bc 344B     		ldr	r3, .L72+36
ARM GAS  /tmp/ccUAQnId.s 			page 26


 1041 00be 9842     		cmp	r0, r3
 1042 00c0 03D0     		beq	.L56
 229:Core/Src/camera.c ****         while (1);
 1043              		.loc 1 229 9 is_stmt 1 view .LVU206
 1044 00c2 3448     		ldr	r0, .L72+40
 1045              	.LVL105:
 229:Core/Src/camera.c ****         while (1);
 1046              		.loc 1 229 9 is_stmt 0 view .LVU207
 1047 00c4 FFF7FEFF 		bl	printf
 1048              	.LVL106:
 1049              	.L57:
 230:Core/Src/camera.c ****     } else {
 1050              		.loc 1 230 9 is_stmt 1 discriminator 1 view .LVU208
 230:Core/Src/camera.c ****     } else {
 1051              		.loc 1 230 18 discriminator 1 view .LVU209
 230:Core/Src/camera.c ****     } else {
 1052              		.loc 1 230 15 discriminator 1 view .LVU210
 1053 00c8 FEE7     		b	.L57
 1054              	.LVL107:
 1055              	.L56:
 232:Core/Src/camera.c ****     }
 1056              		.loc 1 232 9 view .LVU211
 1057 00ca 3348     		ldr	r0, .L72+44
 1058              	.LVL108:
 232:Core/Src/camera.c ****     }
 1059              		.loc 1 232 9 is_stmt 0 view .LVU212
 1060 00cc FFF7FEFF 		bl	printf
 1061              	.LVL109:
 236:Core/Src/camera.c ****     uint32_t ssdv_start_addr = image_index * (SSDV_PKT_SIZE * MAX_SSDV_PACKETS);
 1062              		.loc 1 236 5 is_stmt 1 view .LVU213
 237:Core/Src/camera.c **** 
 1063              		.loc 1 237 5 view .LVU214
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1064              		.loc 1 240 5 view .LVU215
 1065              	.LBB6:
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1066              		.loc 1 240 10 view .LVU216
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1067              		.loc 1 240 19 is_stmt 0 view .LVU217
 1068 00d0 0025     		movs	r5, #0
 1069              	.LVL110:
 1070              	.L58:
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1071              		.loc 1 240 43 is_stmt 1 discriminator 1 view .LVU218
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1072              		.loc 1 240 5 is_stmt 0 discriminator 1 view .LVU219
 1073 00d2 42F25F73 		movw	r3, #10079
 1074 00d6 9D42     		cmp	r5, r3
 1075 00d8 05D8     		bhi	.L70
 241:Core/Src/camera.c ****     }
 1076              		.loc 1 241 9 is_stmt 1 discriminator 3 view .LVU220
 1077 00da 2846     		mov	r0, r5
 1078 00dc FFF7FEFF 		bl	flash_erase_sector
 1079              	.LVL111:
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1080              		.loc 1 240 106 discriminator 3 view .LVU221
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
ARM GAS  /tmp/ccUAQnId.s 			page 27


 1081              		.loc 1 240 111 is_stmt 0 discriminator 3 view .LVU222
 1082 00e0 05F58055 		add	r5, r5, #4096
 1083              	.LVL112:
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1084              		.loc 1 240 111 discriminator 3 view .LVU223
 1085 00e4 F5E7     		b	.L58
 1086              	.L70:
 240:Core/Src/camera.c ****         flash_erase_sector(addr);
 1087              		.loc 1 240 111 discriminator 3 view .LVU224
 1088              	.LBE6:
 245:Core/Src/camera.c ****     int c;
 1089              		.loc 1 245 14 view .LVU225
 1090 00e6 0027     		movs	r7, #0
 1091 00e8 1AE0     		b	.L60
 1092              	.LVL113:
 1093              	.L61:
 255:Core/Src/camera.c ****             printf("EOI Packet.\n");
 1094              		.loc 1 255 9 is_stmt 1 view .LVU226
 255:Core/Src/camera.c ****             printf("EOI Packet.\n");
 1095              		.loc 1 255 12 is_stmt 0 view .LVU227
 1096 00ea 0428     		cmp	r0, #4
 1097 00ec 2CD0     		beq	.L71
 258:Core/Src/camera.c ****             printf("Writing SSDV packet to flash...\n");
 1098              		.loc 1 258 16 is_stmt 1 view .LVU228
 258:Core/Src/camera.c ****             printf("Writing SSDV packet to flash...\n");
 1099              		.loc 1 258 19 is_stmt 0 view .LVU229
 1100 00ee 0028     		cmp	r0, #0
 1101 00f0 38D1     		bne	.L65
 259:Core/Src/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 1102              		.loc 1 259 13 is_stmt 1 view .LVU230
 1103 00f2 2A48     		ldr	r0, .L72+48
 1104              	.LVL114:
 259:Core/Src/camera.c ****             flash_write_buffer(ssdv_pkt, ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE, S
 1105              		.loc 1 259 13 is_stmt 0 view .LVU231
 1106 00f4 FFF7FEFF 		bl	puts
 1107              	.LVL115:
 260:Core/Src/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1108              		.loc 1 260 13 is_stmt 1 view .LVU232
 260:Core/Src/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1109              		.loc 1 260 82 is_stmt 0 view .LVU233
 1110 00f8 294D     		ldr	r5, .L72+52
 1111 00fa 2968     		ldr	r1, [r5]
 1112 00fc C1EBC101 		rsb	r1, r1, r1, lsl #3
 260:Core/Src/camera.c ****             printf("| SSDV packet %02lu stored at address 0x%06lX |\n", ssdv_packets_in_image + 1,
 1113              		.loc 1 260 13 view .LVU234
 1114 0100 E022     		movs	r2, #224
 1115 0102 4901     		lsls	r1, r1, #5
 1116 0104 02A8     		add	r0, sp, #8
 1117 0106 FFF7FEFF 		bl	flash_write_buffer
 1118              	.LVL116:
 261:Core/Src/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
 1119              		.loc 1 261 13 is_stmt 1 view .LVU235
 1120 010a 2968     		ldr	r1, [r5]
 262:Core/Src/camera.c ****             ssdv_packets_in_image++;
 1121              		.loc 1 262 76 is_stmt 0 view .LVU236
 1122 010c C1EBC102 		rsb	r2, r1, r1, lsl #3
 261:Core/Src/camera.c ****                    (unsigned long)(ssdv_start_addr + ssdv_packets_in_image * SSDV_PKT_SIZE));
ARM GAS  /tmp/ccUAQnId.s 			page 28


 1123              		.loc 1 261 13 view .LVU237
 1124 0110 5201     		lsls	r2, r2, #5
 1125 0112 0131     		adds	r1, r1, #1
 1126 0114 2348     		ldr	r0, .L72+56
 1127 0116 FFF7FEFF 		bl	printf
 1128              	.LVL117:
 263:Core/Src/camera.c ****         } else {
 1129              		.loc 1 263 13 is_stmt 1 view .LVU238
 263:Core/Src/camera.c ****         } else {
 1130              		.loc 1 263 34 is_stmt 0 view .LVU239
 1131 011a 2B68     		ldr	r3, [r5]
 1132 011c 0133     		adds	r3, r3, #1
 1133 011e 2B60     		str	r3, [r5]
 247:Core/Src/camera.c ****         while ((c = ssdv_enc_get_packet(&ssdv)) == SSDV_FEED_ME) {
 1134              		.loc 1 247 11 is_stmt 1 view .LVU240
 1135              	.LVL118:
 1136              	.L60:
 248:Core/Src/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1137              		.loc 1 248 15 view .LVU241
 248:Core/Src/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1138              		.loc 1 248 21 is_stmt 0 view .LVU242
 1139 0120 3AA8     		add	r0, sp, #232
 1140 0122 FFF7FEFF 		bl	ssdv_enc_get_packet
 1141              	.LVL119:
 248:Core/Src/camera.c ****             uint32_t chunk_size = ((jpeg_length - bi) >= 128) ? 128 : (jpeg_length - bi);
 1142              		.loc 1 248 15 view .LVU243
 1143 0126 0128     		cmp	r0, #1
 1144 0128 DFD1     		bne	.L61
 1145              	.LBB7:
 249:Core/Src/camera.c ****             if (chunk_size == 0) break;
 1146              		.loc 1 249 13 is_stmt 1 view .LVU244
 249:Core/Src/camera.c ****             if (chunk_size == 0) break;
 1147              		.loc 1 249 49 is_stmt 0 view .LVU245
 1148 012a F21B     		subs	r2, r6, r7
 249:Core/Src/camera.c ****             if (chunk_size == 0) break;
 1149              		.loc 1 249 22 view .LVU246
 1150 012c 802A     		cmp	r2, #128
 1151 012e 28BF     		it	cs
 1152 0130 8022     		movcs	r2, #128
 1153 0132 1546     		mov	r5, r2
 1154              	.LVL120:
 250:Core/Src/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
 1155              		.loc 1 250 13 is_stmt 1 view .LVU247
 250:Core/Src/camera.c ****             ssdv_enc_feed(&ssdv, &image_buffer[start_index + bi], chunk_size);
 1156              		.loc 1 250 16 is_stmt 0 view .LVU248
 1157 0134 B742     		cmp	r7, r6
 1158 0136 D8D0     		beq	.L61
 251:Core/Src/camera.c ****             bi += chunk_size;
 1159              		.loc 1 251 13 is_stmt 1 view .LVU249
 251:Core/Src/camera.c ****             bi += chunk_size;
 1160              		.loc 1 251 60 is_stmt 0 view .LVU250
 1161 0138 E319     		adds	r3, r4, r7
 251:Core/Src/camera.c ****             bi += chunk_size;
 1162              		.loc 1 251 13 view .LVU251
 1163 013a 0E49     		ldr	r1, .L72+8
 1164 013c 1944     		add	r1, r1, r3
 1165 013e 3AA8     		add	r0, sp, #232
ARM GAS  /tmp/ccUAQnId.s 			page 29


 1166              	.LVL121:
 251:Core/Src/camera.c ****             bi += chunk_size;
 1167              		.loc 1 251 13 view .LVU252
 1168 0140 FFF7FEFF 		bl	ssdv_enc_feed
 1169              	.LVL122:
 252:Core/Src/camera.c ****         }
 1170              		.loc 1 252 13 is_stmt 1 view .LVU253
 252:Core/Src/camera.c ****         }
 1171              		.loc 1 252 16 is_stmt 0 view .LVU254
 1172 0144 2F44     		add	r7, r7, r5
 1173              	.LVL123:
 252:Core/Src/camera.c ****         }
 1174              		.loc 1 252 16 view .LVU255
 1175 0146 EBE7     		b	.L60
 1176              	.LVL124:
 1177              	.L71:
 252:Core/Src/camera.c ****         }
 1178              		.loc 1 252 16 view .LVU256
 1179              	.LBE7:
 256:Core/Src/camera.c ****             break;
 1180              		.loc 1 256 13 is_stmt 1 view .LVU257
 1181 0148 1748     		ldr	r0, .L72+60
 1182              	.LVL125:
 256:Core/Src/camera.c ****             break;
 1183              		.loc 1 256 13 is_stmt 0 view .LVU258
 1184 014a FFF7FEFF 		bl	puts
 1185              	.LVL126:
 257:Core/Src/camera.c ****         } else if (c == SSDV_OK) {
 1186              		.loc 1 257 13 is_stmt 1 view .LVU259
 1187              	.L64:
 285:Core/Src/camera.c **** 
 1188              		.loc 1 285 5 view .LVU260
 1189 014e 1748     		ldr	r0, .L72+64
 1190 0150 FFF7FEFF 		bl	puts
 1191              	.LVL127:
 287:Core/Src/camera.c ****     send_all_packets = 0;
 1192              		.loc 1 287 5 view .LVU261
 287:Core/Src/camera.c ****     send_all_packets = 0;
 1193              		.loc 1 287 26 is_stmt 0 view .LVU262
 1194 0154 0023     		movs	r3, #0
 1195 0156 164A     		ldr	r2, .L72+68
 1196 0158 1380     		strh	r3, [r2]	@ movhi
 288:Core/Src/camera.c ****     prestore_image_requested = 0;
 1197              		.loc 1 288 5 is_stmt 1 view .LVU263
 288:Core/Src/camera.c ****     prestore_image_requested = 0;
 1198              		.loc 1 288 22 is_stmt 0 view .LVU264
 1199 015a 164A     		ldr	r2, .L72+72
 1200 015c 1370     		strb	r3, [r2]
 289:Core/Src/camera.c **** }
 1201              		.loc 1 289 5 is_stmt 1 view .LVU265
 289:Core/Src/camera.c **** }
 1202              		.loc 1 289 30 is_stmt 0 view .LVU266
 1203 015e 164A     		ldr	r2, .L72+76
 1204 0160 1370     		strb	r3, [r2]
 1205 0162 8AE7     		b	.L47
 1206              	.LVL128:
 1207              	.L65:
ARM GAS  /tmp/ccUAQnId.s 			page 30


 265:Core/Src/camera.c ****             break;
 1208              		.loc 1 265 13 is_stmt 1 view .LVU267
 1209 0164 1548     		ldr	r0, .L72+80
 1210              	.LVL129:
 265:Core/Src/camera.c ****             break;
 1211              		.loc 1 265 13 is_stmt 0 view .LVU268
 1212 0166 FFF7FEFF 		bl	puts
 1213              	.LVL130:
 266:Core/Src/camera.c ****         }
 1214              		.loc 1 266 13 is_stmt 1 view .LVU269
 1215 016a F0E7     		b	.L64
 1216              	.L73:
 1217              		.align	2
 1218              	.L72:
 1219 016c 00000000 		.word	.LC7
 1220 0170 1C000000 		.word	.LC8
 1221 0174 00000000 		.word	image_buffer
 1222 0178 38000000 		.word	.LC9
 1223 017c 54000000 		.word	.LC10
 1224 0180 00000000 		.word	.LANCHOR1
 1225 0184 00000000 		.word	.LANCHOR3
 1226 0188 00000000 		.word	.LANCHOR2
 1227 018c 00000000 		.word	.LANCHOR0
 1228 0190 2040EF00 		.word	15679520
 1229 0194 80000000 		.word	.LC11
 1230 0198 B0000000 		.word	.LC12
 1231 019c D8000000 		.word	.LC14
 1232 01a0 00000000 		.word	.LANCHOR4
 1233 01a4 F8000000 		.word	.LC15
 1234 01a8 CC000000 		.word	.LC13
 1235 01ac 50010000 		.word	.LC17
 1236 01b0 00000000 		.word	current_packet_index
 1237 01b4 00000000 		.word	send_all_packets
 1238 01b8 00000000 		.word	prestore_image_requested
 1239 01bc 2C010000 		.word	.LC16
 1240              		.cfi_endproc
 1241              	.LFE80:
 1243              		.global	ssdv_quality
 1244              		.global	ssdv_image_id
 1245              		.global	ssdv_call_sign
 1246              		.global	ssdv_type
 1247              		.global	ssdv_start_addr
 1248              		.global	ssdv_packets_in_image
 1249              		.global	jpeg_size
 1250              		.global	image_buffer
 1251              		.section	.bss.image_buffer,"aw",%nobits
 1252              		.align	2
 1255              	image_buffer:
 1256 0000 00000000 		.space	15000
 1256      00000000 
 1256      00000000 
 1256      00000000 
 1256      00000000 
 1257              		.section	.bss.jpeg_size,"aw",%nobits
 1258              		.align	2
 1261              	jpeg_size:
 1262 0000 00000000 		.space	4
ARM GAS  /tmp/ccUAQnId.s 			page 31


 1263              		.section	.bss.ssdv_image_id,"aw",%nobits
 1264              		.set	.LANCHOR1,. + 0
 1267              	ssdv_image_id:
 1268 0000 00       		.space	1
 1269              		.section	.bss.ssdv_packets_in_image,"aw",%nobits
 1270              		.align	2
 1271              		.set	.LANCHOR4,. + 0
 1274              	ssdv_packets_in_image:
 1275 0000 00000000 		.space	4
 1276              		.section	.bss.ssdv_start_addr,"aw",%nobits
 1277              		.align	2
 1280              	ssdv_start_addr:
 1281 0000 00000000 		.space	4
 1282              		.section	.bss.ssdv_type,"aw",%nobits
 1283              		.set	.LANCHOR0,. + 0
 1286              	ssdv_type:
 1287 0000 00       		.space	1
 1288              		.section	.data.ssdv_call_sign,"aw"
 1289              		.align	2
 1290              		.set	.LANCHOR2,. + 0
 1293              	ssdv_call_sign:
 1294 0000 43414C53 		.ascii	"CALSIGN"
 1294      49474E
 1295              		.section	.data.ssdv_quality,"aw"
 1296              		.set	.LANCHOR3,. + 0
 1299              	ssdv_quality:
 1300 0000 04       		.byte	4
 1301              		.text
 1302              	.Letext0:
 1303              		.file 2 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stdint.h"
 1304              		.file 3 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1305              		.file 4 "/usr/lib/gcc/arm-none-eabi/10.3.1/include/stddef.h"
 1306              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1307              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1308              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1309              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1310              		.file 9 "libs/ssdv/ssdv.h"
 1311              		.file 10 "Core/Inc/camera.h"
 1312              		.file 11 "Core/Inc/i2c_slave.h"
 1313              		.file 12 "libs/flash/flash.h"
 1314              		.file 13 "/usr/include/newlib/stdio.h"
 1315              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1316              		.file 15 "<built-in>"
ARM GAS  /tmp/ccUAQnId.s 			page 32


DEFINED SYMBOLS
                            *ABS*:0000000000000000 camera.c
     /tmp/ccUAQnId.s:16     .text.arducam_write_register:0000000000000000 $t
     /tmp/ccUAQnId.s:24     .text.arducam_write_register:0000000000000000 arducam_write_register
     /tmp/ccUAQnId.s:79     .text.arducam_write_register:0000000000000038 $d
     /tmp/ccUAQnId.s:85     .text.arducam_read_register:0000000000000000 $t
     /tmp/ccUAQnId.s:92     .text.arducam_read_register:0000000000000000 arducam_read_register
     /tmp/ccUAQnId.s:149    .text.arducam_read_register:0000000000000040 $d
     /tmp/ccUAQnId.s:155    .text.arducam_burst_read:0000000000000000 $t
     /tmp/ccUAQnId.s:162    .text.arducam_burst_read:0000000000000000 arducam_burst_read
     /tmp/ccUAQnId.s:243    .text.arducam_burst_read:0000000000000060 $d
     /tmp/ccUAQnId.s:249    .text.camersSetBrightness:0000000000000000 $t
     /tmp/ccUAQnId.s:256    .text.camersSetBrightness:0000000000000000 camersSetBrightness
     /tmp/ccUAQnId.s:282    .text.cameraSetSharpness:0000000000000000 $t
     /tmp/ccUAQnId.s:289    .text.cameraSetSharpness:0000000000000000 cameraSetSharpness
     /tmp/ccUAQnId.s:315    .text.cameraSetContrast:0000000000000000 $t
     /tmp/ccUAQnId.s:322    .text.cameraSetContrast:0000000000000000 cameraSetContrast
     /tmp/ccUAQnId.s:348    .text.cameraSetEV:0000000000000000 $t
     /tmp/ccUAQnId.s:355    .text.cameraSetEV:0000000000000000 cameraSetEV
     /tmp/ccUAQnId.s:381    .text.cameraSetSaturation:0000000000000000 $t
     /tmp/ccUAQnId.s:388    .text.cameraSetSaturation:0000000000000000 cameraSetSaturation
     /tmp/ccUAQnId.s:414    .text.cameraSetColorEffect:0000000000000000 $t
     /tmp/ccUAQnId.s:421    .text.cameraSetColorEffect:0000000000000000 cameraSetColorEffect
     /tmp/ccUAQnId.s:447    .rodata.arducam_set_jpeg_mode.str1.4:0000000000000000 $d
     /tmp/ccUAQnId.s:466    .text.arducam_set_jpeg_mode:0000000000000000 $t
     /tmp/ccUAQnId.s:473    .text.arducam_set_jpeg_mode:0000000000000000 arducam_set_jpeg_mode
     /tmp/ccUAQnId.s:591    .text.arducam_set_jpeg_mode:00000000000000a4 $d
     /tmp/ccUAQnId.s:607    .text.arducam_capture_image:0000000000000000 $t
     /tmp/ccUAQnId.s:614    .text.arducam_capture_image:0000000000000000 arducam_capture_image
     /tmp/ccUAQnId.s:649    .rodata.find_jpeg.str1.4:0000000000000000 $d
     /tmp/ccUAQnId.s:653    .text.find_jpeg:0000000000000000 $t
     /tmp/ccUAQnId.s:660    .text.find_jpeg:0000000000000000 find_jpeg
     /tmp/ccUAQnId.s:804    .text.find_jpeg:000000000000006c $d
     /tmp/ccUAQnId.s:809    .rodata.process_image_capture.str1.4:0000000000000000 $d
     /tmp/ccUAQnId.s:845    .text.process_image_capture:0000000000000000 $t
     /tmp/ccUAQnId.s:852    .text.process_image_capture:0000000000000000 process_image_capture
     /tmp/ccUAQnId.s:1219   .text.process_image_capture:000000000000016c $d
     /tmp/ccUAQnId.s:1255   .bss.image_buffer:0000000000000000 image_buffer
     /tmp/ccUAQnId.s:1299   .data.ssdv_quality:0000000000000000 ssdv_quality
     /tmp/ccUAQnId.s:1267   .bss.ssdv_image_id:0000000000000000 ssdv_image_id
     /tmp/ccUAQnId.s:1293   .data.ssdv_call_sign:0000000000000000 ssdv_call_sign
     /tmp/ccUAQnId.s:1286   .bss.ssdv_type:0000000000000000 ssdv_type
     /tmp/ccUAQnId.s:1280   .bss.ssdv_start_addr:0000000000000000 ssdv_start_addr
     /tmp/ccUAQnId.s:1274   .bss.ssdv_packets_in_image:0000000000000000 ssdv_packets_in_image
     /tmp/ccUAQnId.s:1261   .bss.jpeg_size:0000000000000000 jpeg_size
     /tmp/ccUAQnId.s:1252   .bss.image_buffer:0000000000000000 $d
     /tmp/ccUAQnId.s:1258   .bss.jpeg_size:0000000000000000 $d
     /tmp/ccUAQnId.s:1268   .bss.ssdv_image_id:0000000000000000 $d
     /tmp/ccUAQnId.s:1270   .bss.ssdv_packets_in_image:0000000000000000 $d
     /tmp/ccUAQnId.s:1277   .bss.ssdv_start_addr:0000000000000000 $d
     /tmp/ccUAQnId.s:1287   .bss.ssdv_type:0000000000000000 $d
     /tmp/ccUAQnId.s:1289   .data.ssdv_call_sign:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
hspi1
ARM GAS  /tmp/ccUAQnId.s 			page 33


HAL_SPI_TransmitReceive
HAL_SPI_Receive
HAL_Delay
printf
lvl
saturation_lvl
exposure_lvl
contra_lvl
shrp_lvl
effect
puts
ssdv_enc_init
ssdv_enc_set_buffer
flash_init
flash_read_id
flash_erase_sector
flash_write_buffer
ssdv_enc_get_packet
ssdv_enc_feed
current_packet_index
send_all_packets
prestore_image_requested
